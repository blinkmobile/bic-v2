function explode(e,t,r){var n={0:""};if(2>arguments.length||arguments[0]===void 0||arguments[1]===void 0)return null;
if(""===e||e===!1||null===e)return!1;if("function"==typeof e||"object"==typeof e||"function"==typeof t||"object"==typeof t)return n;
if(e===!0&&(e="1"),r){var i=(""+t).split(""+e),o=i.splice(0,r-1),a=i.join(""+e);return o.push(a),o
}return(""+t).split(""+e)}function utf8_encode(e){if(null===e||e===void 0)return"";
var t,r,n=e+"",i="",o=0;t=r=0,o=n.length;for(var a=0;o>a;a++){var s=n.charCodeAt(a),u=null;
128>s?r++:u=s>127&&2048>s?String.fromCharCode(192|s>>6)+String.fromCharCode(128|63&s):String.fromCharCode(224|s>>12)+String.fromCharCode(128|63&s>>6)+String.fromCharCode(128|63&s),null!==u&&(r>t&&(i+=n.slice(t,r)),i+=u,t=r=a+1)
}return r>t&&(i+=n.slice(t,o)),i}function sha1(e){var t,r,n,i,o,a,s,u,c,l=function(e,t){var r=e<<t|e>>>32-t;
return r},f=function(e){var t,r,n="";for(t=7;t>=0;t--)r=15&e>>>4*t,n+=r.toString(16);
return n},p=Array(80),d=1732584193,g=4023233417,h=2562383102,y=271733878,m=3285377520;
e=this.utf8_encode(e);var v=e.length,w=[];for(r=0;v-3>r;r+=4)n=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),w.push(n);
switch(v%4){case 0:r=2147483648;break;case 1:r=8388608|e.charCodeAt(v-1)<<24;break;
case 2:r=32768|(e.charCodeAt(v-2)<<24|e.charCodeAt(v-1)<<16);break;case 3:r=128|(e.charCodeAt(v-3)<<24|e.charCodeAt(v-2)<<16|e.charCodeAt(v-1)<<8)
}for(w.push(r);14!=w.length%16;)w.push(0);for(w.push(v>>>29),w.push(4294967295&v<<3),t=0;w.length>t;t+=16){for(r=0;16>r;r++)p[r]=w[t+r];
for(r=16;79>=r;r++)p[r]=l(p[r-3]^p[r-8]^p[r-14]^p[r-16],1);for(i=d,o=g,a=h,s=y,u=m,r=0;19>=r;r++)c=4294967295&l(i,5)+(o&a|~o&s)+u+p[r]+1518500249,u=s,s=a,a=l(o,30),o=i,i=c;
for(r=20;39>=r;r++)c=4294967295&l(i,5)+(o^a^s)+u+p[r]+1859775393,u=s,s=a,a=l(o,30),o=i,i=c;
for(r=40;59>=r;r++)c=4294967295&l(i,5)+(o&a|o&s|a&s)+u+p[r]+2400959708,u=s,s=a,a=l(o,30),o=i,i=c;
for(r=60;79>=r;r++)c=4294967295&l(i,5)+(o^a^s)+u+p[r]+3395469782,u=s,s=a,a=l(o,30),o=i,i=c;
d=4294967295&d+i,g=4294967295&g+o,h=4294967295&h+a,y=4294967295&y+s,m=4294967295&m+u
}return c=f(d)+f(g)+f(h)+f(y)+f(m),c.toLowerCase()}function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))
}function parse_url(e,t){for(var r={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[r.strictMode?"strict":"loose"].exec(e),i={},o=14;o--;)i[r.key[o]]=n[o]||"";
switch(t){case"PHP_URL_SCHEME":return i.protocol;case"PHP_URL_HOST":return i.host;
case"PHP_URL_PORT":return i.port;case"PHP_URL_USER":return i.user;case"PHP_URL_PASS":return i.password;
case"PHP_URL_PATH":return i.path;case"PHP_URL_QUERY":return i.query;case"PHP_URL_FRAGMENT":return i.anchor;
default:var a={};return""!==i.protocol&&(a.scheme=i.protocol),""!==i.host&&(a.host=i.host),""!==i.port&&(a.port=i.port),""!==i.user&&(a.user=i.user),""!==i.password&&(a.pass=i.password),""!==i.path&&(a.path=i.path),""!==i.query&&(a.query=i.query),""!==i.anchor&&(a.fragment=i.anchor),a
}}function parse_str(str,array){var glue1="=",glue2="&",array2=(str+"").replace(/^&?([\s\S]*?)&?$/,"$1").split(glue2),i,j,chr,tmp,key,value,bracket,keys,evalStr,that=this,fixStr=function(e){return that.urldecode(e).replace(/([\\"'])/g,"\\$1").replace(/\n/g,"\\n").replace(/\r/g,"\\r")
};for(array||(array=this.window),i=0;array2.length>i;i++){for(tmp=array2[i].split(glue1),2>tmp.length&&(tmp=[tmp,""]),key=fixStr(tmp[0]),value=fixStr(tmp[1]);" "===key.charAt(0);)key=key.substr(1);
if(-1!==key.indexOf("\0")&&(key=key.substr(0,key.indexOf("\0"))),key&&"["!==key.charAt(0)){for(keys=[],bracket=0,j=0;key.length>j;j++)if("["!==key.charAt(j)||bracket){if("]"===key.charAt(j)&&bracket&&(keys.length||keys.push(key.substr(0,bracket-1)),keys.push(key.substr(bracket,j-bracket)),bracket=0,"["!==key.charAt(j+1)))break
}else bracket=j+1;for(keys.length||(keys=[key]),j=0;keys[0].length>j&&(chr=keys[0].charAt(j),(" "===chr||"."===chr||"["===chr)&&(keys[0]=keys[0].substr(0,j)+"_"+keys[0].substr(j+1)),"["!==chr);j++);for(evalStr="array",j=0;keys.length>j;j++)key=keys[j],key=""!==key&&" "!==key||0===j?"'"+key+"'":eval(evalStr+".push([]);")-1,evalStr+="["+key+"]",j!==keys.length-1&&"undefined"===eval("typeof "+evalStr)&&eval(evalStr+" = [];");
evalStr+=" = '"+value+"';\n",eval(evalStr)}}}function htmlspecialchars(e,t,r,n){var i=0,o=0,a=!1;
(t===void 0||null===t)&&(t=2),e=""+e,n!==!1&&(e=e.replace(/&/g,"&amp;")),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");
var s={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};
if(0===t&&(a=!0),"number"!=typeof t){for(t=[].concat(t),o=0;t.length>o;o++)0===s[t[o]]?a=!0:s[t[o]]&&(i|=s[t[o]]);
t=i}return t&s.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/'/g,"&#039;")),a||(e=e.replace(/"/g,"&quot;")),e
}function htmlspecialchars_decode(e,t){var r=0,n=0,i=!1;t===void 0&&(t=2),e=(""+e).replace(/&lt;/g,"<").replace(/&gt;/g,">");
var o={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};
if(0===t&&(i=!0),"number"!=typeof t){for(t=[].concat(t),n=0;t.length>n;n++)0===o[t[n]]?i=!0:o[t[n]]&&(r|=o[t[n]]);
t=r}return t&o.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/&#0*39;/g,"'")),i||(e=e.replace(/&quot;/g,'"')),e=e.replace(/&amp;/g,"&")
}function setlocale(e,t){var r="",n=[],i=0,o=this.window.document,a=function a(e){if(e instanceof RegExp)return RegExp(e);
if(e instanceof Date)return new Date(e);var t={};for(var r in e)t[r]="object"==typeof e[r]?a(e[r]):e[r];
return t},s=function(e){return 1!==e?1:0},u=function(e){return e>1?1:0};this.php_js=this.php_js||{};
var c=this.php_js;if(c.locales||(c.locales={},c.locales.en={LC_COLLATE:function(e,t){return e==t?0:e>t?1:-1
},LC_CTYPE:{an:/^[A-Za-z\d]+$/g,al:/^[A-Za-z]+$/g,ct:/^[\u0000-\u001F\u007F]+$/g,dg:/^[\d]+$/g,gr:/^[\u0021-\u007E]+$/g,lw:/^[a-z]+$/g,pr:/^[\u0020-\u007E]+$/g,pu:/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g,sp:/^[\f\n\r\t\v ]+$/g,up:/^[A-Z]+$/g,xd:/^[A-Fa-f\d]+$/g,CODESET:"UTF-8",lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},LC_TIME:{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %r %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%Y",X:"%r",alt_digits:"",ERA:"",ERA_YEAR:"",ERA_D_T_FMT:"",ERA_D_FMT:"",ERA_T_FMT:""},LC_MONETARY:{int_curr_symbol:"USD",currency_symbol:"$",mon_decimal_point:".",mon_thousands_sep:",",mon_grouping:[3],positive_sign:"",negative_sign:"-",int_frac_digits:2,frac_digits:2,p_cs_precedes:1,p_sep_by_space:0,n_cs_precedes:1,n_sep_by_space:0,p_sign_posn:3,n_sign_posn:0},LC_NUMERIC:{decimal_point:".",thousands_sep:",",grouping:[3]},LC_MESSAGES:{YESEXPR:"^[yY].*",NOEXPR:"^[nN].*",YESSTR:"",NOSTR:""},nplurals:s},c.locales.en_US=a(c.locales.en),c.locales.en_US.LC_TIME.c="%a %d %b %Y %r %Z",c.locales.en_US.LC_TIME.x="%D",c.locales.en_US.LC_TIME.X="%r",c.locales.en_US.LC_MONETARY.int_curr_symbol="USD ",c.locales.en_US.LC_MONETARY.p_sign_posn=1,c.locales.en_US.LC_MONETARY.n_sign_posn=1,c.locales.en_US.LC_MONETARY.mon_grouping=[3,3],c.locales.en_US.LC_NUMERIC.thousands_sep="",c.locales.en_US.LC_NUMERIC.grouping=[],c.locales.en_GB=a(c.locales.en),c.locales.en_GB.LC_TIME.r="%l:%M:%S %P %Z",c.locales.en_AU=a(c.locales.en_GB),c.locales.C=a(c.locales.en),c.locales.C.LC_CTYPE.CODESET="ANSI_X3.4-1968",c.locales.C.LC_MONETARY={int_curr_symbol:"",currency_symbol:"",mon_decimal_point:"",mon_thousands_sep:"",mon_grouping:[],p_cs_precedes:127,p_sep_by_space:127,n_cs_precedes:127,n_sep_by_space:127,p_sign_posn:127,n_sign_posn:127,positive_sign:"",negative_sign:"",int_frac_digits:127,frac_digits:127},c.locales.C.LC_NUMERIC={decimal_point:".",thousands_sep:"",grouping:[]},c.locales.C.LC_TIME.c="%a %b %e %H:%M:%S %Y",c.locales.C.LC_TIME.x="%m/%d/%y",c.locales.C.LC_TIME.X="%H:%M:%S",c.locales.C.LC_MESSAGES.YESEXPR="^[yY]",c.locales.C.LC_MESSAGES.NOEXPR="^[nN]",c.locales.fr=a(c.locales.en),c.locales.fr.nplurals=u,c.locales.fr.LC_TIME.a=["dim","lun","mar","mer","jeu","ven","sam"],c.locales.fr.LC_TIME.A=["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],c.locales.fr.LC_TIME.b=["jan","fév","mar","avr","mai","jun","jui","aoû","sep","oct","nov","déc"],c.locales.fr.LC_TIME.B=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],c.locales.fr.LC_TIME.c="%a %d %b %Y %T %Z",c.locales.fr.LC_TIME.p=["",""],c.locales.fr.LC_TIME.P=["",""],c.locales.fr.LC_TIME.x="%d.%m.%Y",c.locales.fr.LC_TIME.X="%T",c.locales.fr_CA=a(c.locales.fr),c.locales.fr_CA.LC_TIME.x="%Y-%m-%d"),!c.locale){c.locale="en_US";
var l="http://www.w3.org/1999/xhtml",f="http://www.w3.org/XML/1998/namespace";o.getElementsByTagNameNS&&o.getElementsByTagNameNS(l,"html")[0]?o.getElementsByTagNameNS(l,"html")[0].getAttributeNS&&o.getElementsByTagNameNS(l,"html")[0].getAttributeNS(f,"lang")?c.locale=o.getElementsByTagName(l,"html")[0].getAttributeNS(f,"lang"):o.getElementsByTagNameNS(l,"html")[0].lang&&(c.locale=o.getElementsByTagNameNS(l,"html")[0].lang):o.getElementsByTagName("html")[0]&&o.getElementsByTagName("html")[0].lang&&(c.locale=o.getElementsByTagName("html")[0].lang)
}if(c.locale=c.locale.replace("-","_"),c.locale in c.locales||c.locale.replace(/_[a-zA-Z]+$/,"")in c.locales&&(c.locale=c.locale.replace(/_[a-zA-Z]+$/,"")),c.localeCategories||(c.localeCategories={LC_COLLATE:c.locale,LC_CTYPE:c.locale,LC_MONETARY:c.locale,LC_NUMERIC:c.locale,LC_TIME:c.locale,LC_MESSAGES:c.locale}),null===t||""===t)t=this.getenv(e)||this.getenv("LANG");
else if("[object Array]"===Object.prototype.toString.call(t))for(i=0;t.length>i;i++){if(t[i]in this.php_js.locales){t=t[i];
break}if(i===t.length-1)return!1}if("0"===t||0===t){if("LC_ALL"===e){for(r in this.php_js.localeCategories)n.push(r+"="+this.php_js.localeCategories[r]);
return n.join(";")}return this.php_js.localeCategories[e]}if(!(t in this.php_js.locales))return!1;
if("LC_ALL"===e)for(r in this.php_js.localeCategories)this.php_js.localeCategories[r]=t;
else this.php_js.localeCategories[e]=t;return t}function strftime(e,t){this.php_js=this.php_js||{},this.setlocale("LC_ALL",0);
for(var r=this.php_js,n=function(e,t,r){for(r===void 0&&(r=10);r>parseInt(e,10)&&r>1;r/=10)e=""+t+e;
return""+e},i=r.localeCategories.LC_TIME,o=r.locales,a=o[i].LC_TIME,s={a:function(e){return a.a[e.getDay()]
},A:function(e){return a.A[e.getDay()]},b:function(e){return a.b[e.getMonth()]},B:function(e){return a.B[e.getMonth()]
},C:function(e){return n(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return n(parseInt(this.G(e)/100,10),0)
},G:function(e){var t=e.getFullYear(),r=parseInt(s.V(e),10),n=parseInt(s.W(e),10);
return n>r?t++:0===n&&r>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;
return n(0===t?12:t,0)},j:function(e){var t=e-new Date(""+e.getFullYear()+"/1/1 GMT");
t+=6e4*e.getTimezoneOffset();var r=parseInt(t/6e4/60/24,10)+1;return n(r,0,100)},k:["getHours","0"],l:function(e){var t=e.getHours()%12;
return n(0===t?12:t," ")},m:function(e){return n(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e){return a.p[e.getHours()>=12?1:0]
},P:function(e){return a.P[e.getHours()>=12?1:0]},s:function(e){return Date.parse(e)/1e3
},S:["getSeconds","0"],u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){var t=parseInt(s.j(e),10),r=6-e.getDay(),i=parseInt((t+r)/7,10);
return n(i,0)},V:function(e){var t=parseInt(s.W(e),10),r=new Date(""+e.getFullYear()+"/1/1").getDay(),i=t+(r>4||1>=r?0:1);
return 53===i&&4>new Date(""+e.getFullYear()+"/12/31").getDay()?i=1:0===i&&(i=s.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),n(i,0)
},w:"getDay",W:function(e){var t=parseInt(s.j(e),10),r=7-s.u(e),i=parseInt((t+r)/7,10);
return n(i,0,10)},y:function(e){return n(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),r=n(parseInt(Math.abs(t/60),10),0),i=n(t%60,0);
return(t>0?"-":"+")+r+i},Z:function(e){return(""+e).replace(/^.*\(([^)]+)\)$/,"$1")
},"%":function(){return"%"}},u=t===void 0?new Date:"object"==typeof t?new Date(t):new Date(1e3*t),c={c:"locale",D:"%m/%d/%y",F:"%y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"};e.match(/%[cDFhnrRtTxX]/);)e=e.replace(/%([cDFhnrRtTxX])/g,function(e,t){var r=c[t];
return"locale"===r?a[t]:r});var l=e.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(e,t){var r=s[t];
return"string"==typeof r?u[r]():"function"==typeof r?r(u):"object"==typeof r&&"string"==typeof r[0]?n(u[r[0]](),r[1]):t
});return l}function init_device(){var e=$("#activityIndicator");log("init_device()"),deviceVars.scrollProperty="-webkit-transform",deviceVars.scrollValue="translateY($1px)",$navBar=$("#navBoxHeader"),activityIndicatorTop=Math.floor($(window).height()/2),e.css("top",activityIndicatorTop),$("#startUp-initDevice").addClass("success")
}function onDeviceReady(){try{log("Device Ready"),log("Device: "+window.device.platform),MyAnswers.cameraPresent=!0,log("siteVars.answerSpace: "+siteVars.answerSpace),deviceVars.deviceFileName="/android.js",log("AppDevicePath: "+siteVars.serverDevicePath),log("AppPath: "+siteVars.serverAppPath)
}catch(e){log("onDeviceReady exception: "),log(e)}}function PictureSourceType(){}function lastPictureTaken(){}function isCameraPresent(){var e=isBlinkGapDevice();
return info("isBlinkGapDevice(): "+e),e&&window.device.camerapresent}function triggerScroll(){$(window).trigger("scroll")
}function insertHTML(e,t){"object"===$.type(e)&&MyAnswers.dispatch.add(function(){$(e).html(t)
})}function insertText(e,t){"object"===$.type(e)&&"string"==typeof t&&MyAnswers.dispatch.add(function(){$(e).text(t)
})}function setMainLabel(e){var t=document.getElementById("mainLabel");insertText(t,e)
}function deserialize(e){var t=e.split("&"),r={};return $.each(t,function(e,t){var n,i,o;
0!==t.length&&-1!==(n=t.indexOf("="))&&(i=t.substring(0,n),o=t.substring(n+1),r[decodeURIComponent(i)]=decodeURIComponent(o))
}),r}function getURLParameters(){var e,t=window.location.href,r={},n=RegExp("/"+siteVars.answerSpace+"/([^/?]*)","i");
return-1!==t.indexOf("?")&&(e=t.match(/\?([^#]*)#?.*$/),e&&e.length>=2&&(r=deserialize(e[1]),"string"==typeof r.keyword&&(r.keyword=r.keyword.replace("/","")))),e=t.match(n),e&&e.length>=2&&(r.keyword=e[1]),r
}function isAJAXError(e){switch(e){case null:case"timeout":case"error":case"notmodified":case"parseerror":return!0;
default:return!1}}function populateDataTags(e,t){var r;for(r in t)t.hasOwnProperty(r)&&e.attr("data-"+r,t[r])
}function processBlinkAnswerMessage(e){var t,r,n=MyAnswers.device.persistentStorage;
if(e=$.parseJSON(e),n&&"string"==typeof e.mojotarget&&("string"==typeof e.mojoxml?(log("controlMessage: populating Data Suitcase: "+e.mojotarget),MyAnswers.store.set("mojoXML:"+e.mojotarget,e.mojoxml)):e.mojodelete!==void 0&&(log("controlMessage: deleting Data Suitcase: "+e.mojotarget),MyAnswers.store.remove("mojoXML:"+e.mojotarget))),n&&e.startype){if(starsProfile[e.startype]=starsProfile[e.startype]||{},e.clearstars&&delete starsProfile[e.startype],"array"===$.type(e.staroff))for(r=e.staroff.length,t=0;r>t;t++)delete starsProfile[e.startype][e.staroff[t]];
if("array"===$.type(e.staron))for(r=e.staron.length,t=0;r>t;t++)starsProfile[e.startype][e.staron[t]]=starsProfile[e.startype][e.staron[t]]||{};
MyAnswers.store.set("starsProfile",JSON.stringify(starsProfile))}}function getPicture_Success(e){var t,r;
lastPictureTaken.image.put(lastPictureTaken.currentName,e);for(t in document.forms[0].elements)document.forms[0].elements.hasOwnProperty(t)&&(r=document.forms[0].elements[t],r.name&&(!r.type||"radio"!==r.type.toLowerCase()&&"checkbox"!==r.type.toLowerCase()||r.checked!==!1?r.type&&"button"===r.type.toLowerCase()&&lastPictureTaken.image.size()>0&&lastPictureTaken.currentName===r.name&&(r.style.backgroundColor="red"):$.noop()));
log("getpic success "+e.length)}function getPicture(e){var t=new BMP.BIC.Config(currentConfig),r=t.toCameraOptions();
void 0!==e&&(r.sourceType=e),navigator.camera.getPicture(getPicture_Success,null,r)
}function selectCamera(e){log("selectCamera: "),lastPictureTaken.currentName=e,getPicture(PictureSourceType.CAMERA)
}function selectLibrary(e){log("selectLibrary: "),lastPictureTaken.currentName=e,getPicture(PictureSourceType.PHOTO_LIBRARY)
}function resolveItemName(e,t){var r,n,i,o,a;if(t="string"==typeof t&&t||"interactions",r=t.substring(0,1),"number"==typeof e&&!isNaN(e)&&"object"===$.type(siteVars.config[r+e]))return e;
if("string"!=typeof e)return!1;for(e=decodeURI(e.replace(/\+/g," ").toLowerCase()),n=siteVars.map[t],o=n.length,i=0;o>i;i++)if(a=r+n[i],"object"===$.type(siteVars.config[a])&&e===siteVars.config[a].pertinent.name.toLowerCase())return n[i];
return"object"===$.type(siteVars.config[r+e])?e:!1}function performXSLT(e,t){var r=new $.Deferred(function(r){var n,i,o,a;
return window.ActiveXObject,"string"!=typeof e||"string"!=typeof t?(r.reject("XSLT failed due to poorly formed XML or XSL."),void 0):(i=$.parseXML(e),o=$.parseXML(t),window.XSLTProcessor?(log("performXSLT(): performing XSLT via XSLTProcessor (W3C)"),a=new window.XSLTProcessor,a.importStylesheet(o),n=a.transformToFragment(i,document)):i.transformNode!==void 0?(log("performXSLT(): performing XSLT via transformNode (IE)"),n=i.transformNode(o)):window.xsltProcess?(log("performXSLT(): performing XSLT via AJAXSLT library"),n=window.xsltProcess(i,o)):n="<p>Your browser does not support Data Suitcase keywords.</p>",r.resolve(n),void 0)
});return r.promise()}function isHome(){var e=siteVars.config["a"+siteVars.id].pertinent.siteStructure,t=$(".view:visible").first().attr("id");
switch(e){case"master categories":return"masterCategoriesView"===t;case"categories":return"categoriesView"===t;
default:return"keywordListView"===t}}function generateMojoAnswer(e){log("generateMojoAnswer(): currentConfig="+currentConfig.name);
var t,r,n,i,o,a,s,u,c=new $.Deferred,l=new $.Deferred,f=currentConfig.xsl,p=function(e,r){t+="<"+e+">"+r+"</"+e+">"
},d=function(e){s+=" or "+a+"='"+e+"'"};if("string"!==$.type(f)||0===f.length)return c.reject("<p>Error: this Interaction does not have any XSL to transform.</p>"),c.promise();
if(e)for(r=f.match(/\$args\[[\w\:][\w\:\-\.]*\]/g),i=r?r.length:0,n=0;i>n;n++)o="string"==typeof e[r[n].substring(1)]?e[r[n].substring(1)]:"",o=o.replace('"',""),o=o.replace("'",""),o=decodeURIComponent(o),f=f.replace(r[n],o);
for(u=f.match(/blink-stars\(([@\w.]+),\W*(\w+)\W*\)/);u;)s="",a=u[1],u=u[2],"object"===$.type(starsProfile[u])&&($.each(starsProfile[u],d),s=s.substr(4)),f=s.length>0?f.replace(/\(?blink-stars\(([@\w.]+),\W*(\w+)\W*\)\)?/,"("+s+")"):f.replace(/\(?blink-stars\(([@\w.]+),\W*(\w+)\W*\)\)?/,"(false())"),u=f.match(/blink-stars\(([@\w.]+),\W*(\w+)\W*\)/);
return"string"===$.type(currentConfig.xml)&&0===currentConfig.xml.indexOf("stars:")&&(currentConfig.mojoType="stars",currentConfig.xml=currentConfig.xml.replace(/^stars:/,"")),"stars"===currentConfig.mojoType?(u=currentConfig.xml,t="","object"!==$.type(starsProfile[u])?t="<stars></stars>":($.each(starsProfile[u],function(e,r){t+="<"+u+' id="'+e+'">',$.each(r,p),t+="</"+u+">"
}),t="<stars>"+t+"</stars>"),setTimeout(l.resolve,0)):"active-forms"===currentConfig.mojoType?$.when(window.getActiveFormsXML()).always(function(e){t=e,setTimeout(l.resolve,0)
}):"string"===$.type(currentConfig.xml)&&currentConfig.xml?$.when(MyAnswers.store.get("mojoXML:"+currentConfig.xml)).always(function(e){t=e,t||(t="<xml />"),setTimeout(l.resolve,0)
}):(t="<xml />",setTimeout(l.resolve,0)),"pending"!==c.state()?c.promise():($.when(l).always(function(){$.when(performXSLT(t,f)).done(function(e){c.resolve(e)
}).fail(function(e){c.resolve(e)})}),c.promise())}function getActiveFormsXML(){var e=new $.Deferred,t="";
return $.when(MyAnswers.pendingStore.keys(),MyAnswers.pendingV1Store.keys()).fail(function(){t="<type>error</type>",t+="<message>Unable to list active form records.</message>",t="<status>"+t+"</status>",e.resolve('<?xml version="1.0"?>\n<records>'+t+"</records>")
}).then(function(r,n){var i=[],o=function(e,r,n){var o,a=r.split(":"),s=siteVars.config["i"+a[0]],u=s?s.pertinent.name:"* unknown *",c=s?s.pertinent.displayName||s.pertinent.name:"* unknown *",l=a[1],f=a[2],p="";
p+="<id>"+r+"</id>\n",p+="<interaction>"+u+"</interaction>\n",p+="<interactionLabel>"+c+"</interactionLabel>\n",p+="<uuid>"+f+"</uuid>\n",p+="<form>"+l+"</form>\n",p+="<blinkFormsVersion>"+n+"</blinkFormsVersion>\n",2===n?(o=MyAnswers.pendingStore.get(r),i.push(o.promise()),$.when(o).fail(function(){t+="<record>"+p+"</record>\n"
}).then(function(e){var r,n="";"string"==typeof e&&0!==e.length&&("object"!==$.type(e)&&(e=$.parseJSON(e)),"array"===$.type(e)&&(e.length>=3&&(r=e[2],r.status&&(p+="<status>"+r.status+"</status>\n")),$.each(e[1],function(e,t){var r="";
r+="<name>"+e+"</name>\n",r+="<value>"+htmlspecialchars(t)+"</value>\n",n+="<field>"+r+"</field>\n"
}),p+="<fields>"+n+"</fields>\n"),t+="<record>"+p+"</record>\n")})):t+="<record>"+p+"</record>\n"
};$.each(r,function(e,t){o(e,t,2)}),$.each(n,function(e,t){o(e,t,1)}),$.whenArray(i).fail(function(){t="<type>error</type>",t+="<message>Unable to list active form records.</message>",t="<status>"+t+"</status>",e.resolve('<?xml version="1.0"?>\n<records>'+t+"</records>")
}).then(function(){e.resolve('<?xml version="1.0"?>\n<records>'+t+"</records>")})
}),e.promise()}function setSubmitCachedFormButton(){var e=$("#pendingButton");e.length>0&&$.when(window.countPendingForms()).fail(function(){e.hide()
}).then(function(t){var r=t+" Pending";MyAnswers.dispatch.add(function(){"number"==typeof t&&t>0?(insertText(e[0],r),e.show()):e.hide(),log("setSubmitCachedFormButton(): "+r)
})})}function onStarClick(){var e,t=$(this).data("id"),r=$(this).data("type"),n=$(this).data(),i=new Date;
if(delete n.id,delete n.type,$(this).hasClass("blink-star-on"))$(this).addClass("blink-star-off"),$(this).removeClass("blink-star-on"),delete starsProfile[r][t],$.isEmptyObject(starsProfile[r])&&delete starsProfile[r];
else if($(this).hasClass("blink-star-off")){$(this).addClass("blink-star-on"),$(this).removeClass("blink-star-off"),"object"!==$.type(starsProfile[r])&&(starsProfile[r]={}),starsProfile[r][t]={};
for(e in n)n.hasOwnProperty(e)&&(starsProfile[r][t][e.toUpperCase()]=n[e]);starsProfile[r][t].time=i.getTime(),starsProfile[r][t].type=r,starsProfile[r][t].id=t
}MyAnswers.store.set("starsProfile",JSON.stringify(starsProfile))}function onLinkClick(e){var t,r,n=$(this),i=n.attr(),o=!1,a=!0,s=null,u=null,c=null;
try{if(log("onLinkClick(): "+$(this).tagHTML()),n.hasClass("button")&&n.closest(".bLive-screen").length>0&&(o=!0,a=!1),"string"==typeof i.href){if(i.href=$.trim(i.href),r=explode("?",i.href,2),r[1]&&$.each(deserialize(r[1].trim()),function(e,t){i[e]=t
}),-1!==i.href.indexOf("../")&&(r[0]=r[0].replace(/^\.\.\//,""),i.interaction=r[0].replace(/^(.*)(?:\/)$/g,"$1"),delete i.href),i.href&&"#"===i.href[0])return!0;
if(i.href&&"?"===i.href[0])return delete i.interaction,delete i.keyword,delete i.style,delete i["class"],c=i.href,s=History.getState().data,s.arguments=i,u=window.document.title,a?History.pushState(s,u,c):History.replaceState(s,u,c),e.preventDefault(),!1
}if(i.href===void 0&&i.onclick===void 0)return i.back!==void 0?(History.back(),e.preventDefault(),!1):(i.home!==void 0?c="/"+siteVars.answerSpace+"/":i.login!==void 0?s={login:!0}:i.interaction||i.keyword?(t=resolveItemName(i.interaction||i.keyword,"interactions"),t&&($.each(i,function(e,t){"_"===e[0]&&(i["args["+e.substr(1)+"]"]=t,delete i[e])
}),delete i.interaction,delete i.keyword,delete i.style,delete i["class"],i["data-submit-stars-type"]&&(i._submitStarsType=n.data("submitStarsType"),i._submitStarsPost=n.data("submitStarsPost")||"stars"),c="/"+siteVars.answerSpace+"/"+siteVars.config["i"+t].pertinent.name+"/?"+$.param(i),s={m:currentMasterCategory,c:currentCategory,i:t,arguments:i})):i.category!==void 0?(t=resolveItemName(i.category,"categories"),t&&(c="/"+siteVars.answerSpace+"/?_c="+t,s={m:currentMasterCategory,c:t})):i.mastercategory!==void 0&&(t=resolveItemName(i.mastercategory,"masterCategories"),t&&(c="/"+siteVars.answerSpace+"/?_m="+t,s={m:t})),o&&("object"===$.type(s)?s._timestamp=$.now():s={_timestamp:$.now()}),(s||c)&&(a?History.pushState(s,u,c):History.replaceState(s,u,c)),e.preventDefault(),!1)
}catch(l){error("Error in onLinkClick handler..."),error(l)}return!0}function countPendingForms(){var e=new $.Deferred;
return $.when(MyAnswers.pendingStore.count(),MyAnswers.pendingV1Store.count()).then(function(t,r){e.resolve(t+r)
}).fail(function(){error("countPendingForms() unable to query storage"),e.resolve(0)
}),e.promise()}function pushPendingForm(e,t,r,n){var i=new $.Deferred;return $.when(MyAnswers.pendingStore.set(e+":"+t+":"+r,JSON.stringify(n))).then(function(){i.resolve()
}).fail(function(){i.reject()}).always(setSubmitCachedFormButton),i.promise()}function clearPendingForm(e,t,r){var n=new $.Deferred;
return $.when(MyAnswers.pendingStore.remove(e+":"+t+":"+r)).then(function(){n.resolve()
}).fail(function(){n.reject()}).always(setSubmitCachedFormButton),n.promise()}function pushPendingFormV1(e,t,r){var n=new $.Deferred;
return $.when(MyAnswers.pendingV1Store.set(e+":"+t,JSON.stringify(r))).then(function(){n.resolve(r)
}).fail(function(){n.reject()}).always(setSubmitCachedFormButton),n.promise()}function clearPendingFormV1(e,t){var r=new $.Deferred;
return $.when(MyAnswers.pendingV1Store.remove(e+":"+t)).then(function(){r.resolve()
}).fail(function(){r.reject()}).always(setSubmitCachedFormButton),r.promise()}function requestMoJO(e){var t=new $.Deferred;
return"string"!==$.type(e)||0===e.length?(t.resolve(),t.promise()):($.when(MyAnswers.store.get("mojoLastChecked:"+e)).done(function(r){var n={_id:siteVars.id,_m:e};
r=parseInt(r,10),"number"!=typeof r||isNaN(r)||(n._lc=r),deviceVars.isOnline?$.ajax({url:siteVars.serverAppPath+"/xhr/GetMoJO.php",data:n,dataType:"xml",complete:function(r){200===r.status?$.when(MyAnswers.store.set("mojoXML:"+e,r.responseText)).fail(t.reject).then(t.resolve):t.resolve()
},timeout:Math.max(1e3*currentConfig.downloadTimeout,computeTimeout(512e3))}):t.reject()
}),$.when(t.promise()).then(function(){MyAnswers.store.set("mojoLastChecked:"+e,$.now())
}),t.promise())}function processMoJOs(e){var t,r,n=new $.Deferred,i={},o=e?[e]:siteVars.map.interactions,a=o.length;
for(t=0;a>t;t++)r=siteVars.config["i"+o[t]],"object"===$.type(r)&&(r=r.pertinent,"object"===$.type(r)&&"xslt"===r.type&&"server-hosted"===r.mojoType&&"string"==typeof r.xml&&"stars:"!==r.xml.substring(0,6)&&(siteVars.mojos[r.xml]?(siteVars.mojos[r.xml].maximumAge=r.maximumAge?Math.min(r.maximumAge,siteVars.mojos[r.xml].maximumAge):siteVars.mojos[r.xml].maximumAge,siteVars.mojos[r.xml].minimumAge=r.minimumAge?Math.max(r.minimumAge,siteVars.mojos[r.xml].minimumAge):siteVars.mojos[r.xml].minimumAge):siteVars.mojos[r.xml]={maximumAge:r.maximumAge||0,minimumAge:r.minimumAge||0},i[r.xml]||(i[r.xml]=requestMoJO(r.xml))));
return i=$.map(i,function(e){return e}),$.whenArray(i).fail(n.reject).then(n.resolve),n.promise()
}function goBackToHome(){History.replaceState(null,null,"/"+siteVars.answerSpace+"/"),MyAnswers.$body.trigger("taskComplete")
}function showLoginView(){var e,t,r=$("#loginView");return currentConfig.loginAccess?MyAnswers.isCustomLogin?(e=resolveItemName(currentConfig.loginPromptInteraction,"interactions"))?(t="/"+siteVars.answerSpace+"/"+siteVars.config["i"+e].pertinent.name+"/?",History.pushState({m:null,c:null,i:e},null,t),!1):(BMP.alert("error: interaction used for login prompt is inaccessible or misconfigured"),!1):($.when(MyAnswersDevice.prepareView(r)).always(function(){MyAnswersDevice.showView(r),setMainLabel("Login")
}),void 0):!1}function updateLoginButtons(){var e=document.getElementById("loginStatus"),t=document.getElementById("loginButton"),r=document.getElementById("logoutButton"),n=function(){var e,t;
return log("submitLogout();"),currentConfig.loginAccess?currentConfig.loginUseInteractions?(e=resolveItemName(currentConfig.loginPromptInteraction,"interactions"))?(t="/"+siteVars.answerSpace+"/"+siteVars.config["i"+e].pertinent.name+"/?",History.pushState({m:null,c:null,i:e},null,t),!1):(BMP.alert("error: login interaction is inaccessible or misconfigured"),!1):(BMP.confirm("Log out?").then(function(e){e&&$.ajax({type:"GET",cache:"false",url:siteVars.serverAppPath+"/xhr/GetLogin.php",data:{_a:"logout"},complete:function(e){if(200===e.status){var t=$.parseJSON(e.responseText);
t&&("LOGGED IN"===t.status?(MyAnswers.loginAccount=t,MyAnswers.isLoggedIn=!0):(MyAnswers.isLoggedIn=!1,delete MyAnswers.loginAccount,window.location.reload())),updateLoginButtons(),goBackToHome()
}},timeout:1e3*currentConfig.downloadTimeout})}),!1):!1};siteVars.hasLogin&&(MyAnswers.isLoggedIn?(MyAnswers.loginAccount!==void 0&&"boolean"!=typeof MyAnswers.loginAccount?(MyAnswers.dispatch.add(function(){var t=$(e),r="logged in as<br />";
r+="object"===$.type(MyAnswers.loginAccount)?'<span class="loginAccount">'+MyAnswers.loginAccount.name||MyAnswers.loginAccount.username+"</span>":'<span class="loginAccount">'+MyAnswers.loginAccount+"</span>",t.empty(),t.append(r),t.unbind(),t.bind("click",n)
}),$(e).show()):$(r).show(),$(t).hide()):($(e).hide(),$(r).hide(),$(t).show()),void 0!==currentCategory&&MyAnswers.populateItemListing("interactions",$("#keywordListView")))
}function requestLoginStatus(){var e=new $.Deferred;return siteVars.hasLogin&&deviceVars.isOnline?($.ajax({url:siteVars.serverAppPath+"/xhr/GetLogin.php",dataType:"json",complete:function(t,r){if(isAJAXError(r)||200!==t.status)return e.reject(),void 0;
var n=$.parseJSON(t.responseText);n&&("LOGGED IN"===n.status?(MyAnswers.loginAccount=n,MyAnswers.isLoggedIn=!0):(MyAnswers.isLoggedIn=!1,delete MyAnswers.loginAccount)),updateLoginButtons(),e.resolve()
},timeout:Math.max(1e3*currentConfig.downloadTimeout,computeTimeout(500))}),e.promise()):(e.reject(),e.promise())
}function submitLogin(){log("submitLogin();"),$.ajax({type:"GET",cache:"false",url:siteVars.serverAppPath+"/xhr/GetLogin.php",data:$("#loginView").find("form").serializeArray(),complete:function(e,t){if($("#loginView").find("input[type=password]").val(""),200===e.status){var r=$.parseJSON(e.responseText);
r&&("LOGGED IN"===r.status?(MyAnswers.loginAccount=r,MyAnswers.isLoggedIn=!0,$.when(window.requestConfig()).always(function(){siteVars.map&&siteVars.config?(window.processConfig(),window.updateNavigationButtons()):BMP.alert("error: insufficient data, check network and reload / refresh")
})):(MyAnswers.isLoggedIn=!1,delete MyAnswers.loginAccount)),updateLoginButtons()
}else BMP.alert("Unable to login:  ("+t+" "+e.status+") "+e.responseText)},timeout:1e3*currentConfig.downloadTimeout})
}function updateNavigationButtons(){var e=MyAnswers.device.persistentStorage;MyAnswers.dispatch.add(function(){try{var t,r,n,i,o=$(".navBar"),a=$("#homeButton, #backButton"),s=$("#helpButton"),u=$("#pendingButton"),c=siteVars.hasLogin,l=window.isHome(),f=l||MyAnswers.isEmptySpace||MyAnswers.isLoginOnly;
switch($(".view:visible").first().attr("id")){case"keywordView":case"answerView":case"answerView2":currentInteraction&&(t=siteVars.config["i"+currentInteraction].pertinent.help);
break;case"helpView":t=null;break;default:t=siteVars.config["a"+siteVars.id]}r="string"==typeof t,r?(s.show(),s.removeAttr("disabled")):s.hide(),i=u.length>0&&f?countPendingForms():!0,$.when(i).always(function(e){"number"!=typeof e&&(e=0),n=f&&!c&&!r&&!e,n?o.hide():f?(o.show(),a.hide()):(a.show(),a.prop("disabled",!1),o.show())
}),$("#loginButton, #logoutButton, #pendingButton").removeAttr("disabled"),e&&l&&"pending"!==MyAnswers.dfrdMoJOs.state()&&processMoJOs(),MyAnswers.dispatch.add(function(){$(window).trigger("scroll")
}),MyAnswers.sideBar&&MyAnswers.sideBar.update()}catch(p){error("Error in updateNavigationButtons..."),error(p)
}})}function initialiseAnswerFeatures(e){log("initialiseAnswerFeatures(): view="+e.attr("id"));
var t,r=new $.Deferred,n=[],i="string"===$.type(currentInteraction)?currentInteraction:currentInteraction+"",o="string"===$.type(currentConfig.loginPromptInteraction)?currentConfig.loginPromptInteraction:currentConfig.loginPromptInteraction+"";
return currentConfig.loginAccess&&currentConfig.loginUseInteractions&&o===i&&(t=MyAnswers.isLoggedIn,$.when(requestLoginStatus()).always(function(){MyAnswers.isLoggedIn!==t&&(MyAnswers.isLoggedIn?$.when(window.requestConfig()).always(function(){siteVars.map&&siteVars.config?(window.processConfig(),window.updateNavigationButtons(),currentConfig.loginToDefaultScreen&&MyAnswers.gotoDefaultScreen()):BMP.alert("error: insufficient data, check network and reload / refresh")
}):window.location.reload())})),MyAnswers.dispatch.add(function(){var t=e.find("input, textarea, select"),r=e.find("form").first(),i=window.google!==void 0&&window.google.maps!==void 0&&window.google.maps.Map!==void 0;
MyAnswers.$body.trigger("taskBegun"),t.unbind("blur",triggerScroll),t.bind("blur",triggerScroll),MyAnswers.device.persistentStorage&&e.find(".blink-starrable").each(function(e,t){var r=$('<div class="blink-starrable" />'),n=$(t).data();
populateDataTags(r,n),r.bind("click",onStarClick),"object"!==$.type(starsProfile[$(t).data("type")])||"object"!==$.type(starsProfile[$(t).data("type")][$(t).data("id")])?r.addClass("blink-star-off"):r.addClass("blink-star-on"),$(t).replaceWith(r)
}),e.find("div.googlemap").size()>0&&(i?setTimeout(function(){MyAnswers.setupGoogleMaps(e)
},1e3):(MyAnswers.dfrdGoogleMaps=new $.Deferred,$.getCachedScript("//maps.googleapis.com/maps/api/js?key="+_Blink.cfg.GOOGLE_API_KEY+"&v=3&sensor=true&callback=MyAnswers.onGoogleMapsLoad").fail(function(){throw"unable to download Google Maps JavaScript library"
}).then(function(){$.when(MyAnswers.dfrdGoogleMaps.promise()).fail(function(){log("initialiseAnswerFeatures() error: unable to initialise Google Maps API")
}).then(function(){delete window.onGoogleMapsLoad,delete MyAnswers.dfrdGoogleMaps,MyAnswers.setupGoogleMaps(e)
})}))),0!==r.length&&("string"==typeof r.data("objectName")&&r.data("objectName").length>0?$.when(MyAnswers.formsDeferred.promise()).always(function(){n.push(BlinkForms.initialiseForm(r))
}):isCameraPresent()||r.find('input[onclick*="selectCamera"]').attr("disabled","disabled"))
}),MyAnswers.dispatch.add(function(){$.when.apply($,n).always(function(){MyAnswers.$body.trigger("taskComplete"),r.resolve(),e.trigger("viewReady")
})}),r.promise()}function updateCurrentConfig(){var e,t=[],r=_.clone(deviceVars.features),n=-1!==$.inArray("portrait",deviceVars.features)&&-1!==$.inArray("landscape",deviceVars.features),i="a"+siteVars.id,o="m"+currentMasterCategory,a="c"+currentCategory,s="i"+currentInteraction,u=function(e){var t,n,i,o,a,s,u=e.split("+"),c=u.length;
for(t=0;c>t;t++){if(n=u[t].split("|"),o=n.length,a=!0,s=!1,-1!==u[t].indexOf("|")){for(i=0;o>i;i++)if(-1!==$.inArray(n[i],r)){s=!0;
break}s||(a=!1)}else-1===$.inArray(u[t],r)&&(a=!1);if(!a)return null}return e},c=function(e){return e&&"string"==typeof e&&-1!==e.indexOf("+")?e.match(/\+/g).length:0
},l=function(r,n){t.push(e[n])};log("updateCurrentConfig(): "+i+" "+o+" "+a+" "+s),currentConfig={},t.push(currentConfig),n&&(r=_.without(r,"portrait","landscape"),r.push(MyAnswers.orientation)),$.each([i,o,a,s],function(r,n){var i,o;
e=siteVars.config[n],e&&$.isObject(e)&&(i=_.keys(e),o=1===i.length&&"pertinent"===i[0],o?t.push(e.pertinent):(t.push(e.pertinent),i=$.map(i,u),i=_.sortBy(i,c),$.each(i,l)))
}),$.extend.apply(this,t),MyAnswers.dispatch.add(function(){var e=$("#bannerBox"),t=e.find("img"),r=currentConfig.logoBanner;
"string"==typeof currentConfig.logoBanner?(r!==t.attr("src")&&t.attr("src",r),e.show()):(t.removeAttr("src"),e.hide())
}),MyAnswers.dispatch.add(function(){MyAnswers.$footer.html()!==currentConfig.footer&&MyAnswers.$footer.html(currentConfig.footer),"screen-bottom"===currentConfig.footerPosition?MyAnswers.$footer.css({position:"fixed",bottom:"0px","z-index":1}):MyAnswers.$footer.removeAttr("style")
}),MyAnswers.dispatch.add(function(){var e="",t=$('style[data-setting="styleSheet"]');
e+=currentConfig.styleSheet||"",e+=currentConfig.interfaceStyle?"body { "+currentConfig.interfaceStyle+" }\n":"",e+=currentConfig.backgroundStyle?".box { "+currentConfig.backgroundStyle+" }\n":"",e+=currentConfig.inputPromptStyle?"#argsBox { "+currentConfig.inputPromptStyle+" }\n":"",e+=currentConfig.evenRowStyle?"ul.box > li:nth-child(even), tr.even { "+currentConfig.evenRowStyle+" }\n":"",e+=currentConfig.oddRowStyle?"ul.box > li:nth-child(odd), tr.odd { "+currentConfig.oddRowStyle+" }\n":"",e+=currentConfig.headerStyle?"body > header { "+currentConfig.headerStyle+" }\n":"",e+=currentConfig.footerStyle?"body > footer { "+currentConfig.footerStyle+" }\n":"",e+=currentConfig.masterCategoriesStyle?"#masterCategoriesBox > .masterCategory { "+currentConfig.masterCategoriesStyle+" }\n":"",e+=currentConfig.categoriesStyle?"#categoriesBox > .category { "+currentConfig.categoriesStyle+" }\n":"",e+=currentConfig.interactionsStyle?"#keywordBox > .interaction, #keywordList > .interaction { "+currentConfig.interactionsStyle+" }\n":"",t.length&&(t[0].styleSheet?e!==t[0].styleSheet.cssText&&(t[0].styleSheet.cssText=e):e!==t.text()&&t.text(e))
}),MyAnswers.dispatch.add(function(){var e,t=$(".view:visible").last();try{if(t.hasClass("listing")){switch(t.attr("id")){case"masterCategoriesView":e="masterCategories";
break;case"categoriesView":e="categories";break;default:e="interactions"}MyAnswers.populateItemListing(e,t)
}}catch(r){r("Error in updateCurrentConfig...")}})}function showMasterCategoriesView(e){var t=$("#masterCategoriesView");
log("showMasterCategoriesView()"),currentInteraction=null,currentCategory=null,currentMasterCategory=null,$.when(MyAnswersDevice.prepareView(t,e)).always(function(){MyAnswers.populateItemListing("masterCategories",t),updateCurrentConfig(),setMainLabel("Master Categories"),MyAnswersDevice.showView(t,e)
})}function goBackToMasterCategoriesView(){var e=$("#masterCategoriesView");log("goBackToMasterCategoriesView()"),$.when(MyAnswersDevice.prepareView(e,!0)).always(function(){updateCurrentConfig(),setMainLabel("Master Categories"),MyAnswersDevice.showView($("#masterCategoriesView"),!0)
})}function showCategoriesView(e){var t=$("#categoriesView");log("showCategoriesView(): "+e),currentInteraction=null,currentCategory=null,hasMasterCategories&&e&&(currentMasterCategory=e),$.when(MyAnswersDevice.prepareView(t)).always(function(){updateCurrentConfig(),setMainLabel(e?siteVars.config["m"+e].pertinent.name:"Categories"),MyAnswers.populateItemListing("categories",t),MyAnswersDevice.showView(t)
})}function goBackToCategoriesView(){var e=$("#categoriesView");currentInteraction=null,currentCategory=null,log("goBackToCategoriesView()"),$.when(MyAnswersDevice.prepareView(e,!0)).always(function(){updateCurrentConfig(),setMainLabel(currentMasterCategory?siteVars.config["m"+currentMasterCategory].pertinent.name:"Categories"),MyAnswersDevice.showView(e,!0)
})}function restoreSessionProfile(e){log("restoreSessionProfile():");var t,r=siteVars.serverAppPath+"/util/GetSession.php",n=new $.Deferred;
return"string"!==$.type(e)||0===e.length?(n.reject(),n.promise()):(t="_as="+siteVars.answerSpace+"&_t="+e,$.ajax({url:r,data:t,dataType:"json",complete:function(e,t){if(isAJAXError(t)||200!==e.status)return BMP.alert("Connection error, please try again later. ("+t+" "+e.status+")"),n.reject(),n.promise();
var r=$.parseJSON(e.responseText);if(null===r)return log("restoreSessionProfile error: null data"),BMP.alert("Connection error, please try again later. ("+t+" "+e.status+")"),n.reject(),n.promise();
if("string"!=typeof r.errorMessage&&"string"!=typeof r.statusMessage){if(log("restoreSessionProfile success: no error messages, data: "+r),null===r.sessionProfile)return n.reject(),n.promise();
MyAnswers.store.set("starsProfile",JSON.stringify(r.sessionProfile.stars)),starsProfile=r.sessionProfile.stars
}"string"==typeof r.errorMessage&&(log("restoreSessionProfile error: "+r.errorMessage),n.reject()),setTimeout(function(){n.resolve()
},100)},timeout:Math.max(1e3*currentConfig.downloadTimeout,computeTimeout(10240))}),n.promise())
}function processFormsMap(e){var t,r,n={};return eachElement=function(e,t){var i=$(t);
n[r][i.attr("id")]=i.attr("object")},!e instanceof jQuery||!e.length?{}:(e.children("formObject[id]").each(function(e,i){t=$(i),r=t.attr("id"),n[r]={},t.children("formElement[id][object]").each(eachElement)
}),n)}function processForms(){var e,t=new BlinkDispatch(0),r=new $.Deferred,n=new $.Deferred,i=["add","delete","edit","find","list","search","view"],o=function(e,r){var n=new $.Deferred;
return t.add(function(){var t,o,a=$(r),s=a.tag(),u="formXML:"+e+":"+s,c=a.children(),l=c.length,f="";
if(-1!==i.indexOf(a.tag())){for(t=0;l>t;t++)o=_Blink.stringifyDOM(c[t]),o&&(f+=o);
$.when(MyAnswers.store.set(u,f)).fail(function(){warn("processForms()->formActionFn(): failed storing "+u),n.reject()
}).then(function(){MyAnswers.store.set("formLastChecked:"+e+":"+s,$.now()),MyAnswers.isDebug&&log("processForms()->formActionFn(): formXML="+u),n.resolve()
})}else n.resolve()}),n.promise()},a=function(t,r){var n=$(r);"_map"===n.tag()?siteVars.map.forms=processFormsMap(n):n.children().each(function(t,r){e.push(o(n.attr("id"),r))
})};n=window.BlinkForms&&window.BlinkFormObject&&window.BlinkFormElement?!0:$.getCachedScript(siteVars.serverAppPath+"/BlinkForms2.js"),e=[n],MyAnswers.device.persistentStorage&&(e.push(r.promise()),deviceVars.isOnline?$.ajax({url:siteVars.serverAppPath+"/xhr/GetForm.php",dataType:"xml",complete:function(e){var t;
200===e.status&&"string"==typeof e.responseText&&(e.responseText=e.responseText.substring(e.responseText.indexOf("<formObjects>")),t=$($.parseXML(e.responseText)),t.children().children().each(a)),200===e.status||304===e.status?r.resolve():(warn("processForms()->GetForm.XHR: failed "+e.status),r.reject())
},timeout:Math.max(1e3*currentConfig.downloadTimeout,computeTimeout(512e3))}):r.resolve()),$.whenArray(e).fail(MyAnswers.formsDeferred.reject).then(MyAnswers.formsDeferred.resolve)
}function processConfig(){var e,t;MyAnswers.isEmptySpace=!1,MyAnswers.isLoginOnly=!1,log("processConfig(): currentMasterCategory="+currentMasterCategory+" currentCategory="+currentCategory+" currentInteraction="+currentInteraction),"object"===$.type(siteVars.config["a"+siteVars.id])?(t=siteVars.config["a"+siteVars.id].pertinent,e=t.siteStructure,"master categories"===e&&(hasMasterCategories=siteVars.map.masterCategories.length>0),"interactions only"!==e&&(hasCategories=siteVars.map.categories.length>0),hasInteractions=siteVars.map.interactions.length>0,answerSpaceOneKeyword=1===siteVars.map.interactions.length,t.loginAccess&&t.loginUseInteractions&&t.loginPromptInteraction&&t.loginStatusInteraction&&siteVars.config["i"+t.loginPromptInteraction]&&siteVars.config["i"+t.loginStatusInteraction]&&(MyAnswers.isCustomLogin=!0),siteVars.map&&0===siteVars.map.masterCategories.length&&0===siteVars.map.categories.length&&siteVars.map.interactions.length===(MyAnswers.isCustomLogin?2:0)&&(MyAnswers.isEmptySpace=!0),t.loginAccess&&!MyAnswers.isLoggedIn&&("deny anonymous"===t.registeredOnly||MyAnswers.isEmptySpace)&&(MyAnswers.isLoginOnly=!0)):log("processConfig(): unable to retrieve answerSpace config")
}function requestConfig(){var e=($.now(),new $.Deferred),t=MyAnswers.device.persistentStorage,r=siteVars.serverAppPath+"/xhr/GetConfig.php";
return deviceVars.isOnline?($.ajax({url:r+"?_asn="+siteVars.answerSpace,type:"POST",dataType:"json",timeout:computeTimeout(40960),complete:function(r){var n,i,o=["a"+siteVars.id];
200===r.status&&(n=$.parseJSON(r.responseText),"object"===$.type(n.map)&&(siteVars.map=n.map,t&&MyAnswers.siteStore.set("map",JSON.stringify(siteVars.map))),"object"===$.type(n["a"+siteVars.id])&&(i=n["a"+siteVars.id].pertinent.siteStructure),siteVars.map&&("master categories"===i&&siteVars.map.masterCategories.length>0&&(o=o.concat($.map(siteVars.map.masterCategories,function(e){return"m"+e
}))),"interactions only"!==i&&siteVars.map.categories.length>0&&(o=o.concat($.map(siteVars.map.categories,function(e){return"c"+e
}))),siteVars.map.interactions.length>0&&(o=o.concat($.map(siteVars.map.interactions,function(e){return"i"+e
}))))),("object"!==$.type(siteVars.config)||o.length>0)&&(siteVars.config={}),$.each(o,function(e,t){"object"===$.type(n[t])&&(siteVars.config[t]=n[t])
}),t&&MyAnswers.siteStore.set("config",JSON.stringify(siteVars.config)),deviceVars.features=n.deviceFeatures,200===r.status||304===r.status||0===r.status?e.resolve():e.reject()
}}),e.promise()):(e.reject(),e.promise())}function gotoStorageView(){var e,t;if(currentConfig.activeFormsUseInteraction){if(e=siteVars.config["i"+currentConfig.activeFormsInteraction],"object"!==$.type(e))return BMP.alert("Interaction for active forms listing could not be found."),void 0;
t="/"+siteVars.answerSpace+"/"+e.pertinent.name+"/?",History.pushState({i:currentConfig.activeFormsInteraction},null,t)
}else t="/"+siteVars.answerSpace+"/?_storage=true",History.pushState({storage:!0},null,t)
}function showPendingView(){var e=$("#pendingView"),t=$("#pendingBox"),r=t.children("[data-blink-form-version=2]"),n=t.children("[data-blink-form-version=1]"),i=t.children(".bForm-noPending");
$.when(MyAnswers.pendingStore.keys(),MyAnswers.pendingV1Store.keys()).then(function(t,o){var a=(t.length+o.length,function(e,t,r){var n,i=r.data("blinkFormVersion"),o=r.children(".template"),a=o.clone(),s=t.split(":"),u=siteVars.config["i"+s[0]],c=u?u.pertinent.displayName||u.pertinent.name:"* unknown *",l=s[1],f=s[2];
a.children("h3").text(c),a.children("pre.uuid").text(f),a.attr("data-id",t),2===i&&$.when(MyAnswers.pendingStore.get(t)).then(function(e){"string"==typeof e&&0!==e.length&&("object"!==$.type(e)&&(e=$.parseJSON(e)),"array"===$.type(e)&&(n=a.children("dl"),$.each(e[1],function(e,t){n.append("<dt>"+e+"</dt><dd>"+t+"</dd>")
})))}),a.data("interaction",s[0]),a.data("form",l),MyAnswers.dispatch.add(function(){a.appendTo(r),a.show().removeClass("template")
})});MyAnswers.dispatch.add(function(){r.children(".bForm-pending:not(.template)").remove(),t.length>0?($.each(t,function(e,t){a(e,t,r)
}),r.show()):r.hide(),n.children(".bForm-pending:not(.template)").remove(),o.length>0?($.each(o,function(e,t){a(e,t,n)
}),n.show()):n.hide(),o.length+t.length>0?i.hide():i.show()}),MyAnswers.dispatch.add(function(){$.when(MyAnswersDevice.prepareView(e)).always(function(){MyAnswersDevice.showView(e)
})})})}function createParamsAndArgs(e){var t=siteVars.config["i"+e],r="asn="+siteVars.answerSpace+"&iact="+encodeURIComponent(t.pertinent.name),n="",i=$("#argsBox").find("input, textarea, select");
return void 0!==t&&t.pertinent.inputPrompt?(n="",i.each(function(){!this.type||"radio"!==this.type.toLowerCase()&&"checkbox"!==this.type.toLowerCase()||this.checked?this.name?n+="&"+this.name+"="+(this.value?encodeURIComponent(this.value):""):this.id&&this.id.match(/\d+/g)&&(n+="&args["+this.id.match(/\d+/g)+"]="+(this.value?encodeURIComponent(this.value):"")):$.noop()
}),n.length>0?r+=encodeURI(n):1===i.size()&&this.value&&(r+="&args="+encodeURIComponent(this.value)),r):r
}function showAnswerView(e,t,r){log("showAnswerView(): interaction="+e+" args="+t);
var n,i,o=$("#answerView"),a=$("#answerBox"),s=a[0],u=function(){$.when(initialiseAnswerFeatures(o)).always(function(){setMainLabel(currentConfig.displayName||currentConfig.name),MyAnswersDevice.showView(o,r),MyAnswers.dispatch.add(function(){MyAnswers.$body.trigger("taskComplete")
})})},c=MyAnswers.device.persistentStorage,l=!deviceVars.disableXSLT&&c;return e=resolveItemName(e),e===!1?(BMP.alert("The requested Interaction could not be found."),void 0):(MyAnswers.$body.trigger("taskBegun"),$.when(MyAnswersDevice.prepareView(o,r)).always(function(){if(currentInteraction=e,updateCurrentConfig(),"string"==typeof currentConfig.xml&&"stars:"!==currentConfig.xml.substring(0,6)&&"server-hosted"===currentConfig.mojoType&&"pending"!==MyAnswers.dfrdMoJOs.state()&&requestMoJO(currentConfig.xml),"string"==typeof t&&t.length>0?(i={},$.extend(i,deserialize(t))):i="object"===$.type(t)?t:{},currentConfig.inputPrompt&&!t&&($.extend(i,deserialize(createParamsAndArgs(e))),delete i.answerSpace,delete i.interaction),"hyperlink"===currentConfig.type)window.open(currentConfig.hyperlink,currentConfig.hyperlinkTarget);
else if("message"===currentConfig.type)insertHTML(s,currentConfig.message),u();else if("xslt"===currentConfig.type&&l)$.when(MyAnswers.dfrdMoJOs).always(function(){$.when(generateMojoAnswer(i)).always(function(e){insertHTML(s,e),u()
})});else if(r&&c)$.when(MyAnswers.store.get("answer___"+e)).done(function(e){insertHTML(s,e),u()
});else if("form"===currentConfig.type&&currentConfig.blinkFormObjectName&&currentConfig.blinkFormAction)$.when(MyAnswers.dfrdMoJOs,MyAnswers.formsDeferred.promise()).fail(function(){n="<p>Error: forms Interactions are currently unavailable. Reload the application and try again.</p>"
}).then(function(){n=$('<form data-object-name="'+currentConfig.blinkFormObjectName+'" novalidate="novalidate" data-action="'+currentConfig.blinkFormAction+'" />'),n.data(i)
}).always(function(){insertHTML(s,n),u()});else{var o=siteVars.serverAppPath+"/xhr/GetAnswer.php",a={asn:siteVars.answerSpace,iact:currentConfig.name},f=function(){c?$.when(MyAnswers.store.get("answer___"+e)).done(function(e){e===void 0&&(e="<p>Unable to reach server, and unable to display previously stored content.</p>"),insertHTML(s,e),u()
}):(n="<p>Unable to reach server.</p>",insertHTML(s,n),u())},p={},d={},g="GET";$.isEmptyObject(i)||$.extend(a,i),a._submitStarsType&&(g="POST","string"===$.type(a._submitStarsType)&&(a._submitStarsType=[a._submitStarsType]),"array"===$.type(a._submitStarsType)&&$.each(a._submitStarsType,function(e,t){d[t]=starsProfile[t]||{}
}),p[a._submitStarsPost||"stars"]=d,delete a._submitStarsPost,delete a._submitStarsType,o+="?"+$.param(a),a=p),$.ajax({type:g,url:o,data:a,complete:function(t,r){if("timeout"===r)insertHTML(s,"Error: the server has taken too long to respond.  ("+r+" "+t.status+")"),u();
else if(isAJAXError(r)||200!==t.status)f();else{log("GetAnswer: storing server response"),n=t.responseText;
var i,o,a=n.match(/<!-- blinkAnswerMessage:\{.*\} -->/g);if("array"===$.type(a))for(o=a.length,i=0;o>i;i++)processBlinkAnswerMessage(a[i].substring(24,a[i].length-4));
c&&MyAnswers.store.set("answer___"+e,n),insertHTML(s,n),u()}},timeout:Math.max(1e3*currentConfig.downloadTimeout,6e4)})
}}),void 0)}function getAnswer(){var e,t,r,n=resolveItemName(currentInteraction,"interactions");
n&&(t=deserialize(createParamsAndArgs(currentInteraction)),delete t.asn,delete t.iact,r=$.param(t),e="/"+siteVars.answerSpace+"/"+siteVars.config["i"+n].pertinent.name+"/?"+r,History.pushState({m:currentMasterCategory,c:currentCategory,i:n,arguments:t},null,e))
}function showKeywordView(e){var t=$("#keywordView");$.when(MyAnswersDevice.prepareView(t)).always(function(){var r=siteVars.config["i"+e].pertinent,n=$("#argsBox")[0],i=$("#descriptionBox")[0];
currentInteraction=e,updateCurrentConfig(),insertHTML(n,r.inputPrompt),r.description?(insertHTML(i,r.description),$(i).show()):$(i).hide(),MyAnswersDevice.showView(t),setMainLabel(r.displayName||r.name)
})}function goBackToKeywordView(e){var t=$("#keywordView");$.when(MyAnswersDevice.prepareView(t,!0)).always(function(){var r=siteVars.config["i"+e].pertinent;
currentInteraction=e,updateCurrentConfig(),MyAnswersDevice.showView(t,!0),setMainLabel(r.displayName||r.name)
})}function gotoNextScreen(e,t,r){var n;return siteVars.map.interactions.length,log("gotoNextScreen(): "+e),e=resolveItemName(e),e===!1?(BMP.alert("The requested Interaction could not be found."),void 0):(n=siteVars.config["i"+e],hasMasterCategories&&r&&(currentMasterCategory=r),hasCategories&&t&&(currentCategory=t),currentInteraction=e,n.pertinent.inputPrompt?showKeywordView(e):showAnswerView(e),void 0)
}function showSecondLevelAnswerView(e,t){var r,n=resolveItemName(e,"interactions");
log("showSecondLevelAnswerView(): keyword="+e+" args="+t),n&&(r="/"+siteVars.answerSpace+"/"+siteVars.config["i"+n].pertinent.name+"/?"+t,History.pushState({m:currentMasterCategory,c:currentCategory,i:n,arguments:deserialize(t)},null,r))
}function showKeywordListView(e,t){var r,n=$("#keywordListView");currentInteraction=null,currentCategory=e,hasMasterCategories&&t&&(currentMasterCategory=t),log("showKeywordListView(): hasCategories="+hasCategories+" currentCategory="+currentCategory),$.when(MyAnswersDevice.prepareView(n)).always(function(){updateCurrentConfig(),hasCategories?("function"==typeof prepareHistorySideBar&&prepareHistorySideBar(),r=currentConfig.displayName||currentConfig.name):r="Interactions",MyAnswers.populateItemListing("interactions",n),MyAnswersDevice.showView(n),setMainLabel(r)
})}function goBackToKeywordListView(){var e,t,r=$("#keywordListView");return currentInteraction=null,answerSpaceOneKeyword?(showKeywordView(0),void 0):hasMasterCategories&&null===currentMasterCategory?(goBackToMasterCategoriesView(),void 0):hasCategories&&null===currentCategory?(goBackToCategoriesView(hasMasterCategories?currentCategory:null),void 0):(hasCategories?(t=siteVars.config["c"+currentCategory].pertinent,e=t.displayName||t.name):e="Interactions",$.when(MyAnswersDevice.prepareView(r,!0)).always(function(){updateCurrentConfig(),MyAnswersDevice.showView(r,!0),setMainLabel(e)
}),void 0)}function showHelpView(){var e,t=document.getElementById("helpBox"),r=$("#helpView");
$.when(MyAnswersDevice.prepareView(r)).always(function(){switch($(".view:visible").first().attr("id")){case"keywordView":case"answerView":case"answerView2":currentInteraction&&(e=siteVars.config["i"+currentInteraction].pertinent.help||"Sorry, no guidance has been prepared for this item.");
break;default:e=siteVars.config["a"+siteVars.id].pertinent.help||"Sorry, no guidance has been prepared for this item."
}insertHTML(t,e),MyAnswersDevice.showView(r)})}function goBackToTopLevelAnswerView(){var e=$("#answerView");
log("goBackToTopLevelAnswerView()"),$.when(MyAnswersDevice.prepareView(e,!0)).always(function(){MyAnswersDevice.showView(e,!0)
})}function submitFormWithRetry(e){var t,r,n,i,o,a,s=siteVars.serverAppPath+"/xhr/GetAnswer.php?",u=$(".view:visible"),c=u.children(".box").first();
"object"===$.type(e)?(t=e.data,r=e.action.split("/"),n=e.method,i=e.uuid,".."===r[0]?(s+="asn="+siteVars.answerSpace+"&iact="+encodeURIComponent(r[1])+(r[2].length>1?"&"+r[2].substring(1):""),o=r[1]):(s+="asn="+r[1]+"&iact="+encodeURIComponent(r[2]),o=r[2]),"GET"===n?a="&"+t:(n="POST",a=t),MyAnswers.$body.trigger("taskBegun"),$.ajax({type:n,cache:"false",url:s,data:a,complete:function(t,r){var n;
isAJAXError(r)||200!==t.status?n="Unable to contact server. Your submission has been stored for future attempts.  ("+r+" "+t.status+")":(MyAnswers.device.persistentStorage&&clearPendingFormV1(e.interaction,i),n=t.responseText),$.when(MyAnswersDevice.prepareView(u)).always(function(){insertHTML(c[0],n),$.when(initialiseAnswerFeatures(c)).always(function(){MyAnswersDevice.showView(u)
}),MyAnswers.$body.trigger("taskComplete")})},timeout:Math.max(1e3*currentConfig.uploadTimeout,computeTimeout(s.length+a.length))})):log("submitFormWithRetry(): error: no forms in the queue")
}function submitForm(){var e,t="",r=$(".view:visible").find("form").first(),n=r.attr("action"),i=r.attr("method"),o=Math.uuid();
return r.find("input, textarea, select").each(function(e,r){r.name&&(!r.type||"radio"!==r.type.toLowerCase()&&"checkbox"!==r.type.toLowerCase()||r.checked!==!1?r.type&&"button"===r.type.toLowerCase()&&lastPictureTaken.image.size()>0?lastPictureTaken.image.containsKey(r.name)&&(t+="&"+r.name+"="+encodeURIComponent(lastPictureTaken.image.get(r.name))):t+=r.type&&"button"===r.type.toLowerCase()?"Gallery"!==r.value&&"Camera"!==r.value?"&"+r.name+"="+encodeURIComponent(r.value):"&"+r.name+"=":"&"+r.name+"="+encodeURIComponent(r.value):$.noop())
}),log("lastPictureTaken.image.size() = "+lastPictureTaken.image.size()),lastPictureTaken.image.clear(),log("submitForm(2): "+document.forms[0].action),e={data:t,action:n,method:"string"===$.type(i)?i.toUpperCase():"post",uuid:o,interaction:currentInteraction},MyAnswers.device.persistentStorage?$.when(pushPendingFormV1(currentInteraction,o,e)).fail(function(){BMP.alert("Error: unable to feed submission through queue.")
}).then(submitFormWithRetry):submitFormWithRetry(e),!1}function submitAction(e,t){log("submitAction(): keyword="+e+" action="+t);
var r,n,i,o=$(".view:visible,"),a=o.children(".box"),s=a.find("form").first(),u=s.find("input[type=submit]"),c=s.find("input[name=blink_session_data]"),l="cancel=Cancel"===t?"":s.find("input, textarea, select").serialize(),f=s.attr("method");
return 1===u.length&&u.attr("name")&&u.val()&&(l+="&"+u.attr("name")+"="+u.val()),1!==c.size()||$.isEmptyObject(starsProfile)||(i='{"stars":'+JSON.stringify(starsProfile)+"}",l=l.replace("blink_session_data=","blink_session_data="+encodeURIComponent(i)),f="post"),"string"===$.type(f)&&"get"===f.toLowerCase()?(f="GET",n=siteVars.serverAppPath+"/xhr/GetAnswer.php?asn="+siteVars.answerSpace+"&iact="+e,r="&"+l+("string"==typeof t&&t.length>0?"&"+t:"")):(f="POST",n=siteVars.serverAppPath+"/xhr/GetAnswer.php?asn="+siteVars.answerSpace+"&iact="+e+("string"==typeof t&&t.length>0?"&"+t:""),r=l),MyAnswers.$body.trigger("taskBegun"),$.ajax({type:f,cache:"false",url:n,data:r,complete:function(e,t){var r,n,i,s;
if(r=isAJAXError(t)||200!==e.status?"Unable to contact server.":e.responseText,s=r.match(/<!-- blinkAnswerMessage:\{.*\} -->/g),"array"===$.type(s))for(i=s.length,n=0;i>n;n++)processBlinkAnswerMessage(s[n].substring(24,s[n].length-4));
$.when(MyAnswersDevice.prepareView(o)).always(function(){insertHTML(a[0],r),$.when(initialiseAnswerFeatures(a)).always(function(){MyAnswersDevice.showView(o)
}),MyAnswers.$body.trigger("taskComplete")})},timeout:Math.max(1e3*currentConfig.downloadTimeout,computeTimeout(n.length+r.length))}),!1
}window.JSON||(window.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];
return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'
}function str(e,t){var r,n,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);
case"number":return isFinite(u)?u+"":"null";case"boolean":case"null":return u+"";
case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,r=0;o>r;r+=1)a[r]=str(r,u)||"null";
return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i
}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;o>r;r+=1)n=rep[r],"string"==typeof n&&(i=str(n,u),i&&a.push(quote(n)+(gap?": ":":")+i));
else for(n in u)Object.hasOwnProperty.call(u,n)&&(i=str(n,u),i&&a.push(quote(n)+(gap?": ":":")+i));
return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i
}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()
});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;
"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;r>n;n+=1)indent+=" ";
else"string"==typeof r&&(indent=r);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});
throw Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,i=e[t];
if(i&&"object"==typeof i)for(r in i)Object.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);
return reviver.call(e,t,i)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)
})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;
throw new SyntaxError("JSON.parse")})}(),function(e,t){"use strict";var r=e.History=e.History||{},n=e.jQuery;
if(r.Adapter!==void 0)throw Error("History.js Adapter has already been loaded...");
r.Adapter={bind:function(e,t,r){n(e).bind(t,r)},trigger:function(e,t,r){n(e).trigger(t,r)
},extractEventData:function(e,r,n){var i=r&&r.originalEvent&&r.originalEvent[e]||n&&n[e]||t;
return i},onDomLoad:function(e){n(e)}},r.init!==void 0&&r.init()}(window),function(e){"use strict";
var t=e.document,r=e.setTimeout||r,n=e.clearTimeout||n,i=e.setInterval||i,o=e.History=e.History||{};
if(o.initHtml4!==void 0)throw Error("History.js HTML4 Support has already been loaded...");
o.initHtml4=function(){return o.initHtml4.initialized!==void 0?!1:(o.initHtml4.initialized=!0,o.enabled=!0,o.savedHashes=[],o.isLastHash=function(e){var t,r=o.getHashByIndex();
return t=e===r},o.saveHash=function(e){return o.isLastHash(e)?!1:(o.savedHashes.push(e),!0)
},o.getHashByIndex=function(e){var t=null;return t=e===void 0?o.savedHashes[o.savedHashes.length-1]:0>e?o.savedHashes[o.savedHashes.length+e]:o.savedHashes[e]
},o.discardedHashes={},o.discardedStates={},o.discardState=function(e,t,r){var n,i=o.getHashByState(e);
return n={discardedState:e,backState:r,forwardState:t},o.discardedStates[i]=n,!0},o.discardHash=function(e,t,r){var n={discardedHash:e,backState:r,forwardState:t};
return o.discardedHashes[e]=n,!0},o.discardedState=function(e){var t,r=o.getHashByState(e);
return t=o.discardedStates[r]||!1},o.discardedHash=function(e){var t=o.discardedHashes[e]||!1;
return t},o.recycleState=function(e){var t=o.getHashByState(e);return o.discardedState(e)&&delete o.discardedStates[t],!0
},o.emulated.hashChange&&(o.hashChangeInit=function(){o.checkerFunction=null;var r,n,a,s,u="";
return o.isInternetExplorer()?(r="historyjs-iframe",n=t.createElement("iframe"),n.setAttribute("id",r),n.style.display="none",t.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),a="",s=!1,o.checkerFunction=function(){if(s)return!1;
s=!0;var t=o.getHash()||"",r=o.unescapeHash(n.contentWindow.document.location.hash)||"";
return t!==u?(u=t,r!==t&&(a=r=t,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=o.escapeHash(t)),o.Adapter.trigger(e,"hashchange")):r!==a&&(a=r,o.setHash(r,!1)),s=!1,!0
}):o.checkerFunction=function(){var t=o.getHash();return t!==u&&(u=t,o.Adapter.trigger(e,"hashchange")),!0
},o.intervalList.push(i(o.checkerFunction,o.options.hashChangeInterval)),!0},o.Adapter.onDomLoad(o.hashChangeInit)),o.emulated.pushState&&(o.onHashChange=function(r){var n,i=r&&r.newURL||t.location.href,a=o.getHashByUrl(i),s=null,u=null;
return o.isLastHash(a)?(o.busy(!1),!1):(o.doubleCheckComplete(),o.saveHash(a),a&&o.isTraditionalAnchor(a)?(o.Adapter.trigger(e,"anchorchange"),o.busy(!1),!1):(s=o.extractState(o.getFullUrl(a||t.location.href,!1),!0),o.isLastSavedState(s)?(o.busy(!1),!1):(u=o.getHashByState(s),n=o.discardedState(s),n?(o.getHashByIndex(-2)===o.getHashByState(n.forwardState)?o.back(!1):o.forward(!1),!1):(o.pushState(s.data,s.title,s.url,!1),!0))))
},o.Adapter.bind(e,"hashchange",o.onHashChange),o.pushState=function(r,n,i,a){if(o.getHashByUrl(i))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(a!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.pushState,args:arguments,queue:a}),!1;
o.busy(!0);var s=o.createStateObject(r,n,i),u=o.getHashByState(s),c=o.getState(!1),l=o.getHashByState(c),f=o.getHash();
return o.storeState(s),o.expectedStateId=s.id,o.recycleState(s),o.setTitle(s),u===l?(o.busy(!1),!1):u!==f&&u!==o.getShortUrl(t.location.href)?(o.setHash(u,!1),!1):(o.saveState(s),o.Adapter.trigger(e,"statechange"),o.busy(!1),!0)
},o.replaceState=function(e,t,r,n){if(o.getHashByUrl(r))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(n!==!1&&o.busy())return o.pushQueue({scope:o,callback:o.replaceState,args:arguments,queue:n}),!1;
o.busy(!0);var i=o.createStateObject(e,t,r),a=o.getState(!1),s=o.getStateByIndex(-2);
return o.discardState(a,i,s),o.pushState(i.data,i.title,i.url,!1),!0}),o.emulated.pushState&&o.getHash()&&!o.emulated.hashChange&&o.Adapter.onDomLoad(function(){o.Adapter.trigger(e,"hashchange")
}),void 0)},o.init!==void 0&&o.init()}(window),function(e,t){"use strict";var r=e.console||t,n=e.document,i=e.navigator,o=e.sessionStorage||!1,a=e.setTimeout,s=e.clearTimeout,u=e.setInterval,c=e.clearInterval,l=e.JSON,f=e.alert,p=e.History=e.History||{},d=e.history;
if(l.stringify=l.stringify||l.encode,l.parse=l.parse||l.decode,p.init!==void 0)throw Error("History.js Core has already been loaded...");
p.init=function(){return p.Adapter===void 0?!1:(p.initCore!==void 0&&p.initCore(),p.initHtml4!==void 0&&p.initHtml4(),!0)
},p.initCore=function(){if(p.initCore.initialized!==void 0)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||n.title,p.intervalList=[],p.clearAllIntervals=function(){var e,t=p.intervalList;
if(t!==void 0&&null!==t){for(e=0;t.length>e;e++)c(t[e]);p.intervalList=null}},p.debug=function(){(p.options.debug||!1)&&p.log.apply(p,arguments)
},p.log=function(){var e,t,i,o,a,s=r!==void 0&&r.log!==void 0&&r.log.apply!==void 0,u=n.getElementById("log");
for(s?(o=Array.prototype.slice.call(arguments),e=o.shift(),r.debug!==void 0?r.debug.apply(r,[e,o]):r.log.apply(r,[e,o])):e="\n"+arguments[0]+"\n",t=1,i=arguments.length;i>t;++t){if(a=arguments[t],"object"==typeof a&&l!==void 0)try{a=l.stringify(a)
}catch(c){}e+="\n"+a+"\n"}return u?(u.value+=e+"\n-----\n",u.scrollTop=u.scrollHeight-u.clientHeight):s||f(e),!0
},p.getInternetExplorerMajorVersion=function(){var e=p.getInternetExplorerMajorVersion.cached=p.getInternetExplorerMajorVersion.cached!==void 0?p.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=n.createElement("div"),r=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&r[0];);return e>4?e:!1
}();return e},p.isInternetExplorer=function(){var e=p.isInternetExplorer.cached=p.isInternetExplorer.cached!==void 0?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());
return e},p.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in n)||p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion())},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&8>p.getInternetExplorerMajorVersion()),hashEscape:Boolean(p.isInternetExplorer()&&7>p.getInternetExplorerMajorVersion())},p.isEmptyObject=function(e){for(var t in e)return!1;
return!0},p.cloneObject=function(e){var t,r;return e?(t=l.stringify(e),r=l.parse(t)):r={},r
},p.getRootUrl=function(){var e=n.location.protocol+"//"+(n.location.hostname||n.location.host);
return n.location.port&&(e+=":"+n.location.port),e+="/"},p.getBaseHref=function(){var e=n.getElementsByTagName("base"),t=null,r="";
return 1===e.length&&(t=e[0],r=t.href.replace(/[^\/]+$/,"")),r=r.replace(/\/+$/,""),r&&(r+="/"),r
},p.getBaseUrl=function(){var e=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();
return e},p.getPageUrl=function(){var e,t=p.getState(!1,!1),r=(t||{}).url||n.location.href;
return e=r.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"
})},p.getBasePageUrl=function(){var e=n.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e
}).replace(/\/+$/,"")+"/";return e},p.getFullUrl=function(e,t){var r=e,n=e.substring(0,1);
return t=t===void 0?!0:t,/[a-z]+\:\/\//.test(e)||(r="/"===n?p.getRootUrl()+e.replace(/^\/+/,""):"#"===n?p.getPageUrl().replace(/#.*/,"")+e:"?"===n?p.getPageUrl().replace(/[\?#].*/,"")+e:t?p.getBaseUrl()+e.replace(/^(\.\/)+/,""):p.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),r.replace(/\#$/,"")
},p.getShortUrl=function(e){var t=e,r=p.getBaseUrl(),n=p.getRootUrl();return p.emulated.pushState&&(t=t.replace(r,"")),t=t.replace(n,"/"),p.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")
},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}
},p.getState=function(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);var r=p.getLastSavedState();
return!r&&t&&(r=p.createStateObject()),e&&(r=p.cloneObject(r),r.url=r.cleanUrl||r.url),r
},p.getIdByState=function(e){var t,r=p.extractId(e.url);if(!r)if(t=p.getStateString(e),p.stateToId[t]!==void 0)r=p.stateToId[t];
else if(p.store.stateToId[t]!==void 0)r=p.store.stateToId[t];else{for(;r=(new Date).getTime()+(Math.random()+"").replace(/\D/g,""),p.idToState[r]!==void 0||p.store.idToState[r]!==void 0;);p.stateToId[t]=r,p.idToState[r]=e
}return r},p.normalizeState=function(e){var t,r;return e&&"object"==typeof e||(e={}),e.normalized!==void 0?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=p.getFullUrl(p.unescapeString(e.url||n.location.href)),t.hash=p.getShortUrl(t.url),t.data=p.cloneObject(e.data),t.id=p.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,r=!p.isEmptyObject(t.data),(t.title||r)&&(t.hash=p.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=p.getFullUrl(t.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)
},p.createStateObject=function(e,t,r){var n={data:e,title:t,url:r};return n=p.normalizeState(n)
},p.getStateById=function(e){e+="";var r=p.idToState[e]||p.store.idToState[e]||t;
return r},p.getStateString=function(e){var t,r,n;return t=p.normalizeState(e),r={data:t.data,title:e.title,url:e.url},n=l.stringify(r)
},p.getStateId=function(e){var t,r;return t=p.normalizeState(e),r=t.id},p.getHashByState=function(e){var t,r;
return t=p.normalizeState(e),r=t.hash},p.extractId=function(e){var t,r,n;return r=/(.*)\&_suid=([0-9]+)$/.exec(e),n=r?r[1]||e:e,t=r?(r[2]||"")+"":"",t||!1
},p.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},p.extractState=function(e,t){var r,n,i=null;
return t=t||!1,r=p.extractId(e),r&&(i=p.getStateById(r)),i||(n=p.getFullUrl(e),r=p.getIdByUrl(n)||!1,r&&(i=p.getStateById(r)),!i&&t&&!p.isTraditionalAnchor(e)&&(i=p.createStateObject(null,null,n))),i
},p.getIdByUrl=function(e){var r=p.urlToId[e]||p.store.urlToId[e]||t;return r},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||t
},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||t
},p.hasUrlDuplicate=function(e){var t,r=!1;return t=p.extractState(e.url),r=t&&t.id!==e.id
},p.storeState=function(e){return p.urlToId[e.url]=e.id,p.storedStates.push(p.cloneObject(e)),e
},p.isLastSavedState=function(e){var t,r,n,i=!1;return p.savedStates.length&&(t=e.id,r=p.getLastSavedState(),n=r.id,i=t===n),i
},p.saveState=function(e){return p.isLastSavedState(e)?!1:(p.savedStates.push(p.cloneObject(e)),!0)
},p.getStateByIndex=function(e){var t=null;return t=e===void 0?p.savedStates[p.savedStates.length-1]:0>e?p.savedStates[p.savedStates.length+e]:p.savedStates[e]
},p.getHash=function(){var e=p.unescapeHash(n.location.hash);return e},p.unescapeString=function(t){for(var r,n=t;r=e.unescape(n),r!==n;)n=r;
return n},p.unescapeHash=function(e){var t=p.normalizeHash(e);return t=p.unescapeString(t)
},p.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t
},p.setHash=function(e,t){var r,i,o;return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:t}),!1):(r=p.escapeHash(e),p.busy(!0),i=p.extractState(e,!0),i&&!p.emulated.pushState?p.pushState(i.data,i.title,i.url,!1):n.location.hash!==r&&(p.bugs.setHash?(o=p.getPageUrl(),p.pushState(null,null,o+"#"+r,!1)):n.location.hash=r),p)
},p.escapeHash=function(t){var r=p.normalizeHash(t);return r=e.escape(r),p.bugs.hashEscape||(r=r.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),r
},p.getHashByUrl=function(e){var t=(e+"").replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");
return t=p.unescapeHash(t)},p.setTitle=function(e){var t,r=e.title;r||(t=p.getStateByIndex(0),t&&t.url===e.url&&(r=t.title||p.options.initialTitle));
try{n.getElementsByTagName("title")[0].innerHTML=r.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")
}catch(i){}return n.title=r,p},p.queues=[],p.busy=function(e){if(e!==void 0?p.busy.flag=e:p.busy.flag===void 0&&(p.busy.flag=!1),!p.busy.flag){s(p.busy.timeout);
var t=function(){var e,r,n;if(!p.busy.flag)for(e=p.queues.length-1;e>=0;--e)r=p.queues[e],0!==r.length&&(n=r.shift(),p.fireQueueItem(n),p.busy.timeout=a(t,p.options.busyDelay))
};p.busy.timeout=a(t,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(e){return e.callback.apply(e.scope||p,e.args||[])
},p.pushQueue=function(e){return p.queues[e.queue||0]=p.queues[e.queue||0]||[],p.queues[e.queue||0].push(e),p
},p.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),t!==void 0&&(e.queue=t),p.busy()?p.pushQueue(e):p.fireQueueItem(e),p
},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p
},p.doubleCheckClear=function(){return p.doubleChecker&&(s(p.doubleChecker),p.doubleChecker=!1),p
},p.doubleCheck=function(e){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=a(function(){return p.doubleCheckClear(),p.stateChanged||e(),!0
},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,r=p.extractState(n.location.href);
if(!p.isLastSavedState(r))return t=r,t||(t=p.createStateObject()),p.Adapter.trigger(e,"popstate"),p
},p.back=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)
}),d.go(-1),!0)},p.forward=function(e){return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:e}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)
}),d.go(1),!0)},p.go=function(e,t){var r;if(e>0)for(r=1;e>=r;++r)p.forward(t);else{if(!(0>e))throw Error("History.go: History.go requires a positive or negative integer passed.");
for(r=-1;r>=e;--r)p.back(t)}return p},p.emulated.pushState){var g=function(){};p.pushState=p.pushState||g,p.replaceState=p.replaceState||g
}else p.onPopState=function(t,r){var i,o,a=!1,s=!1;return p.doubleCheckComplete(),i=p.getHash(),i?(o=p.extractState(i||n.location.href,!0),o?p.replaceState(o.data,o.title,o.url,!1):(p.Adapter.trigger(e,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(a=p.Adapter.extractEventData("state",t,r)||!1,s=a?p.getStateById(a):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(n.location.href),s||(s=p.createStateObject(null,null,n.location.href)),p.expectedStateId=!1,p.isLastSavedState(s)?(p.busy(!1),!1):(p.storeState(s),p.saveState(s),p.setTitle(s),p.Adapter.trigger(e,"statechange"),p.busy(!1),!0))
},p.Adapter.bind(e,"popstate",p.onPopState),p.pushState=function(t,r,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:i}),!1;
p.busy(!0);var o=p.createStateObject(t,r,n);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,d.pushState(o.id,o.title,o.url),p.Adapter.trigger(e,"popstate")),!0
},p.replaceState=function(t,r,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:i}),!1;
p.busy(!0);var o=p.createStateObject(t,r,n);return p.isLastSavedState(o)?p.busy(!1):(p.storeState(o),p.expectedStateId=o.id,d.replaceState(o.id,o.title,o.url),p.Adapter.trigger(e,"popstate")),!0
};if(o){try{p.store=l.parse(o.getItem("History.store"))||{}}catch(h){p.store={}}p.normalizeStore()
}else p.store={},p.normalizeStore();p.Adapter.bind(e,"beforeunload",p.clearAllIntervals),p.Adapter.bind(e,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(n.location.href,!0))),o&&(p.onUnload=function(){var e,t;
try{e=l.parse(o.getItem("History.store"))||{}}catch(r){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};
for(t in p.idToState)p.idToState.hasOwnProperty(t)&&(e.idToState[t]=p.idToState[t]);
for(t in p.urlToId)p.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=p.urlToId[t]);for(t in p.stateToId)p.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=p.stateToId[t]);
p.store=e,p.normalizeStore(),o.setItem("History.store",l.stringify(e))},p.intervalList.push(u(p.onUnload,p.options.storeInterval)),p.Adapter.bind(e,"beforeunload",p.onUnload),p.Adapter.bind(e,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(u(p.safariStatePoll,p.options.safariPollInterval)),("Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||""))&&(p.Adapter.bind(e,"hashchange",function(){p.Adapter.trigger(e,"popstate")
}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(e,"hashchange")})))
},p.init()}(window),function(){var e=this,t=e._,r={},n=Array.prototype,i=Object.prototype,o=Function.prototype,a=n.push,s=n.slice,u=n.concat,c=i.toString,l=i.hasOwnProperty,f=n.forEach,p=n.map,d=n.reduce,g=n.reduceRight,h=n.filter,y=n.every,m=n.some,v=n.indexOf,w=n.lastIndexOf,b=Array.isArray,S=Object.keys,C=o.bind,A=function(e){return e instanceof A?e:this instanceof A?(this._wrapped=e,void 0):new A(e)
};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):e._=A,A.VERSION="1.4.4";
var T=A.each=A.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);
else if(e.length===+e.length){for(var i=0,o=e.length;o>i;i++)if(t.call(n,e[i],i,e)===r)return
}else for(var a in e)if(A.has(e,a)&&t.call(n,e[a],a,e)===r)return};A.map=A.collect=function(e,t,r){var n=[];
return null==e?n:p&&e.map===p?e.map(t,r):(T(e,function(e,i,o){n[n.length]=t.call(r,e,i,o)
}),n)};var M="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(e,t,r,n){var i=arguments.length>2;
if(null==e&&(e=[]),d&&e.reduce===d)return n&&(t=A.bind(t,n)),i?e.reduce(t,r):e.reduce(t);
if(T(e,function(e,o,a){i?r=t.call(n,r,e,o,a):(r=e,i=!0)}),!i)throw new TypeError(M);
return r},A.reduceRight=A.foldr=function(e,t,r,n){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return n&&(t=A.bind(t,n)),i?e.reduceRight(t,r):e.reduceRight(t);
var o=e.length;if(o!==+o){var a=A.keys(e);o=a.length}if(T(e,function(s,u,c){u=a?a[--o]:--o,i?r=t.call(n,r,e[u],u,c):(r=e[u],i=!0)
}),!i)throw new TypeError(M);return r},A.find=A.detect=function(e,t,r){var n;return _(e,function(e,i,o){return t.call(r,e,i,o)?(n=e,!0):void 0
}),n},A.filter=A.select=function(e,t,r){var n=[];return null==e?n:h&&e.filter===h?e.filter(t,r):(T(e,function(e,i,o){t.call(r,e,i,o)&&(n[n.length]=e)
}),n)},A.reject=function(e,t,r){return A.filter(e,function(e,n,i){return!t.call(r,e,n,i)
},r)},A.every=A.all=function(e,t,n){t||(t=A.identity);var i=!0;return null==e?i:y&&e.every===y?e.every(t,n):(T(e,function(e,o,a){return(i=i&&t.call(n,e,o,a))?void 0:r
}),!!i)};var _=A.some=A.any=function(e,t,n){t||(t=A.identity);var i=!1;return null==e?i:m&&e.some===m?e.some(t,n):(T(e,function(e,o,a){return i||(i=t.call(n,e,o,a))?r:void 0
}),!!i)};A.contains=A.include=function(e,t){return null==e?!1:v&&e.indexOf===v?-1!=e.indexOf(t):_(e,function(e){return e===t
})},A.invoke=function(e,t){var r=s.call(arguments,2),n=A.isFunction(t);return A.map(e,function(e){return(n?t:e[t]).apply(e,r)
})},A.pluck=function(e,t){return A.map(e,function(e){return e[t]})},A.where=function(e,t,r){return A.isEmpty(t)?r?null:[]:A[r?"find":"filter"](e,function(e){for(var r in t)if(t[r]!==e[r])return!1;
return!0})},A.findWhere=function(e,t){return A.where(e,t,!0)},A.max=function(e,t,r){if(!t&&A.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);
if(!t&&A.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return T(e,function(e,i,o){var a=t?t.call(r,e,i,o):e;
a>=n.computed&&(n={value:e,computed:a})}),n.value},A.min=function(e,t,r){if(!t&&A.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);
if(!t&&A.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return T(e,function(e,i,o){var a=t?t.call(r,e,i,o):e;
n.computed>a&&(n={value:e,computed:a})}),n.value},A.shuffle=function(e){var t,r=0,n=[];
return T(e,function(e){t=A.random(r++),n[r-1]=n[t],n[t]=e}),n};var E=function(e){return A.isFunction(e)?e:function(t){return t[e]
}};A.sortBy=function(e,t,r){var n=E(t);return A.pluck(A.map(e,function(e,t,i){return{value:e,index:t,criteria:n.call(r,e,t,i)}
}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;
if(n>r||void 0===n)return-1}return e.index<t.index?-1:1}),"value")};var k=function(e,t,r,n){var i={},o=E(t||A.identity);
return T(e,function(t,a){var s=o.call(r,t,a,e);n(i,s,t)}),i};A.groupBy=function(e,t,r){return k(e,t,r,function(e,t,r){(A.has(e,t)?e[t]:e[t]=[]).push(r)
})},A.countBy=function(e,t,r){return k(e,t,r,function(e,t){A.has(e,t)||(e[t]=0),e[t]++
})},A.sortedIndex=function(e,t,r,n){r=null==r?A.identity:E(r);for(var i=r.call(n,t),o=0,a=e.length;a>o;){var s=o+a>>>1;
i>r.call(n,e[s])?o=s+1:a=s}return o},A.toArray=function(e){return e?A.isArray(e)?s.call(e):e.length===+e.length?A.map(e,A.identity):A.values(e):[]
},A.size=function(e){return null==e?0:e.length===+e.length?e.length:A.keys(e).length
},A.first=A.head=A.take=function(e,t,r){return null==e?void 0:null==t||r?e[0]:s.call(e,0,t)
},A.initial=function(e,t,r){return s.call(e,0,e.length-(null==t||r?1:t))},A.last=function(e,t,r){return null==e?void 0:null==t||r?e[e.length-1]:s.call(e,Math.max(e.length-t,0))
},A.rest=A.tail=A.drop=function(e,t,r){return s.call(e,null==t||r?1:t)},A.compact=function(e){return A.filter(e,A.identity)
};var x=function(e,t,r){return T(e,function(e){A.isArray(e)?t?a.apply(r,e):x(e,t,r):r.push(e)
}),r};A.flatten=function(e,t){return x(e,t,[])},A.without=function(e){return A.difference(e,s.call(arguments,1))
},A.uniq=A.unique=function(e,t,r,n){A.isFunction(t)&&(n=r,r=t,t=!1);var i=r?A.map(e,r,n):e,o=[],a=[];
return T(i,function(r,n){(t?n&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),o.push(e[n]))
}),o},A.union=function(){return A.uniq(u.apply(n,arguments))},A.intersection=function(e){var t=s.call(arguments,1);
return A.filter(A.uniq(e),function(e){return A.every(t,function(t){return A.indexOf(t,e)>=0
})})},A.difference=function(e){var t=u.apply(n,s.call(arguments,1));return A.filter(e,function(e){return!A.contains(t,e)
})},A.zip=function(){for(var e=s.call(arguments),t=A.max(A.pluck(e,"length")),r=Array(t),n=0;t>n;n++)r[n]=A.pluck(e,""+n);
return r},A.object=function(e,t){if(null==e)return{};for(var r={},n=0,i=e.length;i>n;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];
return r},A.indexOf=function(e,t,r){if(null==e)return-1;var n=0,i=e.length;if(r){if("number"!=typeof r)return n=A.sortedIndex(e,t),e[n]===t?n:-1;
n=0>r?Math.max(0,i+r):r}if(v&&e.indexOf===v)return e.indexOf(t,r);for(;i>n;n++)if(e[n]===t)return n;
return-1},A.lastIndexOf=function(e,t,r){if(null==e)return-1;var n=null!=r;if(w&&e.lastIndexOf===w)return n?e.lastIndexOf(t,r):e.lastIndexOf(t);
for(var i=n?r:e.length;i--;)if(e[i]===t)return i;return-1},A.range=function(e,t,r){1>=arguments.length&&(t=e||0,e=0),r=arguments[2]||1;
for(var n=Math.max(Math.ceil((t-e)/r),0),i=0,o=Array(n);n>i;)o[i++]=e,e+=r;return o
},A.bind=function(e,t){if(e.bind===C&&C)return C.apply(e,s.call(arguments,1));var r=s.call(arguments,2);
return function(){return e.apply(t,r.concat(s.call(arguments)))}},A.partial=function(e){var t=s.call(arguments,1);
return function(){return e.apply(this,t.concat(s.call(arguments)))}},A.bindAll=function(e){var t=s.call(arguments,1);
return 0===t.length&&(t=A.functions(e)),T(t,function(t){e[t]=A.bind(e[t],e)}),e},A.memoize=function(e,t){var r={};
return t||(t=A.identity),function(){var n=t.apply(this,arguments);return A.has(r,n)?r[n]:r[n]=e.apply(this,arguments)
}},A.delay=function(e,t){var r=s.call(arguments,2);return setTimeout(function(){return e.apply(null,r)
},t)},A.defer=function(e){return A.delay.apply(A,[e,1].concat(s.call(arguments,1)))
},A.throttle=function(e,t){var r,n,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(r,n)
};return function(){var u=new Date,c=t-(u-a);return r=this,n=arguments,0>=c?(clearTimeout(i),i=null,a=u,o=e.apply(r,n)):i||(i=setTimeout(s,c)),o
}},A.debounce=function(e,t,r){var n,i;return function(){var o=this,a=arguments,s=function(){n=null,r||(i=e.apply(o,a))
},u=r&&!n;return clearTimeout(n),n=setTimeout(s,t),u&&(i=e.apply(o,a)),i}},A.once=function(e){var t,r=!1;
return function(){return r?t:(r=!0,t=e.apply(this,arguments),e=null,t)}},A.wrap=function(e,t){return function(){var r=[e];
return a.apply(r,arguments),t.apply(this,r)}},A.compose=function(){var e=arguments;
return function(){for(var t=arguments,r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];
return t[0]}},A.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0
}},A.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];
for(var r in e)A.has(e,r)&&(t[t.length]=r);return t},A.values=function(e){var t=[];
for(var r in e)A.has(e,r)&&t.push(e[r]);return t},A.pairs=function(e){var t=[];for(var r in e)A.has(e,r)&&t.push([r,e[r]]);
return t},A.invert=function(e){var t={};for(var r in e)A.has(e,r)&&(t[e[r]]=r);return t
},A.functions=A.methods=function(e){var t=[];for(var r in e)A.isFunction(e[r])&&t.push(r);
return t.sort()},A.extend=function(e){return T(s.call(arguments,1),function(t){if(t)for(var r in t)e[r]=t[r]
}),e},A.pick=function(e){var t={},r=u.apply(n,s.call(arguments,1));return T(r,function(r){r in e&&(t[r]=e[r])
}),t},A.omit=function(e){var t={},r=u.apply(n,s.call(arguments,1));for(var i in e)A.contains(r,i)||(t[i]=e[i]);
return t},A.defaults=function(e){return T(s.call(arguments,1),function(t){if(t)for(var r in t)null==e[r]&&(e[r]=t[r])
}),e},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e
},A.tap=function(e,t){return t(e),e};var j=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;
if(null==e||null==t)return e===t;e instanceof A&&(e=e._wrapped),t instanceof A&&(t=t._wrapped);
var i=c.call(e);if(i!=c.call(t))return!1;switch(i){case"[object String]":return e==t+"";
case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;
case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase
}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=r.length;o--;)if(r[o]==e)return n[o]==t;
r.push(e),n.push(t);var a=0,s=!0;if("[object Array]"==i){if(a=e.length,s=a==t.length)for(;a--&&(s=j(e[a],t[a],r,n)););}else{var u=e.constructor,l=t.constructor;
if(u!==l&&!(A.isFunction(u)&&u instanceof u&&A.isFunction(l)&&l instanceof l))return!1;
for(var f in e)if(A.has(e,f)&&(a++,!(s=A.has(t,f)&&j(e[f],t[f],r,n))))break;if(s){for(f in t)if(A.has(t,f)&&!a--)break;
s=!a}}return r.pop(),n.pop(),s};A.isEqual=function(e,t){return j(e,t,[],[])},A.isEmpty=function(e){if(null==e)return!0;
if(A.isArray(e)||A.isString(e))return 0===e.length;for(var t in e)if(A.has(e,t))return!1;
return!0},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=b||function(e){return"[object Array]"==c.call(e)
},A.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){A["is"+e]=function(t){return c.call(t)=="[object "+e+"]"
}}),A.isArguments(arguments)||(A.isArguments=function(e){return!(!e||!A.has(e,"callee"))
}),A.isFunction=function(e){return"function"==typeof e},A.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))
},A.isNaN=function(e){return A.isNumber(e)&&e!=+e},A.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)
},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e
},A.has=function(e,t){return l.call(e,t)},A.noConflict=function(){return e._=t,this
},A.identity=function(e){return e},A.times=function(e,t,r){for(var n=Array(e),i=0;e>i;i++)n[i]=t.call(r,i);
return n},A.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))
};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};
I.unescape=A.invert(I.escape);var L={escape:RegExp("["+A.keys(I.escape).join("")+"]","g"),unescape:RegExp("("+A.keys(I.unescape).join("|")+")","g")};
A.each(["escape","unescape"],function(e){A[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return I[e][t]
})}}),A.result=function(e,t){if(null==e)return null;var r=e[t];return A.isFunction(r)?r.call(e):r
},A.mixin=function(e){T(A.functions(e),function(t){var r=A[t]=e[t];A.prototype[t]=function(){var e=[this._wrapped];
return a.apply(e,arguments),D.call(this,r.apply(A,e))}})};var O=0;A.uniqueId=function(e){var t=++O+"";
return e?e+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};
var P=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\t|\u2028|\u2029/g;
A.template=function(e,t,r){var n;r=A.defaults({},r,A.templateSettings);var i=RegExp([(r.escape||P).source,(r.interpolate||P).source,(r.evaluate||P).source].join("|")+"|$","g"),o=0,a="__p+='";
e.replace(i,function(t,r,n,i,s){return a+=e.slice(o,s).replace($,function(e){return"\\"+B[e]
}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),n&&(a+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t
}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";
try{n=Function(r.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return n(t,A);
var u=function(e){return n.call(this,e,A)};return u.source="function("+(r.variable||"obj")+"){\n"+a+"}",u
},A.chain=function(e){return A(e).chain()};var D=function(e){return this._chain?A(e).chain():e
};A.mixin(A),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];
A.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=e&&"splice"!=e||0!==r.length||delete r[0],D.call(this,r)
}}),T(["concat","join","slice"],function(e){var t=n[e];A.prototype[e]=function(){return D.call(this,t.apply(this._wrapped,arguments))
}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped
}})}.call(this),function(e){"function"==typeof define?define(e):"function"==typeof YUI?YUI.add("es5",e):e()
}(function(){function e(){}function t(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e
}function r(e){var t=typeof e;return null===e||"undefined"===t||"boolean"===t||"number"===t||"string"===t
}function n(e){var t,n,i;if(r(e))return e;if(n=e.valueOf,"function"==typeof n&&(t=n.call(e),r(t)))return t;
if(i=e.toString,"function"==typeof i&&(t=i.call(e),r(t)))return t;throw new TypeError
}Function.prototype.bind||(Function.prototype.bind=function(t){var r=this;if("function"!=typeof r)throw new TypeError("Function.prototype.bind called on incompatible "+r);
var n=p.call(arguments,1),i=function(){if(this instanceof i){var e=r.apply(this,n.concat(p.call(arguments)));
return Object(e)===e?e:this}return r.apply(t,n.concat(p.call(arguments)))};return r.prototype&&(e.prototype=r.prototype,i.prototype=new e,e.prototype=null),i
});var i,o,a,s,u,c=Function.prototype.call,l=Array.prototype,f=Object.prototype,p=l.slice,d=c.bind(f.toString),g=c.bind(f.hasOwnProperty);
if((u=g(f,"__defineGetter__"))&&(i=c.bind(f.__defineGetter__),o=c.bind(f.__defineSetter__),a=c.bind(f.__lookupGetter__),s=c.bind(f.__lookupSetter__)),2!=[1,2].splice(0).length){var h=Array.prototype.splice;
Array.prototype.splice=function(e,t){return arguments.length?h.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(p.call(arguments,2))):[]
}}if(1!=[].unshift(0)){var y=Array.prototype.unshift;Array.prototype.unshift=function(){return y.apply(this,arguments),this.length
}}Array.isArray||(Array.isArray=function(e){return"[object Array]"==d(e)});var m=Object("a"),v="a"!=m[0]||!(0 in m);
if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=arguments[1],i=-1,o=r.length>>>0;
if("[object Function]"!=d(e))throw new TypeError;for(;o>++i;)i in r&&e.call(n,r[i],i,t)
}),Array.prototype.map||(Array.prototype.map=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=r.length>>>0,i=Array(n),o=arguments[1];
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var a=0;n>a;a++)a in r&&(i[a]=e.call(o,r[a],a,t));
return i}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,r=L(this),n=v&&"[object String]"==d(this)?this.split(""):r,i=n.length>>>0,o=[],a=arguments[1];
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var s=0;i>s;s++)s in n&&(t=n[s],e.call(a,t,s,r)&&o.push(t));
return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=r.length>>>0,i=arguments[1];
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;n>o;o++)if(o in r&&!e.call(i,r[o],o,t))return!1;
return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=r.length>>>0,i=arguments[1];
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;n>o;o++)if(o in r&&e.call(i,r[o],o,t))return!0;
return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=r.length>>>0;
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");
var i,o=0;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o++];
break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")
}for(;n>o;o++)o in r&&(i=e.call(void 0,i,r[o],o,t));return i}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=L(this),r=v&&"[object String]"==d(this)?this.split(""):t,n=r.length>>>0;
if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");
var i,o=n-1;if(arguments.length>=2)i=arguments[1];else for(;;){if(o in r){i=r[o--];
break}if(0>--o)throw new TypeError("reduceRight of empty array with no initial value")
}do o in this&&(i=e.call(void 0,i,r[o],o,t));while(o--);return i}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var r=v&&"[object String]"==d(this)?this.split(""):L(this),n=r.length>>>0;
if(!n)return-1;var i=0;for(arguments.length>1&&(i=t(arguments[1])),i=i>=0?i:Math.max(0,n+i);n>i;i++)if(i in r&&r[i]===e)return i;
return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var r=v&&"[object String]"==d(this)?this.split(""):L(this),n=r.length>>>0;
if(!n)return-1;var i=n-1;for(arguments.length>1&&(i=Math.min(i,t(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in r&&e===r[i])return i;
return-1}),!Object.keys){var w=!0,b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=b.length;
for(var C in{toString:null})w=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");
var t=[];for(var r in e)g(e,r)&&t.push(r);if(w)for(var n=0,i=S;i>n;n++){var o=b[n];
g(e,o)&&t.push(o)}return t}}var A=-621987552e5,T="-000001";Date.prototype.toISOString&&-1!==new Date(A).toISOString().indexOf(T)||(Date.prototype.toISOString=function(){var e,t,r,n,i;
if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");
for(n=this.getUTCFullYear(),i=this.getUTCMonth(),n+=Math.floor(i/12),i=(i%12+12)%12,e=[i+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],n=(0>n?"-":n>9999?"+":"")+("00000"+Math.abs(n)).slice(n>=0&&9999>=n?-4:-6),t=e.length;t--;)r=e[t],10>r&&(e[t]="0"+r);
return n+"-"+e.slice(0,2).join("-")+"T"+e.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"
});var M=!1;try{M=Date.prototype.toJSON&&null===new Date(0/0).toJSON()&&-1!==new Date(A).toJSON().indexOf(T)&&Date.prototype.toJSON.call({toISOString:function(){return!0
}})}catch(_){}if(M||(Date.prototype.toJSON=function(){var e,t=Object(this),r=n(t);
if("number"==typeof r&&!isFinite(r))return null;if(e=t.toISOString,"function"!=typeof e)throw new TypeError("toISOString property is not callable");
return e.call(t)}),Date=function(e){function t(r,n,i,o,a,s,u){var c=arguments.length;
if(this instanceof e){var l=1==c&&r+""===r?new e(t.parse(r)):c>=7?new e(r,n,i,o,a,s,u):c>=6?new e(r,n,i,o,a,s):c>=5?new e(r,n,i,o,a):c>=4?new e(r,n,i,o):c>=3?new e(r,n,i):c>=2?new e(r,n):c>=1?new e(r):new e;
return l.constructor=t,l}return e.apply(this,arguments)}function r(e,t){var r=t>1?1:0;
return i[t]+Math.floor((e-1969+r)/4)-Math.floor((e-1901+r)/100)+Math.floor((e-1601+r)/400)+365*(e-1970)
}var n=RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365];
for(var o in e)t[o]=e[o];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var i=n.exec(t);
if(i){var o,a=Number(i[1]),s=Number(i[2]||1)-1,u=Number(i[3]||1)-1,c=Number(i[4]||0),l=Number(i[5]||0),f=Number(i[6]||0),p=Number(i[7]||0),d=!i[4]||i[8]?0:Number(new e(1970,0)),g="-"===i[9]?1:-1,h=Number(i[10]||0),y=Number(i[11]||0);
return(l>0||f>0||p>0?24:25)>c&&60>l&&60>f&&1e3>p&&s>-1&&12>s&&24>h&&60>y&&u>-1&&r(a,s+1)-r(a,s)>u&&(o=60*(24*(r(a,s)+u)+c+h*g),o=1e3*(60*(o+l+y*g)+f)+p+d,o>=-864e13&&864e13>=o)?o:0/0
}return e.parse.apply(this,arguments)},t}(Date),Date.now||(Date.now=function(){return(new Date).getTime()
}),"0".split(void 0,0).length){var E=String.prototype.split;String.prototype.split=function(e,t){return void 0===e&&0===t?[]:E.apply(this,arguments)
}}if("".substr&&"b"!=="0b".substr(-1)){var k=String.prototype.substr;String.prototype.substr=function(e,t){return k.call(this,0>e?0>(e=this.length+e)?0:e:e,t)
}}var x="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||x.trim()){x="["+x+"]";
var j=RegExp("^"+x+x+"*"),I=RegExp(x+x+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");
return(this+"").replace(j,"").replace(I,"")}}var L=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");
return Object(e)}});var Hashtable=function(){function e(t){var r;if("string"==typeof t)return t;
if(typeof t.hashCode==l)return r=t.hashCode(),"string"==typeof r?r:e(r);if(typeof t.toString==l)return""+t;
try{return t+""}catch(n){return Object.prototype.toString.call(t)}}function t(e,t){return e.equals(t)
}function r(e,t){return typeof t.equals==l?t.equals(e):e===t}function n(e){return function(t){if(null===t)throw Error("null is not a valid "+e);
if(t===void 0)throw Error(e+" must not be undefined")}}function i(e,t,r,n){this[0]=e,this.entries=[],this.addEntry(t,r),null!==n&&(this.getEqualityFunction=function(){return n
})}function o(e){return function(t){for(var r,n=this.entries.length,i=this.getEqualityFunction(t);n--;)if(r=this.entries[n],i(t,r[0]))switch(e){case g:return!0;
case h:return r;case y:return[n,r[1]]}return!1}}function a(e){return function(t){for(var r=t.length,n=0,i=this.entries.length;i>n;++n)t[r+n]=this.entries[n][e]
}}function s(e,t){for(var r,n=e.length;n--;)if(r=e[n],t===r[0])return n;return null
}function u(e,t){var r=e[t];return r&&r instanceof i?r:null}function c(t,r){var n=this,o=[],a={},g=typeof t==l?t:e,h=typeof r==l?r:null;
this.put=function(e,t){p(e),d(t);var r,n,s=g(e),c=null;return r=u(a,s),r?(n=r.getEntryForKey(e),n?(c=n[1],n[1]=t):r.addEntry(e,t)):(r=new i(s,e,t,h),o[o.length]=r,a[s]=r),c
},this.get=function(e){p(e);var t=g(e),r=u(a,t);if(r){var n=r.getEntryForKey(e);if(n)return n[1]
}return null},this.containsKey=function(e){p(e);var t=g(e),r=u(a,t);return r?r.containsKey(e):!1
},this.containsValue=function(e){d(e);for(var t=o.length;t--;)if(o[t].containsValue(e))return!0;
return!1},this.clear=function(){o.length=0,a={}},this.isEmpty=function(){return!o.length
};var y=function(e){return function(){for(var t=[],r=o.length;r--;)o[r][e](t);return t
}};this.keys=y("keys"),this.values=y("values"),this.entries=y("getEntries"),this.remove=function(e){p(e);
var t,r=g(e),n=null,i=u(a,r);return i&&(n=i.removeEntryForKey(e),null!==n&&(i.entries.length||(t=s(o,r),f(o,t),delete a[r]))),n
},this.size=function(){for(var e=0,t=o.length;t--;)e+=o[t].entries.length;return e
},this.each=function(e){for(var t,r=n.entries(),i=r.length;i--;)t=r[i],e(t[0],t[1])
},this.putAll=function(e,t){for(var r,i,o,a,s=e.entries(),u=s.length,c=typeof t==l;u--;)r=s[u],i=r[0],o=r[1],c&&(a=n.get(i))&&(o=t(i,a,o)),n.put(i,o)
},this.clone=function(){var e=new c(t,r);return e.putAll(n),e}}var l="function",f=typeof Array.prototype.splice==l?function(e,t){e.splice(t,1)
}:function(e,t){var r,n,i;if(t===e.length-1)e.length=t;else for(r=e.slice(t+1),e.length=t,n=0,i=r.length;i>n;++n)e[t+n]=r[n]
},p=n("key"),d=n("value"),g=0,h=1,y=2;return i.prototype={getEqualityFunction:function(e){return typeof e.equals==l?t:r
},getEntryForKey:o(h),getEntryAndIndexForKey:o(y),removeEntryForKey:function(e){var t=this.getEntryAndIndexForKey(e);
return t?(f(this.entries,t[0]),t[1]):null},addEntry:function(e,t){this.entries[this.entries.length]=[e,t]
},keys:a(0),values:a(1),getEntries:function(e){for(var t=e.length,r=0,n=this.entries.length;n>r;++r)e[t+r]=this.entries[r].slice(0)
},containsKey:o(g),containsValue:function(e){for(var t=this.entries.length;t--;)if(e===this.entries[t][1])return!0;
return!1}},c}();(function(e){"use strict";var t,r=(e.BMP,{}),n={};r.createObjectURL=function(e,r){var i=t();
return!(!r||!r.autoRevoke)||!1,n[i]=e,"blob:"+i},r.revokeObjectURL=function(e){var t=e.replace("blob:","");
delete n[t]},r.retrieveObject=function(e){var t=e.replace("blob:","");return n[t]
},r.revokeAllObjectURLs=function(){n={}},t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),r="x"===e?t:8|3&t;
return r.toString(16)})},e.BMP=e.BMP||{},e.BMP.URL=r})(this),function(e){"use strict";
var t,r;e.BMP=e.BMP||{},t=e.BMP,t.MIME=t.MIME||{},r=t.MIME,r.TEXT_TYPES=["application/javascript","application/json","application/x-javascript"],r.isText=function(e){return 0===e.indexOf("text/")?!0:-1!==r.TEXT_TYPES.indexOf(e)?!0:!1
}}(this),function(e){"use strict";var t,r,n,i,o=!0;e.BMP.MIME;try{t=new e.Blob,t=null
}catch(a){o=!1}i=function(t){var r,n="",i=new e.Uint8Array(t),o=i.byteLength;for(r=0;o>r;r++)n+=String.fromCharCode(i[r]);
return e.btoa(n)},r=function(e,t){var r;if(e&&!Array.isArray(e))throw Error("first argument should be an Array");
return t=t||{},this.size=0,this.type="",this.base64="",this.text="","object"==typeof t&&(this.type=t.type||this.type),e&&e.length&&(r=e[0],"string"==typeof r&&(0===r.indexOf("data:")&&"text/plain"===this.type?(this.size+=r.length,this.text+=r):(this.size+=r.length,this.base64+=r))),this
},r.createNative=function(t,n){var i;return n=n||{},o?new e.Blob(t,n):e.BlobBuilder?(i=new e.BlobBuilder,i.append(t),i.getBlob(n)):new r(t,n)
},r.fromBlobURL=function(t,n,i){n=n||function(){},i=i||function(){},e.URL&&e.URL.createObjectURL?r.nativelyFromBlobURL(t,n,i):this.fromNativeBlob(e.BMP.URL.retrieveObject(t),function(e){n(e)
},function(e){i(e)})},r.fromNativeBlob=function(t,n,i){var o=new e.FileReader;n=n||function(){},i=i||function(){},o.onload=function(e){var a;
o.onload=null;try{if(a=e.target.result,t=r.fromDataURI(e.target.result),!t)throw Error("Blob.fromNativeBlob: fromDataURI gave no blob")
}catch(s){return i(s),void 0}n(t)},o.onerror=function(e){o.onerror=null,i(e.target.error)
};try{o.readAsDataURL(t)}catch(a){o.onload=null,o.onerror=null,i(a)}},r.fromDataURI=function(t){var n,i,o,a,s=new r;
n=t.split(","),a=n[1],n=n[0].split(":"),n=n[1].split(";"),i=n[0],o=n[1],"base64"===o?s.base64=a:s.text=a,s.type=i,s.size=a.length;
try{s=r.fromDataURI(e.atob(s.base64)),s.makeNested()}catch(u){}return s},r.nativelyFromBlobURL=function(t,n,o){var a,s;
n=n||function(){},o=o||function(){},a=new e.XMLHttpRequest,a.onreadystatechange=function(){var t,a,u;
this.readyState===e.XMLHttpRequest.DONE&&(this.onreadystatechange=null,t=this.getResponseHeader("Content-Type"),200===this.status?("arraybuffer"===this.responseType?(a=i(this.response),s=new r([a],{type:t})):"blob"===this.responseType?r.fromNativeBlob(this.response,function(e){n(e)
},function(e){o(e)}):"document"===this.responseType?(u=new e.XMLSerializer,a=e.btoa(u.serializeToString(this.response)),s=new r([a],{type:t})):"json"===this.responseType?(a=e.btoa(JSON.stringify(this.response)),s=new r([a],{type:t})):s=new r([this.response],{type:t}),s?n(s):o(Error("error retrieving target Blob via Blob URL"))):o(Error(this.url+" -> "+this.status)))
},a.open("GET",t),a.send()},r.isNested=function(){},r.prototype.makeNested=function(){var e="data:";
e+=this.type,e+=";base64,",e+=this.base64,this.type="text/plain",this.text=e,this.base64=null
},r.prototype.undoNested=function(){var e=r.fromDataURI(this.text);this.type=e.type,this.base64=e.base64,this.text=null
},r.prototype.toNative=function(){return e.BMP.Blob.createNative([e.atob(this.base64)],{type:this.type})
},e.BMP=e.BMP||{},e.BMP.Blob=r,e.BMP.NestedBlob=n}(this),function(e){"use strict";
var t,r,n,i=e.Modernizr,o=e.document,a=e.jQuery;return i?(i.addTest("filereader",function(){return!!(e.File&&e.FileList&&e.FileReader)
}),i.addTest("positionfixed",function(){var t,r,n=o.createElement("div"),i=!1,s=o.body||function(){return i=!0,o.documentElement.appendChild(o.createElement("body"))
}(),u=s.style.cssText;return s.style.cssText="height: 3000px; margin: 0; padding; 0;",n.style.cssText="position: fixed; top: 100px",s.appendChild(n),e.scrollTo(0,500),r=a(n).offset(),t=600===r.top,t||void 0===n.getBoundingClientRect||(t=100===n.getBoundingClientRect().top),s.removeChild(n),s.style.cssText=u,e.scrollTo(0,1),i&&o.documentElement.removeChild(s),t
}),i.addTest("xpath",function(){var t=a.parseXML("<xml />");return!!e.XPathResult&&!!t.evaluate
}),i.addTest("documentfragment",function(){var e,t,r;try{return r=o.createElement("p"),e=o.createDocumentFragment(),t=o.createDocumentFragment(),t.appendChild(r),e.appendChild(t),r.parentNode!==e?!1:t.parentNode===e?!1:!0
}catch(n){return!1}}),i.inputtypes.file=function(){var e,t=navigator.userAgent,r=-1!==t.indexOf("Android"),n=r&&/Android 2\.(0|1)/.test(t);
return r&&(-1!==t.indexOf("Android 1.")||n)?!1:(e=o.createElement("input"),e.setAttribute("type","file"),e.disabled===!1)
}(),i.inputtypes.number=function(){var e,t;return i.inputtypes.number?(e=a('<input type="number" />'),e.val(1.5),t=e[0].checkValidity(),e.remove(),t):!1
}(),i.canvas&&(t=new Image,r=o.createElement("canvas"),n=r.getContext("2d"),t.onload=function(){n.drawImage(t,0,0),i.addTest("canvastodataurlpng",function(){return 0===r.toDataURL("image/png").indexOf("data:image/png")
}),i.addTest("canvastodataurljpeg",function(){return 0===r.toDataURL("image/jpeg").indexOf("data:image/jpeg")
}),i.addTest("canvastodataurlwebp",function(){return 0===r.toDataURL("image/webp").indexOf("data:image/webp")
})},t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="),void 0):(e.warn("Blink Modernizr tests need Modernizr to be included first."),void 0)
}(this),function(e){"use strict";var t=e.jQuery,r=e.Math;e.isBlinkGapDevice=function(){return e.PhoneGap&&"object"===t.type(e.device)&&e.device instanceof e.Device
},e.computeTimeout=function(e){var t=1e3/600;return r.floor(e*t+15e3)}}(this),function(e){"use strict";
var t,r=e.jQuery,n=r(e.document),i={history:[]},o=["log","error","warn","info"],a=function(){n.off("ready deviceready",a),setTimeout(function(){t=e.console||e.debug||{log:r.noop},r.each(o,function(n,i){var o=r.type(t[i]);
e[i]="function"===o?function(){t[i].apply(t,arguments)}:"object"===o?function(e){t[i](e)
}:"log"!==i?e.log:r.noop}),r.each(i.history,function(n,i){var o=e[i.fn],a=r.type(o);
"function"===a?o.apply(t,i.args):"object"===a&&o(i.args[0])}),delete i.history,r.each(o,function(e,t){delete i[t]
})},0)},s=function(){e.PhoneGap&&e.PhoneGap.available?i.history&&a():setTimeout(s,197)
};t=i,r.each(o,function(n,o){i[o]=function(){i.history.push({fn:o,args:r.makeArray(arguments)})
},e[o]=t[o]}),e.isBlinkGap?s():n.on("ready",a)}(this),function(e){var t=e.String;
t.prototype.hasEntities=function(){var e=this;return-1===e.indexOf("&")?!1:void 0
},t.prototype.repeat=function(e){var t,r="";for(t=0;e>t;t++)r+=this;return r}}(this),function(e){"use strict";
var t=e.Math,r=t.round;t.round=function(e,n){var i;return n&&0!==n?(i=t.pow(10,n),"number"==typeof n&&n>0&&(e=t.round(e*i)/i),e):r(e)
},"function"!=typeof t.uuid&&(t.uuid=function(){var e,r=t.uuid.CHARS,n=[],i=36;for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4";i--;)n[i]||(e=0|16*t.random(),n[i]=r[19===i?8|3&e:e]);
return n.join("")},t.uuid.CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"])
}(this),function(e){"use strict";function t(e,t){var n=!0;return e&&"object"===r.type(e)?"array"===r.type(t)?(r.each(t,function(t,r){return e[r]===void 0?(n=!1,!1):!0
}),n):"object"===r.type(t)?(r.each(t,function(t,i){return r.type(e[t])!==i?(n=!1,!1):!0
}),n):!1:!1}var r=e.jQuery,n=r.fn.attr,i=r.fn.show;r.isObject=function(e){return"object"===r.type(e)
},r.isPromise=function(e){var r="function",n={always:r,done:r,fail:r,pipe:r,progress:r,promise:r,state:r,then:r};
return t(e,n)},r.isDeferred=function(e){var n="function",i={notify:n,notifyWith:n,reject:n,rejectWith:n,resolve:n,resolveWith:n};
return r.isPromise(e)?t(e,i):!1},r.fn.attr=function(){var e,t,i;return this[0]&&0===arguments.length?(i={},t=this[0].attributes,e=t.length,r.each(t,function(e,t){var r=t.name||t.nodeName,n=t.value||t.nodeValue;
r&&(i[r.toLowerCase()]=n)}),i):n.apply(this,arguments)},r.fn.show=function(){return this.removeAttr("hidden"),this.removeClass("hidden"),i.apply(this,arguments)
},r.fn.isHidden=function(){return this.prop("hidden")||this.hasClass("hidden")?!0:this[0]&&this[0].style&&"none"===this[0].style.display
},r.fn.tag=function(){var e;return this.length>0?(e=this[0].nodeName||this[0].tagName||"",e.toLowerCase()):""
},r.fn.tagHTML=function(){var e,t=r(this);return this[0]?(e="<"+t.tag(),r.each(t.attr(),function(t,r){e+=" "+t+'="'+r+'"'
}),e+=" />"):void 0},r.whenArray=function(e){return r.when.apply(r,e)},r.resolveTimeout=function(){var e=r.makeArray(arguments),t=e.shift();
return setTimeout(function(){t.resolve.apply(t,e)},0),this},r.fn.appendWithCheck=function(t,n,i,o){var a=r(this),s=new r.Deferred,u=e.MyAnswers;
return"string"!==r.type(i)&&(i=t.match(/>([^<>\0\n\f\r\t\v]+)</),i||(i=t.match(/(\w+)/)),i="array"===r.type(i)?i[0]:t),"number"!==r.type(o)&&u.dispatch.add(function(){o=a.html().lastIndexOf(i)
}),u.dispatch.add(function(){a.append(t)}),u.dispatch.add(function(){var e=a.html();
"string"!==r.type(e)||!e||e.lastIndexOf(i)>o?s.resolve():n>0?r.when(a.appendWithCheck(t,--n,i,o)).fail(s.reject).then(s.resolve):s.reject()
}),s.promise()},r.fn.childrenAsProperties=function(){var e={};return r(this).children().each(function(t,n){var i=r(n),o=i.tag(),a=i.text();
o.length>0&&a.length>0&&(e[o]=a)}),e},r.getCachedScript=function(e,t){return t=r.extend(t||{},{dataType:"script",cache:!0,url:e}),r.ajax(t)
}}(this),function(e){"use strict";var t=e.jQuery,r=e._Blink,n=e._SERVER,i={PREFIX_GZ:"/_c_/",SUFFIX_GZ:"",PREFIX:"/_c_/",SUFFIX:""},o=["css","js"],a=function(e){var a;
return a=r&&r.cfg&&r.cfg.CDN_PLATFORM,a=t.isObject(a)?a:{},a=t.extend({},i,a),e=e||n&&n.HTTP_ACCEPT_ENCODING,e="string"==typeof e?e:"",-1===e.indexOf("gzip")&&(a.PREFIX_GZ=a.PREFIX,a.SUFFIX_GZ=a.SUFFIX),this.getURL=function(e){var r;
return e&&"string"==typeof e?(e=t.trim(e),e=e.replace(/^\/*/,""),r=e.match(/\.?(\w+)$/),r="array"===t.type(r)?r[1]:"",r&&-1!==t.inArray(r,o)?a.PREFIX_GZ+e+a.SUFFIX_GZ:a.PREFIX+e+a.SUFFIX):""
},this};r.preloadPage=function(e){var r,n=t("<iframe></iframe>"),i=30,o=function(){n.remove()
},a=function(){i--,t(r.document.body).hasClass("s-ready")?o():0>i?(warn('preloadPage(): timed out waiting for "s-ready"'),o()):setTimeout(a,2e3)
};n.attr({height:10,width:10,src:e}),n.css({position:"absolute",top:"-50px",left:"-50px"}),t("body").append(n),r=n[0].contentWindow,t.isWindow(r)&&r.document?t(r.document.body).hasClass("s-ready")?o():setTimeout(a,2e3):warn("preloadPage(): unable to find Window or Document in <iframe>")
},r.stringifyDOM=function(t){var r;return t.xml?t.xml:e.XMLSerializer?(r=new e.XMLSerializer,r.serializeToString(t)):null
},r.hasFontFor=function(n){var i,o,a,s,u=r.hasFontFor;try{u.results||(u.results={}),"boolean"==typeof u.results[n]?i=u.results[n]:(o=t(e.document.body),a=t("<span>"+n+"</span>"),s=t("<span>&#xFFFD;</span>"),a.add(s).appendTo(o),i=a.innerWidth()!==s.innerWidth(),u.results[n]=i,a.add(s).remove())
}catch(c){error(error),i=!1}return i},e._Blink.cdnp=new a}(this),function(e){"use strict";
var t=e.jQuery,r=function(e){function r(){if(!i.isPaused&&null===n&&0!==i.queue.length){var e,o=i.queue.shift();
"function"==typeof o&&(e=o()),"function"==typeof t&&t()instanceof t&&e&&"object"==typeof e&&e.promise&&"function"==typeof e.promise?(n=0,t.when(e).always(function(){n=setTimeout(function(){n=null,r()
},i.interval)})):n=setTimeout(function(){n=null,r()},i.interval)}}var n=null,i=this;
return this.queue=[],this.interval=e||0,this.isPaused=!1,this.poke=function(){r()
},this.pause=function(){clearTimeout(n),n=null,this.isPaused=!0},this.resume=function(){this.isPaused=!1,r()
},this};r.prototype.add=function(e){this.queue.push(e),this.poke()},e.BlinkDispatch=r
}(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(r){return e.BMP=t(e,r),e.BMP
}):e.BMP=t(e,e.$)}(this,function(e,t){"use strict";var r,n,i,o,a,s,u=t(e.document),c=t(e.document.body),l=e.navigator||{},f={};
return r=e.BMP=e.BMP||{},t&&t.fn&&"string"==typeof t.fn.jquery?(i=function(){var e=t('<div id="bmp-dialog-async"></div>');
return e.hide(),c.append(e),e},f.jQueryUI=function(e,t){n=c.find("#bmp-dialog-async"),n.length||(n=i()),n.empty(),n.hasClass("ui-dialog-content")&&n.dialog("destroy"),n.append("<p>"+e+"</p>"),t.modal=!0,t.closeOnEscape=!0,n.dialog(t)
},o=function(){return t.fn.dialog},a=function(){return t.mobile&&t.fn.dialog},r.alertNoQueue=function(r,n){var i,a=new t.Deferred,s=l.notification||{},u=s.alert;
return n=n||{},n.ok="OK",i=function(){a.resolve()},"function"===t.type(u)?(n.title="Alert",u(r,i,n.title,n.ok)):o()?(n.title="Alert",n.buttons={},n.buttons[n.ok]=function(){t(this).dialog("close")
},n.close=i,f.jQueryUI(r,n)):(r=(n.title?n.title+" | ":"")+r,e.alert(r),a.resolve()),a.promise()
},r.confirmNoQueue=function(r,n){var i=new t.Deferred,a=l.notification||{},s=a.alert;
return n=n||{},n.ok=n.ok||"OK",n.cancel=n.cancel||"Cancel","function"===t.type(s)?(n.title=n.title||"Confirm",s(r,function(e){1===e?i.resolve(!0):i.resolve(!1)
},n.title,n.ok+","+n.cancel)):o()?(n.title=n.title||"Confirm",n.buttons={},n.buttons[n.cancel]=function(){t(this).dialog("close")
},n.buttons[n.ok]=function(){i.resolve(!0),t(this).dialog("close")},n.close=function(){i.isRejected()&&i.isResolved()||i.resolve(!1)
},f.jQueryUI(r,n)):(r=(n.title?n.title+" | ":"")+r,i.resolve(e.confirm(r))),i.promise()
},r.promptNoQueue=function(r,n,i){var a=new t.Deferred;return"string"!=typeof n&&(i=n,n=""),i=i||{},i.ok=i.ok||"OK",i.cancel=i.cancel||"Cancel",o()?(r+='</p><p><input type="text" value="'+n+'" />',i.title=i.title||"Prompt",i.buttons={},i.buttons[i.cancel]=function(){t(this).dialog("close")
},i.buttons[i.ok]=function(){var e=t(this);a.resolve(e.find("input").val()),e.dialog("close")
},i.close=function(){a.isRejected()&&a.isResolved()||a.resolve(null)},f.jQueryUI(r,i)):(r=(i.title?i.title+" | ":"")+r,a.resolve(e.prompt(r))),a.promise()
},s=function(e,r,n){return"string"==typeof r&&(r=e[r]),function(){var i=t.makeArray(arguments),o=new t.Deferred;
return u.queue(n,function(a){var s,c=t._data(u[0],n+"queue");return c.unshift("inprogress"),s=r.apply(e,i),s.then(function(){o.resolve.apply(o,t.makeArray(arguments)),c.shift(),a()
},function(){o.reject.apply(o,t.makeArray(arguments)),c.shift(),a()}),s}),u.queue(n).length&&"inprogress"!==u.queue(n)[0]&&u.dequeue(n),o.promise()
}},r.alert=s(this,r.alertNoQueue,"bmp-alerts"),r.confirm=s(this,r.confirmNoQueue,"bmp-alerts"),r.prompt=s(this,r.promptNoQueue,"bmp-alerts"),r):void 0
}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["underscore"],function(r){return e.BMP=t(e,r),e.BMP
}):e.BMP=t(e,e._)}(this,function(e,t){"use strict";var r,n,i;return r=e.BMP=e.BMP||{},n=r.BIC=r.BIC||{},i=function(e){this.cfg=e
},i.prototype.toCameraOptions=function(){var e,r={};if(t.isNumber(this.cfg.imageCaptureQuality)&&(r.quality=this.cfg.imageCaptureQuality),t.isNumber(this.cfg.imageCaptureScale)&&(r.imageScale=this.cfg.imageCaptureScale),t.isString(this.cfg.cameraOptions)){try{e=JSON.parse(this.cfg.cameraOptions),(!t.isObject(e)||t.isArray(e))&&(e={})
}finally{e=e||{}}t.extend(r,e)}return r},n.Config=i,r}),function(e){"use strict";
var t,r,n,i,o,a,s,u,c,l=e.jQuery,f=e.BMP,p=(f.alert,{}),d={},g=function(u,c,d){var g,h,y,m=this,v=new l.Deferred;
return("string"!=typeof c||1>c.length)&&(c="default"),("string"!=typeof d||1>d.length)&&(d="main"),"string"!=typeof u?u=t[0]:"sessionstorage"===u&&-1===l.inArray("sessionstorage",t)?u="memory":-1===l.inArray(u,t)&&(u=t[0]),m.type=u,m.partition=c,m.section=d,v.done(function(){a("BlinkStorage(): "+u+" -> "+c+" : "+d+" ready")
}),m.ready=function(){return v.promise()},"localstorage"===u||"sessionstorage"===u?(h="localstorage"===u?e.localStorage:e.sessionStorage,m.get=function(e){var t=new l.Deferred;
return t.resolve(h.getItem(c+":"+d+":"+e)),t.promise()},m.set=function(e,t){var r=new l.Deferred;
return h.setItem(c+":"+d+":"+e,t),r.resolve(),r.promise()},m.remove=function(e){var t=new l.Deferred;
return h.removeItem(c+":"+d+":"+e),t.resolve(),t.promise()},m.keys=function(){var e,t,r=new l.Deferred,n=[],i=h.length,o=c+":"+d+":";
for(e=0;i>e;e++)t=h.key(e),0===t.indexOf(o)&&n.push(t.replace(o,""));return r.resolve(n),r.promise()
},m.count=function(){var e=new l.Deferred;return l.when(m.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},v.resolve()):"websqldatabase"===u?(r=1024*1024*(e.device?5:.75),n=function(e,t){var r=t&&e.executeSql?t:e;
return s("BlinkStorage error1: "+r.code+" "+r.message),(3===r.code||4===r.code||7===r.code)&&f.alert(r.code+"\n"+r.message,{title:"Storage error!"}),!1
},i=function(){h.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS `"+d+"` (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",[],v.resolve,v.reject)
},n,l.noop)},o=function(){try{h=e.openDatabase(c,"1.0",c,r),p[c]=h,h.readTransaction=h.readTransaction||h.transaction
}catch(t){throw v.reject(),"BlinkStorage: "+t}},g={get:"SELECT v FROM `"+d+"` WHERE k = ?",set:"INSERT OR REPLACE INTO `"+d+"` (k, v) VALUES (?, ?)",remove:"DELETE FROM `"+d+"` WHERE k = ?",keys:"SELECT k FROM `"+d+"`",count:"SELECT count(k) AS `count` FROM "+d},p[c]?h=p[c]:o(),i(),m.get=function(e){var t=new l.Deferred;
return h.readTransaction(function(r){r.executeSql(g.get,[e],function(e,r){1===r.rows.length?t.resolve(r.rows.item(0).v):(t.resolve(null),r.rows.length>1&&s("BlinkStorage: SELECT returned multiple rows"))
},n)},n,l.noop),t.promise()},m.set=function(e,t,r){var i=new l.Deferred,o=new l.Deferred,a=function(){setTimeout(function(){l.when(m.set(e,t,r)).fail(i.reject).then(i.resolve)
},2e3)};return r="number"!=typeof r?2:r,0>=r--?(i.reject(),i.promise()):(setTimeout(function(){h.transaction(function(r){r.executeSql(g.set,[e,t],function(e,t){1!==t.rowsAffected?(s("BlinkStorage: INSERT did not affect 1 row"),a()):o.resolve()
},function(e,t){n(t),a()})},function(e,t){n(e,t),a()},function(){"pending"===o.state()?a():i.resolve()
})},0),i.promise())},m.remove=function(e){var t=new l.Deferred;return h.transaction(function(r){r.executeSql(g.remove,[e],function(){t.resolve()
})},n,l.noop),t.promise()},m.keys=function(){var e=new l.Deferred;return h.readTransaction(function(t){t.executeSql(g.keys,[],function(t,r){var n,i,o=r.rows.length,a=[];
for(n=0;o>n;n++)i=r.rows.item(n),a.push(i.k);e.resolve(a)})},n,l.noop),e.promise()
},m.count=function(){var e=new l.Deferred;return h.readTransaction(function(t){t.executeSql(g.count,[],function(t,r){var n=r.rows.item(0).count;
l.isNumeric(n)?e.resolve(parseInt(n,10)):(s("BlinkStorage: SELECT count(k) non-numeric"),e.reject())
})},n,l.noop),e.promise()}):"memory"===u&&(y={},m.get=function(e){var t=new l.Deferred;
return t.resolve(y[c+":"+d+":"+e]),t.promise()},m.set=function(e,t){var r=new l.Deferred;
return y[c+":"+d+":"+e]=t,r.resolve(),r.promise()},m.remove=function(e){var t=new l.Deferred;
return delete y[c+":"+d+":"+e],t.resolve(),t.promise()},m.keys=function(){var e,t=new l.Deferred,r=[],n=c+":"+d+":";
for(e in y)y.hasOwnProperty(e)&&0===e.indexOf(n)&&r.push(e.replace(n,""));return t.resolve(r),t.promise()
},m.count=function(){var e=new l.Deferred;return l.when(m.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},v.resolve()),this};return l?(l.each(["log","error","warn","info"],function(t,r){d[r]=function(){e[r]&&e[r].apply(e,arguments)
}}),a=d.log,s=d.error,u=d.warn,c=d.info,g.prototype.removeKeysRegExp=function(e){var t=this,r=new l.Deferred(function(r){l.when(t.keys()).done(function(n){var i,o=n.length,a=[];
for(i=0;o>i;i++)-1!==n[i].search(e)&&a.push(t.remove(n[i]));l.when(a).done(r.resolve())
})});return r.promise()},g.prototype.available=[],t=g.prototype.available,e.openDatabase!==void 0&&t.push("websqldatabase"),e.localStorage!==void 0&&t.push("localstorage"),e.sessionStorage!==void 0&&t.push("sessionstorage"),t.push("memory"),"function"==typeof e.log&&c("BlinkStorage(): available=["+t.join(",")+"]"),e.BlinkStorage=g,void 0):(f.alert("jQuery must be be loaded first",{title:"Storage error!"}),void 0)
}(this);var activityIndicatorTop,$navBar;document.getElementById("startUp-loadDevice").className="working",MyAnswers.deviceDeferred=new $.Deferred,function(e){var t=e.jQuery,r=function(){var r=this;
return r.hideLocationBar=function(){e.scrollTo(0,1)},r.prepareView=function(r){var n=new t.Deferred,i=t(".view:visible").not(r[0]),o=t("#navBoxHeader");
return MyAnswers.dispatch.add(function(){r.hide(),r.css({"z-index":0,position:"absolute"}),currentMasterCategory?r.attr({"data-name":siteVars.config["m"+currentMasterCategory].pertinent.name}):t("#categoriesView").removeAttr("data-name"),currentCategory?r.attr({"data-name":siteVars.config["c"+currentCategory].pertinent.name}):t("#keywordListView").removeAttr("data-name"),currentInteraction?r.attr({"data-name":siteVars.config["i"+currentInteraction].pertinent.name,"data-type":siteVars.config["i"+currentInteraction].pertinent.type}):(t("#answerView").removeAttr("data-name"),t("#answerView").removeAttr("data-type")),i.css({"z-index":50,position:"absolute"}),r.show(),"screen-bottom"!==e.currentConfig.footerPosition&&MyAnswers.$body.children("footer").hide(),o.find("button").prop("disabled",!0),n.resolve()
}),n.promise()},r.showView=function(n,i){var o=new t.Deferred,a=t(".view:visible").not(n[0]),s=i?"right":"left";
return r.hideLocationBar(),MyAnswers.dispatch.add(function(){0!==a.size()?a.hide("slide",{direction:s},300,function(){a.css("z-index",""),a.css("position",""),n.css("z-index",""),n.css("position",""),e.updateNavigationButtons(),MyAnswers.$body.children("footer").show(),o.resolve(),n.trigger("viewShow")
}):(n.css("z-index",""),n.css("position",""),e.updateNavigationButtons(),MyAnswers.$body.children("footer").show(),o.resolve(),n.trigger("viewShow"))
}),o.promise()},r};e.MyAnswersDevice=new r}(this),document.getElementById("startUp-loadDevice").className="working success",MyAnswers.deviceDeferred.resolve();
var MyAnswers=MyAnswers||{},siteVars=siteVars||{},deviceVars=deviceVars||{},hasCategories=!1,hasMasterCategories=!1,hasInteractions=!1,answerSpaceOneKeyword=!1,currentInteraction,currentCategory,currentMasterCategory,currentConfig={},starsProfile={};
document.getElementById("startUp-loadMain").className="working",currentConfig.downloadTimeout=30,currentConfig.uploadTimeout=45,deviceVars.isOnline=!0,MyAnswers.mainDeferred=new $.Deferred,MyAnswers.browserDeferred=new $.Deferred,MyAnswers.formsDeferred=new $.Deferred,MyAnswers.dfrdMoJOs=null,MyAnswers.dfrdGoogleMaps=null,siteVars.mojos=siteVars.mojos||{},siteVars.forms=siteVars.forms||{},MyAnswers.isLoggedIn=!1,MyAnswers.isCustomLogin=!1,MyAnswers.isEmptySpace=!1,window.applicationCache&&$(window.applicationCache).on({updateready:function(){this.status!==this.IDLE?(this.swapCache(),log("Application Cache: manifest change triggered update")):(this.update(),log("Application Cache: update requested"))
},error:function(){error("Application Cache: "+this.status)}}),MyAnswers.gotoDefaultScreen=function(){var e,t=window.History;
"login"===currentConfig.defaultScreen||MyAnswers.isLoginOnly?showLoginView():"interaction"===currentConfig.defaultScreen&&hasInteractions&&void 0!==typeof siteVars.config["i"+currentConfig.defaultInteraction]?(e="/"+siteVars.answerSpace+"/"+siteVars.config["i"+currentConfig.defaultInteraction].pertinent.name+"/?",t.pushState({i:currentConfig.defaultInteraction},null,e)):"category"===currentConfig.defaultScreen&&hasCategories&&void 0!==typeof siteVars.config["c"+currentConfig.defaultCategory]?(e="/"+siteVars.answerSpace+"/?_c="+currentConfig.defaultCategory,t.pushState({c:currentConfig.defaultCategory},null,e)):"master category"===currentConfig.defaultScreen&&hasMasterCategories&&void 0!==typeof siteVars.config["m"+currentConfig.defaultMasterCategory]?(e="/"+siteVars.answerSpace+"/?_m="+currentConfig.defaultMasterCategory,t.pushState({m:currentConfig.defaultMasterCategory},null,e)):t.replaceState({_now:$.now()},null,"/"+siteVars.answerSpace+"/")
},function(e){function t(){History.pushState({m:$(this).data("id")},null,"/"+siteVars.answerSpace+"/?_m="+$(this).data("id"))
}function r(){History.pushState({m:$(this).data("masterCategory"),c:$(this).data("id")},null,"/"+siteVars.answerSpace+"/?_c="+$(this).data("id"))
}function n(){var e=siteVars.config["i"+$(this).data("id")].pertinent.name;History.pushState({m:$(this).data("masterCategory"),c:$(this).data("category"),i:$(this).data("id")},null,"/"+siteVars.answerSpace+"/"+e+"/")
}function i(){e.open($(this).data("hyperlink"),$(this).data("target"))}var o=e.MyAnswers;
o.populateItemListing=function(e,a){var s,u,c,l,f,p,d,g,h,y,m,v,w,b,S,C,A={};A.interactions=function(e){var t=e.attr("data-id"),r=siteVars.config["i"+t].pertinent;
"hyperlink"===r.type&&r.hyperlink?(e.attr("data-hyperlink",r.hyperlink),e.attr("data-target",r.hyperlinkTarget),e.bind("click",i)):e.bind("click",n)
},A.categories=function(e){var t=e.attr("data-id");1===siteVars.map["c"+t].length?(e.attr("data-category",t),e.attr("data-id",siteVars.map["c"+t][0]),A.interactions(e)):siteVars.map["c"+t].length>0&&e.bind("click",r)
},A.masterCategories=function(e){var r=e.attr("data-id");1===siteVars.map["m"+r].length?(e.attr("data-master-category",r),e.attr("data-id",siteVars.map["m"+r][0]),A.categories(e)):siteVars.map["m"+r].length>0&&e.bind("click",t)
},o.dispatch.add(function(){switch(a.children(".box:not(.welcomeBox)").remove(),f=$('<div class="box bordered" />'),p=$('<ul class="box" />'),e){case"masterCategories":s=currentConfig.masterCategoriesArrangement,u=currentConfig.masterCategoriesDisplay,c=siteVars.map.masterCategories,l=c,d="m";
break;case"categories":s=currentConfig.categoriesArrangement,u=currentConfig.categoriesDisplay,c=siteVars.map.categories,l=siteVars.map["m"+currentMasterCategory]||c,d="c";
break;case"interactions":s=currentConfig.interactionsArrangement,u=currentConfig.interactionsDisplay,c=siteVars.map.interactions,l=siteVars.map["c"+currentCategory]||c,d="i"
}switch("BlinkSideBar"===a.attr("id")&&(s="list",u=currentConfig.sidebarDisplay),log("MyAnswers.populateItemListing(): "+e+" "+s+" "+u+" "+d+"["+l.join(",")+"]"),s){case"list":b=1;
break;case"2 column":b=2;break;case"3 column":b=3;break;case"4 column":b=4}for(w=c.length,v=0;w>v;v++)C=siteVars.config[d+c[v]],C!==void 0&&-1!==$.inArray(c[v],l)&&"hide"!==C.pertinent.display&&(g=C.pertinent.displayName||C.pertinent.name,"text only"!==u&&C.pertinent.icon?(h=$("<img />"),h.attr({"class":"v"+b+"col",src:C.pertinent.icon,alt:g}),f.append(h)):(h=$("<li />"),y=$('<div class="label" />'),y.text(g),h.append(y),"string"==typeof C.pertinent.description&&(m=$('<div class="description" />'),m.text(C.pertinent.description),h.append(m)),p.append(h)),h.attr("data-id",c[v]),A[e](h))
}),o.dispatch.add(function(){f.children().size()>0&&(S=f.find("img"),1===b?(S.first().addClass("topLeft topRight"),S.last().addClass("bottomLeft bottomRight")):(S.first().addClass("topLeft"),S.size()>=b&&S.eq(b-1).addClass("topRight"),0===S.size()%b&&(S.eq(-1*b).addClass("bottomLeft"),S.last().addClass("bottomRight"))),f.appendTo(a)),p.children().size()>0&&p.appendTo(a)
})}}(this),function(e){var t,r,n,i,o=e.jQuery,a=e.MyAnswers,s=e.deviceVars,u={},c=o("#BlinkSideBar"),l=o("#stackLayout");
u.show=function(){a.dispatch.add(function(){l.addClass("bSideBar-on"),l.find(".selected").removeClass("selected"),l.find("[data-id="+currentCategory+"]").addClass("selected")
})},u.hide=function(){a.dispatch.add(function(){l.removeClass("bSideBar-on")})},u.update=function(){var u=siteVars.config["a"+siteVars.id].pertinent;
if(-1!==o.inArray("phone",s.features)||768>o(e).width()||"disabled"===u.sidebarDisplay)return this.hide(),void 0;
if(hasMasterCategories&&currentMasterCategory)t="masterCategories",n=currentMasterCategory;
else if(hasCategories&&currentCategory)t="categories",n=currentCategory;else{if(!hasInteractions||!currentCategory)return this.hide(),void 0;
t="interactions",n=currentInteraction}r!==t&&a.populateItemListing(t,c),r=t,i=n,this.show()
},a.sideBar=u}(this),MyAnswers.dumpLocalStorage=function(){$.when(MyAnswers.store.keys()).done(function(e){var t,r=e.length,n=function(e){e=e.length>20?e.substring(0,20)+"...":e,log("dumpLocalStorage(): found value: "+e)
};for(t=0;r>t;t++)log("dumpLocalStorage(): found key: "+e[t]),$.when(MyAnswers.store.get(e[t])).done(n)
})},function(e){function t(){var t=new M.Deferred,r=M.now(),n=M("#startUp-initBlinkGap"),i=function(){e.PhoneGap?e.PhoneGap.available?t.resolve():M(S).on("deviceready",t.resolve):M.now()-r>1e4?(warn("waitForBlinkGap(): still no PhoneGap after 10 seconds"),t.reject()):setTimeout(i,197)
};return e.isBlinkGap?(log("waitForBlinkGap(): native application detected"),n.addClass("working"),i(),M.when(t.promise()).fail(function(){n.addClass("error")
}).then(function(){n.addClass("success")}),t.promise()):(log("waitForBlinkGap(): native application not detected"),n.remove(),t.resolve(),t.promise())
}function r(){var t=new M.Deferred,r=null,n=function(e){r=null,E.notification.alert("Database installed, please restart the App.",function(){E.gap_database.requestTerminate()
},"First Run","Close App"),log("fixWebSQL(): quota increase: "+e)},i=function(e){var r={quotaIncrease:T.device.storageQuota+""},i=e.allocatedSpace,o=e.currentQuota;
log("fixWebSQL(): allocatedSpace="+i+" currentQuota="+o),T.device.storageQuota>o?E.gap_database.increaseQuota(n,t.reject,r):t.resolve()
};if(T&&T.device&&T.device.storageQuota&&"number"===M.type(T.device.storageQuota)&&T.device.storageQuota>0){log("fixWebSQL(): requestedQuota="+T.device.storageQuota);
try{r=e.openDatabase(C.answerSpace,"1.0",C.answerSpace,1048576),E.gap_database.getLimits(i,t.reject,null)
}catch(o){throw t.reject(),log(o),log("*** Open/Increase quota for database failed"),"fixWebSQL(): "+o
}}else log("fixWebSQL(): nothing to do"),t.resolve();return t.promise()}function n(){var e=new M.Deferred;
return T.store?M.when(T.store.get("storageVersion")).always(function(t){t?e.resolve():M.when(T.store.set("storageVersion",0),T.store.remove("siteConfigMessage"),T.store.removeKeysRegExp(/^mojoMessage-/)).always(function(){e.resolve()
})}):e.resolve(),e.promise()}function i(e){var t,r,n,o=M.type(e);return"string"===o&&e.length>0?(t=e.indexOf("#"),-1!==t&&(e=e.substring(0,t))):"array"===o&&e.length>0?(r=[],M.each(e,function(e,t){r.push(i(t))
}),e=r):"object"===o&&(n={},M.each(e,function(e,t){n[e]=i(t)}),e=n),e}function o(e){var t,r=new M.Deferred,n=new b.maps.DirectionsService;
return M.isPlainObject(e)&&e.origin&&e.destination&&e.travelMode?(n.route(e,function(e,n){if(n===b.maps.DirectionsStatus.OK)r.resolve(e);
else{switch(n){case b.maps.DirectionsStatus.NOT_FOUND:t="one of the waypoints could not be geocoded";
break;case b.maps.DirectionsStatus.ZERO_RESULTS:t="no route found, be more specific";
break;case b.maps.DirectionsStatus.MAX_WAYPOINTS_EXCEEDED:t="too many waypoints specified";
break;case b.maps.DirectionsStatus.OVER_QUERY_LIMIT:t="request quota exceeded, try again later";
break;case b.maps.DirectionsStatus.REQUEST_DENIED:t="request denied";break;case b.maps.DirectionsStatus.INVALID_REQUEST:t="invalid request";
break;default:t="unknown error, please try again"}r.reject("GoogleDirections error: "+t)
}}),r.promise()):(r.reject("GoogleDirections error: bad options"),r.promise())}function a(e,t,r){log("GoogleMaps basic: initialising..."),T.$body.trigger("taskBegun");
var n,i,o,a=new b.maps.LatLng(t.latitude,t.longitude),s={zoom:parseInt(t.zoom,10),center:a,mapTypeId:b.maps.MapTypeId[t.type.toUpperCase()]};
r.setOptions(s),"string"==typeof t.kml?n=new b.maps.KmlLayer(t.kml,{map:r,preserveViewport:!0}):"string"==typeof t.marker&&(i=new b.maps.Marker({position:a,map:r,icon:t.marker}),"string"==typeof t.markerTitle&&(i.setTitle(t.markerTitle),o=new b.maps.InfoWindow,b.maps.event.addListener(i,"click",function(){o.setContent(i.getTitle()),o.open(r,i)
}))),T.$body.trigger("taskComplete")}function s(e,t,r){var n,i,s,u={},c={travelMode:b.maps.DirectionsTravelMode[t.travelmode.toUpperCase()],avoidHighways:t.avoidhighways,avoidTolls:t.avoidtolls},l={mapTypeId:b.maps.MapTypeId[t.type.toUpperCase()]},f=M(e),p=f.next(".googledirections").first(),d=p,g=!0,h=!0,y=function(e){"string"==typeof e&&e.length>0&&insertText(p[0],e)
};log("GoogleMaps directions: initialising..."),"string"==typeof t.language&&(u.language=t.language),"string"==typeof t.region&&(u.region=t.region,c.region=t.region),"string"==typeof t.originAddress&&t.originAddress.length>0?n=t.originAddress:t.originLatitude!==void 0?n=new b.maps.LatLng(t.originLatitude,t.originLongitude):Modernizr.geolocation&&(log("Google Maps Directions: missing origin"),insertText(p[0],"attempting to use your most recent location as the origin..."),g=T.getGeoLocation().fail(y).then(function(e){n=new b.maps.LatLng(e.latitude,e.longitude)
})),"string"==typeof t.destinationAddress&&t.destinationAddress.length>0?i=t.destinationAddress:t.destinationLatitude!==void 0?i=new b.maps.LatLng(t.destinationLatitude,t.destinationLongitude):Modernizr.geolocation&&(log("Google Maps Directions: missing destination"),insertText(p[0],"attempting to use your most recent location as the destination..."),h=T.getGeoLocation().fail(y).then(function(e){i=new b.maps.LatLng(e.latitude,e.longitude)
})),M.when(g,h).always(function(){n&&i?"object"===M.type(n)&&"object"===M.type(i)&&n.equals(i)?(insertText(p[0],"origin and destination are the identical"),t.latitude=n.lat(),t.longitude=n.lng(),a(e,t,r)):(c.origin=n,c.destination=i,r.setOptions(l),s=new b.maps.DirectionsRenderer,s.setMap(r),s.setPanel(d[0]),M.when(o(c)).fail(y).then(function(e){s.setDirections(e)
})):n||i?n?(insertText(p[0],"missing destination, only the provided origin is displayed"),t.latitude=n.lat(),t.longitude=n.lng(),a(e,t,r)):(insertText(p[0],"missing origin, only the provided destination is displayed"),t.latitude=i.lat(),t.longitude=i.lng(),a(e,t,r)):insertText(p[0],"error: neither origin or destination could be determined")
})}function u(){var t,r,n,i,o,a=T.orientation;-1!==M.inArray("ios",A.features)&&90===Math.abs(e.orientation||0)?(t=e.screen.height,r=e.screen.width):(t=e.screen.width,r=e.screen.height),n=e.innerWidth,i=e.innerHeight,o=n>i?"landscape":"portrait",M.extend(T,{screenX:t,screenY:r,windowX:n,windowY:i,orientation:o}),a&&a!==o&&(log("onOrientationChange(): rotated!"),updateCurrentConfig()),k.trigger("scroll")
}function c(){A.isOnline=E.onLine===!0,log("onNetworkChange(): online="+A.isOnline)
}function l(e){var t,r,n,i,o,a,s,u,c,l,f=M(e.target),p=f.data("action"),d="Check your network connectivity and try again.",g="Are you sure you wish to discard this pending record?",h="Submitting all records may take some time, continue?",y=function(e){var t,r=new M.Deferred,n=e.data("id"),i=n.split(":"),o=i[0],a=i[1],s=i[2];
return C.config["i"+o]?(t=C.config["i"+o].pertinent.name,f.prop("disabled",!0),M.when(T.pendingStore.get(o+":"+a+":"+s)).fail(function(){BMP.alert("Error: unable to retrieve this form"),f.prop("disabled",!1)
}).then(function(n){var i;if("string"!=typeof n||0===n.length)return f.prop("disabled",!1),void 0;
switch("object"!==M.type(n)&&(n=M.parseJSON(n)),M.type(n)){case"array":i=n[0];break;
case"object":i=n}e.addClass("s-working"),M.when(BlinkForms.submitData(t,a,i)).always(function(t,n,i){var u;
i&&"function"===M.type(i.promise)||(u=i,i=t,t=u),f.prop("disabled",!1),200===i.status&&t?T.store&&(clearPendingForm(o,a,s),e.remove()):e.toggleClass("s-working s-error"),r.resolve()
})}),r.promise()):(BMP.alert("Error: this record requires an Interaction that not currently available"),void 0)
};if("submit-all"===p){if(!A.isOnline)return BMP.alert(d,{title:"Forms Queue"}),void 0;
BMP.confirm(h,{title:"Forms Queue"}).then(function(e){e&&(n=new BlinkDispatch(197),r=f.closest(".box, .view"),r.find('[data-blink="active-form"][data-id]').each(function(e,t){n.add(function(){return y(M(t))
})}))})}else i=f.closest('[data-blink="active-form"]'),o=i.data("version"),a=i.data("id"),s=a.split(":"),u=s[0],c=s[1],l=s[2],2===o?"clear"===p?BMP.confirm(g,{title:"Forms Queue"}).then(function(e){e&&M.when(clearPendingForm(u,c,l)).then(function(){i.remove()
})}):"resume"===p?(t="/"+C.answerSpace+"/"+C.config["i"+u].pertinent.name+"/?_uuid="+l,m.pushState({m:currentMasterCategory,c:currentCategory,i:u,arguments:{pendingForm:a}},null,t)):"submit"===p&&y(i):1===o&&("clear"===p?BMP.confirm(g,{title:"Forms Queue"}).then(function(e){e&&M.when(clearPendingFormV1(u,l)).then(function(){i.remove()
})}):"submit"===p&&M.when(T.pendingV1Store.get(u+":"+l)).fail(function(){BMP.alert("Unable to retrieve record from storage.",{title:"Forms Queue"})
}).then(function(e){e=M.parseJSON(e),submitFormWithRetry(e)}))}function f(){return T.runningTasks++,M("#startUp").size()>0?!0:"number"==typeof T.activityIndicatorTimer?!0:(T.activityIndicatorTimer=setTimeout(function(){clearTimeout(T.activityIndicatorTimer),T.activityIndicatorTimer=null,M(T.activityIndicator).show()
},1e3),!0)}function p(){return T.runningTasks>0&&T.runningTasks--,0>=T.runningTasks&&(null!==T.activityIndicatorTimer&&clearTimeout(T.activityIndicatorTimer),T.activityIndicatorTimer=null,M(T.activityIndicator).hide()),!0
}function d(){var t=M("#startUp"),r=M("#masterCategoriesView"),n=M("#categoriesView"),i=M("#keywordListView"),o=C.queryParameters._t;
if(delete C.queryParameters._t,t.size()>0&&C.config!==void 0){switch((-1!==M.inArray("phone",A.features)||768>M(e).width())&&M("#mainLabel").remove(),currentConfig=C.config["a"+C.id].pertinent,C.config["a"+C.id].pertinent.siteStructure){case"interactions only":r.remove(),n.remove();
break;case"categories":r.remove(),i.find(".welcomeBox").remove();break;case"master categories":n.find(".welcomeBox").remove(),i.find(".welcomeBox").remove()
}M("#answerSpacesListView").remove(),T.gotoDefaultScreen(),M.when(restoreSessionProfile(o)).always(function(){var e,t=resolveItemName(C.queryParameters.keyword);
C.config["a"+C.id].pertinent,delete C.queryParameters.keyword,t&&!M.isEmptyObject(C.queryParameters)?(e="/"+C.answerSpace+"/"+C.config["i"+t].pertinent.name+"/?"+M.param(C.queryParameters),m.pushState({i:t,arguments:C.queryParameters},null,e)):t?(e="/"+C.answerSpace+"/"+C.config["i"+t].pertinent.name+"/?",m.pushState({i:t},null,e)):"string"==typeof C.queryParameters._c?(e="/"+C.answerSpace+"/?_c="+C.queryParameters._c,m.pushState({c:C.queryParameters._c},null,e)):"string"==typeof C.queryParameters._m&&(e="/"+C.answerSpace+"/?_m="+C.queryParameters._m,m.pushState({m:C.queryParameters._m},null,e)),delete C.queryParameters
})}t.remove(),M("#content").show(),setSubmitCachedFormButton(),processForms(),T.device.persistentStorage&&(T.dfrdMoJOs=processMoJOs())
}function g(){var e=T.device.persistentStorage;log("loaded():");try{e&&T.store.set("answerSpace",C.answerSpace),M.when(e?T.siteStore.get("config"):!0).then(function(e){"string"==typeof e&&(e=M.parseJSON(e)),"object"===M.type(e)&&(C.config=e)
}).always(function(){M.when(e?T.siteStore.get("map"):!0).then(function(e){"string"==typeof e&&(e=M.parseJSON(e)),"object"===M.type(e)&&(C.map=e)
}).always(function(){M.when(requestLoginStatus()).always(function(){M.when(requestConfig()).always(function(){C.map&&C.config?(processConfig(),d(),Modernizr.orientation&&k.on("orientationchange",u),k.on("resize",u),u()):_.append("error: unable to contact server, insufficient data found in local storage")
})})})}),M.when(e?T.store.get("starsProfile"):!0).then(function(e){"string"===M.type(e)&&(e=M.parseJSON(e)),"object"===M.type(e)&&(starsProfile=e)
}),M("#startUp-initLoaded").addClass("success")}catch(t){log("loaded(): exception:"),log(t),M("#startUp-initLoaded").addClass("error"),_.append("loading error: "+t)
}}function h(){var t,i,o=null,a=[],s=E.userAgent;if(log("init_main(): "),C.requestsCounter=0,PictureSourceType.PHOTO_LIBRARY=0,PictureSourceType.CAMERA=1,lastPictureTaken.image=new Hashtable,lastPictureTaken.currentName=null,M.fx.interval=27,T.dispatch=new BlinkDispatch(isBlinkGapDevice()?149:47),T.runningTasks=0,RegExp.quote=function(e){return e.replace(/([.?*+\^$\[\]\\(){}\-])/g,"\\$1")
},T.activityIndicator=S.getElementById("activityIndicator"),T.activityIndicatorTimer=null,T.$body.bind("taskBegun",f),T.$body.bind("taskComplete",p),T.$body.delegate('a:not([href="#"])',"click",onLinkClick),T.$body.delegate('a[href="#"]',"click",!1),T.$body.on("click",'[data-blink="active-form"] button',function(e){return e.preventDefault(),l(e),!1
}),_Blink.isPhantomJS||(k.bind("online",c),k.bind("offline",c),c()),isBlinkGapDevice()?(o=null,t=E.gap_database&&-1!==M.inArray("websqldatabase",BlinkStorage.prototype.available)?r():!0):-1!==s.indexOf("Android")&&(o="sessionstorage"),isBlinkGapDevice()&&T.device.domainWhitelist&&e.navigator.whitelistmanage&&(i=T.device.domainWhitelist,"array"===M.type(i))){log("BlinkGap: replacing domain whitelist...");
try{E.whitelistmanage.appendToWhitelist(M.noop,M.noop,{externalHosts:i})}catch(u){log("BlinkGap: domain whitelist error..."),error(u)
}log("BlinkGap: domain whitelist replaced!")}M.when(t).always(function(){if(T.device.persistentStorage)try{T.store=new BlinkStorage(o,C.answerSpace,"jstore"),a.push(T.store.ready()),T.siteStore=new BlinkStorage(o,C.answerSpace,"site"),a.push(T.siteStore.ready()),T.pendingStore=new BlinkStorage(null,C.answerSpace,"pending"),a.push(T.pendingStore.ready()),T.pendingV1Store=new BlinkStorage(null,C.answerSpace,"pendingV1"),a.push(T.pendingV1Store.ready())
}catch(e){return _.addClass("s-error"),M("#startUp-initMain").addClass("error"),e.toString&&_.children("output").text(""+e),_.children('article[data-name="persistentfull"]').show(),void 0
}M.whenArray(a).fail(function(){throw M("#startUp-initMain").addClass("error"),"initMain(): unable to initialise device storage"
}).then(function(){M.when(n()).always(function(){M("#startUp-initMain").addClass("success"),M("#startUp-initLoaded").addClass("working"),g(),log("loaded(): returned after call by BlinkStorage")
})}),log("init_main(): finished...")})}function y(){var r=M("#startUp");log("onBrowserReady: "+e.location.href);
try{m=e.History,v=m.pushState,m.pushState=function(){var e=M.makeArray(arguments);
e.length>=1&&(e[0]=i(e[0])),e.length>=3&&(e[2]=i(e[2])),v.apply(m,e)},w=m.replaceState,m.replaceState=function(){var e=M.makeArray(arguments);
e.length>=1&&(e[0]=i(e[0])),e.length>=3&&(e[2]=i(e[2])),w.apply(m,e)},log("domain="+C.serverDomain+" branch="+C.serverAppBranch+" version="+C.serverAppVersion+" device="+A.device),C.serverAppPath="/_"+C.serverAppBranch+"_/common/"+C.serverAppVersion,C.serverDevicePath="/_"+C.serverAppBranch+"_/"+A.device+"/"+C.serverAppVersion,C.queryParameters=getURLParameters(),delete C.queryParameters.uid,delete C.queryParameters.answerSpace,T.$html=M("html"),T.$body=T.$html.children("body"),T.$document=M(e.document),T.$window=k,T.$footer=T.$body.children("footer"),k.on("statechange",function(e){var t=m.getState(),r=t.data.arguments;
try{log("History.stateChange: "+M.param(t.data)+" "+t.url),"object"!==M.type(C.config)||M.isEmptyObject(currentConfig)?M.noop():t.data.storage?showPendingView():C.hasLogin&&t.data.login?showLoginView():hasInteractions&&t.data.i?M.isEmptyObject(r)||r.inputs?gotoNextScreen(t.data.i):showAnswerView(t.data.i,r):hasCategories&&t.data.c?showKeywordListView(t.data.c):hasMasterCategories&&t.data.m?showCategoriesView(t.data.m):hasMasterCategories?showMasterCategoriesView():hasCategories?showCategoriesView():answerSpaceOneKeyword?gotoNextScreen(C.map.interactions[0]):showKeywordListView()
}catch(n){n("Error in onStateChange handler...")}return e.preventDefault(),!1}),-1!==location.href.indexOf("index.php?answerSpace=")&&m.replaceState(null,null,"/"+C.answerSpace+"/"),null!==S.getElementById("loginButton")&&(C.hasLogin=!0),M.when(t()).then(function(){isBlinkGapDevice()&&"function"===M.type(onDeviceReady)&&onDeviceReady()
}).always(function(){T.browserDeferred.resolve()}),M("#startUp-initBrowser").addClass("success")
}catch(n){log("onBrowserReady: Exception"),log(n),r.append("browser error: "+n),M("#startUp-initBrowser").addClass("error")
}}var m,v,w,b,S=e.document,C=e.siteVars,A=e.deviceVars,T=e.MyAnswers,M=e.jQuery,_=M("#startUp"),E=e.navigator,k=M(e);
T.onGoogleMapsLoad=function(){setTimeout(function(){e.google!==void 0&&e.google.maps!==void 0&&e.google.maps.Map!==void 0?T.dfrdGoogleMaps.resolve():T.dfrdGoogleMaps.reject()
},197)},T.getGeoLocation=function(e){var t=new M.Deferred,r={enableHighAccuracy:!0,maximumAge:3e5,timeout:5e3};
return Modernizr.geolocation?(e=M.extend({},r,M.isPlainObject(e)?e:{}),E.geolocation.getCurrentPosition(function(e){var r;
e.coords?(r={latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:e.coords.altitude,accuracy:e.coords.accuracy,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,speed:e.coords.speed},t.resolve(r)):t.reject("GeoLocation error: blank location from browser / device")
},function(e){var r;switch(e.code){case e.PERMISSION_DENIED:r="user has not granted permission";
break;case e.PERMISSION_DENIED_TIMEOUT:r="user did not grant permission in time";
break;case e.POSITION_UNAVAILABLE:r="unable to determine position";break;default:r="unknown error"
}t.reject("GeoLocation error: "+r)},e),t.promise()):(t.reject("GeoLocation error: unsupported in this browser / device"),t.promise())
},T.setupGoogleMaps=function(t){var r,n,i,o=t.find("div.googlemap").first(),u=o.data(),c=o[0];
T.$body.trigger("taskBegun"),b=e.google,r=new b.maps.Map(c),"directions"===u.mapAction?s(c,u,r):a(c,u,r),Modernizr.geolocation&&(n=new b.maps.Marker({map:r,icon:C.serverAppPath+"/images/location24.png",title:"you are here"}),i=new b.maps.InfoWindow,M.when(T.getGeoLocation()).then(function(e){n.setPosition(new b.maps.LatLng(e.latitude,e.longitude))
}),b.maps.event.addListener(n,"click",function(){i.setContent(n.getTitle()),i.open(r,n)
})),T.$body.trigger("taskComplete")},T.bootPromises=[T.deviceDeferred.promise(),T.browserDeferred.promise(),T.mainDeferred.promise()],M.whenArray(T.bootPromises).done(function(){log("all promises kept, initialising...");
try{M("#startUp-initMain").addClass("working"),h(),M("#startUp-initDevice").addClass("working"),init_device()
}catch(t){log("exception in init_?():"),log(t),_.append("initialisation error: "+t)
}log("User-Agent: "+e.navigator.userAgent),delete T.bootPromises,delete T.deviceDeferred,delete T.browserDeferred,delete T.mainDeferred
}).fail(function(){log("init failed, not all promises kept")}),M(S).ready(function(){var t,r=E.userAgent;
if(-1!==r.indexOf("Safari")&&e.localStorage){t="SafariTest-"+Math.random()*Math.pow(10,16);
try{e.localStorage.setItem(t,t),e.localStorage.removeItem(t)}catch(n){return _.addClass("s-error"),n.toString&&_.children("output").text(""+n),_.children('article[data-name="privatesafari"]').show(),void 0
}}M("#startUp-loadPolyFills").addClass("working"),M.ajaxPrefilter(function(e,t,r){var n=decodeURI(e.url),i={answerSpaceId:C.id,answerSpace:C.answerSpace,conditions:A.features};
n.length>100&&(n=n.substring(0,100)+"..."),r.setRequestHeader("X-Blink-Config",JSON.stringify(i)),r.setRequestHeader("X-Blink-Statistics",M.param({requests:++C.requestsCounter})),e.cache="true",log("AJAX start: "+n)
}),M.getScripts=function(e){var t=new M.Deferred;return"array"!==M.type(e)?t.reject():e.length?M.getCachedScript(e.shift()).fail(t.reject).then(function(){M.getScripts(e).fail(t.reject).then(t.resolve)
}):t.resolve(),t.promise()},M.when(T.mainDeferred.promise()).then(function(){var t,r,n=new M.Deferred;
t=e.JSON&&e.JSON.stringify?!0:M.getCachedScript(_Blink.cdnp.getURL("json2.min.js")),e.XSLTProcessor&&Modernizr.xpath?(log("XPath supported natively"),n.resolve()):e.xpathParse?(log("XPath supported via AJAXSLT"),n.resolve()):M.getScripts([_Blink.cdnp.getURL("ajaxslt/0.8.1-r61/xmltoken.min.js"),_Blink.cdnp.getURL("ajaxslt/0.8.1-r61/util.min.js"),_Blink.cdnp.getURL("ajaxslt/0.8.1-r61/dom.min.js"),_Blink.cdnp.getURL("ajaxslt/0.8.1-r61/xpath.min.js")]).fail(n.reject).then(n.resolve),e.XSLTProcessor?(log("XSLT supported natively"),r=!0):e.xsltProcess?(log("XSLT supported via AJAXSLT"),r=!0):r=n.pipe(function(){return M.getCachedScript(_Blink.cdnp.getURL("ajaxslt/0.8.1-r61/xslt.min.js"))
}),M.when(t,n.promise(),r).fail(function(){M("#startUp-loadPolyFills").addClass("error"),M("#startUp").append("<p>error: refresh the application or clear cache and try again</p>")
}).then(function(){M("#startUp-loadPolyFills").addClass("success"),M("#startUp-initBrowser").addClass("working"),setTimeout(y,e.device?2e3:193)
})})})}(this),document.getElementById("startUp-loadMain").className="working success",MyAnswers.mainDeferred.resolve();

//@ sourceMappingURL=/_R_/android/3/bic2.js.map