var Hashtable=function(){function e(t){var n;if("string"==typeof t)return t;if(typeof t.hashCode==l)return n=t.hashCode(),"string"==typeof n?n:e(n);
if(typeof t.toString==l)return""+t;try{return t+""}catch(r){return Object.prototype.toString.call(t)
}}function t(e,t){return e.equals(t)}function n(e,t){return typeof t.equals==l?t.equals(e):e===t
}function r(e){return function(t){if(null===t)throw Error("null is not a valid "+e);
if(t===void 0)throw Error(e+" must not be undefined")}}function i(e,t,n,r){this[0]=e,this.entries=[],this.addEntry(t,n),null!==r&&(this.getEqualityFunction=function(){return r
})}function o(e){return function(t){for(var n,r=this.entries.length,i=this.getEqualityFunction(t);r--;)if(n=this.entries[r],i(t,n[0]))switch(e){case h:return!0;
case v:return n;case y:return[r,n[1]]}return!1}}function a(e){return function(t){for(var n=t.length,r=0,i=this.entries.length;i>r;++r)t[n+r]=this.entries[r][e]
}}function s(e,t){for(var n,r=e.length;r--;)if(n=e[r],t===n[0])return r;return null
}function u(e,t){var n=e[t];return n&&n instanceof i?n:null}function c(t,n){var r=this,o=[],a={},h=typeof t==l?t:e,v=typeof n==l?n:null;
this.put=function(e,t){p(e),d(t);var n,r,s=h(e),c=null;return n=u(a,s),n?(r=n.getEntryForKey(e),r?(c=r[1],r[1]=t):n.addEntry(e,t)):(n=new i(s,e,t,v),o[o.length]=n,a[s]=n),c
},this.get=function(e){p(e);var t=h(e),n=u(a,t);if(n){var r=n.getEntryForKey(e);if(r)return r[1]
}return null},this.containsKey=function(e){p(e);var t=h(e),n=u(a,t);return n?n.containsKey(e):!1
},this.containsValue=function(e){d(e);for(var t=o.length;t--;)if(o[t].containsValue(e))return!0;
return!1},this.clear=function(){o.length=0,a={}},this.isEmpty=function(){return!o.length
};var y=function(e){return function(){for(var t=[],n=o.length;n--;)o[n][e](t);return t
}};this.keys=y("keys"),this.values=y("values"),this.entries=y("getEntries"),this.remove=function(e){p(e);
var t,n=h(e),r=null,i=u(a,n);return i&&(r=i.removeEntryForKey(e),null!==r&&(i.entries.length||(t=s(o,n),f(o,t),delete a[n]))),r
},this.size=function(){for(var e=0,t=o.length;t--;)e+=o[t].entries.length;return e
},this.each=function(e){for(var t,n=r.entries(),i=n.length;i--;)t=n[i],e(t[0],t[1])
},this.putAll=function(e,t){for(var n,i,o,a,s=e.entries(),u=s.length,c=typeof t==l;u--;)n=s[u],i=n[0],o=n[1],c&&(a=r.get(i))&&(o=t(i,a,o)),r.put(i,o)
},this.clone=function(){var e=new c(t,n);return e.putAll(r),e}}var l="function",f=typeof Array.prototype.splice==l?function(e,t){e.splice(t,1)
}:function(e,t){var n,r,i;if(t===e.length-1)e.length=t;else for(n=e.slice(t+1),e.length=t,r=0,i=n.length;i>r;++r)e[t+r]=n[r]
},p=r("key"),d=r("value"),h=0,v=1,y=2;return i.prototype={getEqualityFunction:function(e){return typeof e.equals==l?t:n
},getEntryForKey:o(v),getEntryAndIndexForKey:o(y),removeEntryForKey:function(e){var t=this.getEntryAndIndexForKey(e);
return t?(f(this.entries,t[0]),t[1]):null},addEntry:function(e,t){this.entries[this.entries.length]=[e,t]
},keys:a(0),values:a(1),getEntries:function(e){for(var t=e.length,n=0,r=this.entries.length;r>n;++n)e[t+n]=this.entries[n].slice(0)
},containsKey:o(h),containsValue:function(e){for(var t=this.entries.length;t--;)if(e===this.entries[t][1])return!0;
return!1}},c}();(function(e){"use strict";var t,n=(e.BMP,{}),r={};n.createObjectURL=function(e,n){var i=t();
return!(!n||!n.autoRevoke)||!1,r[i]=e,"blob:"+i},n.revokeObjectURL=function(e){var t=e.replace("blob:","");
delete r[t]},n.retrieveObject=function(e){var t=e.replace("blob:","");return r[t]
},n.revokeAllObjectURLs=function(){r={}},t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"===e?t:8|3&t;
return n.toString(16)})},e.BMP=e.BMP||{},e.BMP.URL=n})(this),function(e){"use strict";
var t,n;e.BMP=e.BMP||{},t=e.BMP,t.MIME=t.MIME||{},n=t.MIME,n.TEXT_TYPES=["application/javascript","application/json","application/x-javascript"],n.isText=function(e){return 0===e.indexOf("text/")?!0:-1!==n.TEXT_TYPES.indexOf(e)?!0:!1
}}(this),function(e){"use strict";var t,n,r,i,o=!0;e.BMP.MIME;try{t=new e.Blob,t=null
}catch(a){o=!1}i=function(t){var n,r="",i=new e.Uint8Array(t),o=i.byteLength;for(n=0;o>n;n++)r+=String.fromCharCode(i[n]);
return e.btoa(r)},n=function(e,t){var n;if(e&&!Array.isArray(e))throw Error("first argument should be an Array");
return t=t||{},this.size=0,this.type="",this.base64="",this.text="","object"==typeof t&&(this.type=t.type||this.type),e&&e.length&&(n=e[0],"string"==typeof n&&(0===n.indexOf("data:")&&"text/plain"===this.type?(this.size+=n.length,this.text+=n):(this.size+=n.length,this.base64+=n))),this
},n.createNative=function(t,r){var i;return r=r||{},o?new e.Blob(t,r):e.BlobBuilder?(i=new e.BlobBuilder,i.append(t),i.getBlob(r)):new n(t,r)
},n.fromBlobURL=function(t,r,i){r=r||function(){},i=i||function(){},e.URL&&e.URL.createObjectURL?n.nativelyFromBlobURL(t,r,i):this.fromNativeBlob(e.BMP.URL.retrieveObject(t),function(e){r(e)
},function(e){i(e)})},n.fromNativeBlob=function(t,r,i){var o=new e.FileReader;r=r||function(){},i=i||function(){},o.onload=function(e){var a;
o.onload=null;try{if(a=e.target.result,t=n.fromDataURI(e.target.result),!t)throw Error("Blob.fromNativeBlob: fromDataURI gave no blob")
}catch(s){return i(s),void 0}r(t)},o.onerror=function(e){o.onerror=null,i(e.target.error)
};try{o.readAsDataURL(t)}catch(a){o.onload=null,o.onerror=null,i(a)}},n.fromDataURI=function(t){var r,i,o,a,s=new n;
r=t.split(","),a=r[1],r=r[0].split(":"),r=r[1].split(";"),i=r[0],o=r[1],"base64"===o?s.base64=a:s.text=a,s.type=i,s.size=a.length;
try{s=n.fromDataURI(e.atob(s.base64)),s.makeNested()}catch(u){}return s},n.nativelyFromBlobURL=function(t,r,o){var a,s;
r=r||function(){},o=o||function(){},a=new e.XMLHttpRequest,a.onreadystatechange=function(){var t,a,u;
this.readyState===e.XMLHttpRequest.DONE&&(this.onreadystatechange=null,t=this.getResponseHeader("Content-Type"),200===this.status?("arraybuffer"===this.responseType?(a=i(this.response),s=new n([a],{type:t})):"blob"===this.responseType?n.fromNativeBlob(this.response,function(e){r(e)
},function(e){o(e)}):"document"===this.responseType?(u=new e.XMLSerializer,a=e.btoa(u.serializeToString(this.response)),s=new n([a],{type:t})):"json"===this.responseType?(a=e.btoa(JSON.stringify(this.response)),s=new n([a],{type:t})):s=new n([this.response],{type:t}),s?r(s):o(Error("error retrieving target Blob via Blob URL"))):o(Error(this.url+" -> "+this.status)))
},a.open("GET",t),a.send()},n.isNested=function(){},n.prototype.makeNested=function(){var e="data:";
e+=this.type,e+=";base64,",e+=this.base64,this.type="text/plain",this.text=e,this.base64=null
},n.prototype.undoNested=function(){var e=n.fromDataURI(this.text);this.type=e.type,this.base64=e.base64,this.text=null
},n.prototype.toNative=function(){return e.BMP.Blob.createNative([e.atob(this.base64)],{type:this.type})
},e.BMP=e.BMP||{},e.BMP.Blob=n,e.BMP.NestedBlob=r}(this),function(e){"use strict";
var t,n,r,i=e.Modernizr,o=e.document,a=e.jQuery;return i?(i.addTest("filereader",function(){return!!(e.File&&e.FileList&&e.FileReader)
}),i.addTest("positionfixed",function(){var t,n,r=o.createElement("div"),i=!1,s=o.body||function(){return i=!0,o.documentElement.appendChild(o.createElement("body"))
}(),u=s.style.cssText;return s.style.cssText="height: 3000px; margin: 0; padding; 0;",r.style.cssText="position: fixed; top: 100px",s.appendChild(r),e.scrollTo(0,500),n=a(r).offset(),t=600===n.top,t||void 0===r.getBoundingClientRect||(t=100===r.getBoundingClientRect().top),s.removeChild(r),s.style.cssText=u,e.scrollTo(0,1),i&&o.documentElement.removeChild(s),t
}),i.addTest("xpath",function(){var t=a.parseXML("<xml />");return!!e.XPathResult&&!!t.evaluate
}),i.addTest("documentfragment",function(){var e,t,n;try{return n=o.createElement("p"),e=o.createDocumentFragment(),t=o.createDocumentFragment(),t.appendChild(n),e.appendChild(t),n.parentNode!==e?!1:t.parentNode===e?!1:!0
}catch(r){return!1}}),i.inputtypes.file=function(){var e,t=navigator.userAgent,n=-1!==t.indexOf("Android"),r=n&&/Android 2\.(0|1)/.test(t);
return n&&(-1!==t.indexOf("Android 1.")||r)?!1:(e=o.createElement("input"),e.setAttribute("type","file"),e.disabled===!1)
}(),i.inputtypes.number=function(){var e,t;return i.inputtypes.number?(e=a('<input type="number" />'),e.val(1.5),t=e[0].checkValidity(),e.remove(),t):!1
}(),i.canvas&&(t=new Image,n=o.createElement("canvas"),r=n.getContext("2d"),t.onload=function(){r.drawImage(t,0,0),i.addTest("canvastodataurlpng",function(){return 0===n.toDataURL("image/png").indexOf("data:image/png")
}),i.addTest("canvastodataurljpeg",function(){return 0===n.toDataURL("image/jpeg").indexOf("data:image/jpeg")
}),i.addTest("canvastodataurlwebp",function(){return 0===n.toDataURL("image/webp").indexOf("data:image/webp")
})},t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="),void 0):(e.warn("Blink Modernizr tests need Modernizr to be included first."),void 0)
}(this),function(e){"use strict";var t=e.jQuery,n=e.Math;e.isBlinkGapDevice=function(){return e.PhoneGap&&"object"===t.type(e.device)&&e.device instanceof e.Device
},e.computeTimeout=function(e){var t=1e3/600;return n.floor(e*t+15e3)}}(this),function(e){"use strict";
var t,n=e.jQuery,r=n(e.document),i={history:[]},o=["log","error","warn","info"],a=function(){r.off("ready deviceready",a),setTimeout(function(){t=e.console||e.debug||{log:n.noop},n.each(o,function(r,i){var o=n.type(t[i]);
e[i]="function"===o?function(){t[i].apply(t,arguments)}:"object"===o?function(e){t[i](e)
}:"log"!==i?e.log:n.noop}),n.each(i.history,function(r,i){var o=e[i.fn],a=n.type(o);
"function"===a?o.apply(t,i.args):"object"===a&&o(i.args[0])}),delete i.history,n.each(o,function(e,t){delete i[t]
})},0)},s=function(){e.PhoneGap&&e.PhoneGap.available?i.history&&a():setTimeout(s,197)
};t=i,n.each(o,function(r,o){i[o]=function(){i.history.push({fn:o,args:n.makeArray(arguments)})
},e[o]=t[o]}),e.isBlinkGap?s():r.on("ready",a)}(this),function(e){var t=e.String;
t.prototype.hasEntities=function(){var e=this;return-1===e.indexOf("&")?!1:void 0
},t.prototype.repeat=function(e){var t,n="";for(t=0;e>t;t++)n+=this;return n}}(this),function(e){"use strict";
var t=e.Math,n=t.round;t.round=function(e,r){var i;return r&&0!==r?(i=t.pow(10,r),"number"==typeof r&&r>0&&(e=t.round(e*i)/i),e):n(e)
},"function"!=typeof t.uuid&&(t.uuid=function(){var e,n=t.uuid.CHARS,r=[],i=36;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4";i--;)r[i]||(e=0|16*t.random(),r[i]=n[19===i?8|3&e:e]);
return r.join("")},t.uuid.CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"])
}(this),function(e){"use strict";function t(e,t){var r=!0;return e&&"object"===n.type(e)?"array"===n.type(t)?(n.each(t,function(t,n){return e[n]===void 0?(r=!1,!1):!0
}),r):"object"===n.type(t)?(n.each(t,function(t,i){return n.type(e[t])!==i?(r=!1,!1):!0
}),r):!1:!1}var n=e.jQuery,r=n.fn.attr,i=n.fn.show;n.isObject=function(e){return"object"===n.type(e)
},n.isPromise=function(e){var n="function",r={always:n,done:n,fail:n,pipe:n,progress:n,promise:n,state:n,then:n};
return t(e,r)},n.isDeferred=function(e){var r="function",i={notify:r,notifyWith:r,reject:r,rejectWith:r,resolve:r,resolveWith:r};
return n.isPromise(e)?t(e,i):!1},n.fn.attr=function(){var e,t,i;return this[0]&&0===arguments.length?(i={},t=this[0].attributes,e=t.length,n.each(t,function(e,t){var n=t.name||t.nodeName,r=t.value||t.nodeValue;
n&&(i[n.toLowerCase()]=r)}),i):r.apply(this,arguments)},n.fn.show=function(){return this.removeAttr("hidden"),this.removeClass("hidden"),i.apply(this,arguments)
},n.fn.isHidden=function(){return this.prop("hidden")||this.hasClass("hidden")?!0:this[0]&&this[0].style&&"none"===this[0].style.display
},n.fn.tag=function(){var e;return this.length>0?(e=this[0].nodeName||this[0].tagName||"",e.toLowerCase()):""
},n.fn.tagHTML=function(){var e,t=n(this);return this[0]?(e="<"+t.tag(),n.each(t.attr(),function(t,n){e+=" "+t+'="'+n+'"'
}),e+=" />"):void 0},n.whenArray=function(e){return n.when.apply(n,e)},n.resolveTimeout=function(){var e=n.makeArray(arguments),t=e.shift();
return setTimeout(function(){t.resolve.apply(t,e)},0),this},n.fn.appendWithCheck=function(t,r,i,o){var a=n(this),s=new n.Deferred,u=e.MyAnswers;
return"string"!==n.type(i)&&(i=t.match(/>([^<>\0\n\f\r\t\v]+)</),i||(i=t.match(/(\w+)/)),i="array"===n.type(i)?i[0]:t),"number"!==n.type(o)&&u.dispatch.add(function(){o=a.html().lastIndexOf(i)
}),u.dispatch.add(function(){a.append(t)}),u.dispatch.add(function(){var e=a.html();
"string"!==n.type(e)||!e||e.lastIndexOf(i)>o?s.resolve():r>0?n.when(a.appendWithCheck(t,--r,i,o)).fail(s.reject).then(s.resolve):s.reject()
}),s.promise()},n.fn.childrenAsProperties=function(){var e={};return n(this).children().each(function(t,r){var i=n(r),o=i.tag(),a=i.text();
o.length>0&&a.length>0&&(e[o]=a)}),e},n.getCachedScript=function(e,t){return t=n.extend(t||{},{dataType:"script",cache:!0,url:e}),n.ajax(t)
}}(this),function(e){"use strict";var t=e.jQuery,n=e._Blink,r=e._SERVER,i={PREFIX_GZ:"/_c_/",SUFFIX_GZ:"",PREFIX:"/_c_/",SUFFIX:""},o=["css","js"],a=function(e){var a;
return a=n&&n.cfg&&n.cfg.CDN_PLATFORM,a=t.isObject(a)?a:{},a=t.extend({},i,a),e=e||r&&r.HTTP_ACCEPT_ENCODING,e="string"==typeof e?e:"",-1===e.indexOf("gzip")&&(a.PREFIX_GZ=a.PREFIX,a.SUFFIX_GZ=a.SUFFIX),this.getURL=function(e){var n;
return e&&"string"==typeof e?(e=t.trim(e),e=e.replace(/^\/*/,""),n=e.match(/\.?(\w+)$/),n="array"===t.type(n)?n[1]:"",n&&-1!==t.inArray(n,o)?a.PREFIX_GZ+e+a.SUFFIX_GZ:a.PREFIX+e+a.SUFFIX):""
},this};n.preloadPage=function(e){var n,r=t("<iframe></iframe>"),i=30,o=function(){r.remove()
},a=function(){i--,t(n.document.body).hasClass("s-ready")?o():0>i?(warn('preloadPage(): timed out waiting for "s-ready"'),o()):setTimeout(a,2e3)
};r.attr({height:10,width:10,src:e}),r.css({position:"absolute",top:"-50px",left:"-50px"}),t("body").append(r),n=r[0].contentWindow,t.isWindow(n)&&n.document?t(n.document.body).hasClass("s-ready")?o():setTimeout(a,2e3):warn("preloadPage(): unable to find Window or Document in <iframe>")
},n.stringifyDOM=function(t){var n;return t.xml?t.xml:e.XMLSerializer?(n=new e.XMLSerializer,n.serializeToString(t)):null
},n.hasFontFor=function(r){var i,o,a,s,u=n.hasFontFor;try{u.results||(u.results={}),"boolean"==typeof u.results[r]?i=u.results[r]:(o=t(e.document.body),a=t("<span>"+r+"</span>"),s=t("<span>&#xFFFD;</span>"),a.add(s).appendTo(o),i=a.innerWidth()!==s.innerWidth(),u.results[r]=i,a.add(s).remove())
}catch(c){error(error),i=!1}return i},e._Blink.cdnp=new a}(this),function(e){"use strict";
var t=e.jQuery,n=function(e){function n(){if(!i.isPaused&&null===r&&0!==i.queue.length){var e,o=i.queue.shift();
"function"==typeof o&&(e=o()),"function"==typeof t&&t()instanceof t&&e&&"object"==typeof e&&e.promise&&"function"==typeof e.promise?(r=0,t.when(e).always(function(){r=setTimeout(function(){r=null,n()
},i.interval)})):r=setTimeout(function(){r=null,n()},i.interval)}}var r=null,i=this;
return this.queue=[],this.interval=e||0,this.isPaused=!1,this.poke=function(){n()
},this.pause=function(){clearTimeout(r),r=null,this.isPaused=!0},this.resume=function(){this.isPaused=!1,n()
},this};n.prototype.add=function(e){this.queue.push(e),this.poke()},e.BlinkDispatch=n
}(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(n){return e.BMP=t(e,n),e.BMP
}):e.BMP=t(e,e.$)}(this,function(e,t){"use strict";var n,r,i,o,a,s,u=t(e.document),c=t(e.document.body),l=e.navigator||{},f={};
return n=e.BMP=e.BMP||{},t&&t.fn&&"string"==typeof t.fn.jquery?(i=function(){var e=t('<div id="bmp-dialog-async"></div>');
return e.hide(),c.append(e),e},f.jQueryUI=function(e,t){r=c.find("#bmp-dialog-async"),r.length||(r=i()),r.empty(),r.hasClass("ui-dialog-content")&&r.dialog("destroy"),r.append("<p>"+e+"</p>"),t.modal=!0,t.closeOnEscape=!0,r.dialog(t)
},o=function(){return t.fn.dialog},a=function(){return t.mobile&&t.fn.dialog},n.alertNoQueue=function(n,r){var i,a=new t.Deferred,s=l.notification||{},u=s.alert;
return r=r||{},r.ok="OK",i=function(){a.resolve()},"function"===t.type(u)?(r.title="Alert",u(n,i,r.title,r.ok)):o()?(r.title="Alert",r.buttons={},r.buttons[r.ok]=function(){t(this).dialog("close")
},r.close=i,f.jQueryUI(n,r)):(n=(r.title?r.title+" | ":"")+n,e.alert(n),a.resolve()),a.promise()
},n.confirmNoQueue=function(n,r){var i=new t.Deferred,a=l.notification||{},s=a.alert;
return r=r||{},r.ok=r.ok||"OK",r.cancel=r.cancel||"Cancel","function"===t.type(s)?(r.title=r.title||"Confirm",s(n,function(e){1===e?i.resolve(!0):i.resolve(!1)
},r.title,r.ok+","+r.cancel)):o()?(r.title=r.title||"Confirm",r.buttons={},r.buttons[r.cancel]=function(){t(this).dialog("close")
},r.buttons[r.ok]=function(){i.resolve(!0),t(this).dialog("close")},r.close=function(){i.isRejected()&&i.isResolved()||i.resolve(!1)
},f.jQueryUI(n,r)):(n=(r.title?r.title+" | ":"")+n,i.resolve(e.confirm(n))),i.promise()
},n.promptNoQueue=function(n,r,i){var a=new t.Deferred;return"string"!=typeof r&&(i=r,r=""),i=i||{},i.ok=i.ok||"OK",i.cancel=i.cancel||"Cancel",o()?(n+='</p><p><input type="text" value="'+r+'" />',i.title=i.title||"Prompt",i.buttons={},i.buttons[i.cancel]=function(){t(this).dialog("close")
},i.buttons[i.ok]=function(){var e=t(this);a.resolve(e.find("input").val()),e.dialog("close")
},i.close=function(){a.isRejected()&&a.isResolved()||a.resolve(null)},f.jQueryUI(n,i)):(n=(i.title?i.title+" | ":"")+n,a.resolve(e.prompt(n))),a.promise()
},s=function(e,n,r){return"string"==typeof n&&(n=e[n]),function(){var i=t.makeArray(arguments),o=new t.Deferred;
return u.queue(r,function(a){var s,c=t._data(u[0],r+"queue");return c.unshift("inprogress"),s=n.apply(e,i),s.then(function(){o.resolve.apply(o,t.makeArray(arguments)),c.shift(),a()
},function(){o.reject.apply(o,t.makeArray(arguments)),c.shift(),a()}),s}),u.queue(r).length&&"inprogress"!==u.queue(r)[0]&&u.dequeue(r),o.promise()
}},n.alert=s(this,n.alertNoQueue,"bmp-alerts"),n.confirm=s(this,n.confirmNoQueue,"bmp-alerts"),n.prompt=s(this,n.promptNoQueue,"bmp-alerts"),n):void 0
}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["underscore"],function(n){return e.BMP=t(e,n),e.BMP
}):e.BMP=t(e,e._)}(this,function(e,t){"use strict";var n,r,i;return n=e.BMP=e.BMP||{},r=n.BIC=n.BIC||{},i=function(e){this.cfg=e
},i.prototype.toCameraOptions=function(){var e,n={};if(t.isNumber(this.cfg.imageCaptureQuality)&&(n.quality=this.cfg.imageCaptureQuality),t.isNumber(this.cfg.imageCaptureScale)&&(n.imageScale=this.cfg.imageCaptureScale),t.isString(this.cfg.cameraOptions)){try{e=JSON.parse(this.cfg.cameraOptions),(!t.isObject(e)||t.isArray(e))&&(e={})
}finally{e=e||{}}t.extend(n,e)}return n},r.Config=i,n}),function(e){"use strict";
var t,n,r,i,o,a,s,u,c,l=e.jQuery,f=e.BMP,p=(f.alert,{}),d={},h=function(u,c,d){var h,v,y,g=this,m=new l.Deferred;
return("string"!=typeof c||1>c.length)&&(c="default"),("string"!=typeof d||1>d.length)&&(d="main"),"string"!=typeof u?u=t[0]:"sessionstorage"===u&&-1===l.inArray("sessionstorage",t)?u="memory":-1===l.inArray(u,t)&&(u=t[0]),g.type=u,g.partition=c,g.section=d,m.done(function(){a("BlinkStorage(): "+u+" -> "+c+" : "+d+" ready")
}),g.ready=function(){return m.promise()},"localstorage"===u||"sessionstorage"===u?(v="localstorage"===u?e.localStorage:e.sessionStorage,g.get=function(e){var t=new l.Deferred;
return t.resolve(v.getItem(c+":"+d+":"+e)),t.promise()},g.set=function(e,t){var n=new l.Deferred;
return v.setItem(c+":"+d+":"+e,t),n.resolve(),n.promise()},g.remove=function(e){var t=new l.Deferred;
return v.removeItem(c+":"+d+":"+e),t.resolve(),t.promise()},g.keys=function(){var e,t,n=new l.Deferred,r=[],i=v.length,o=c+":"+d+":";
for(e=0;i>e;e++)t=v.key(e),0===t.indexOf(o)&&r.push(t.replace(o,""));return n.resolve(r),n.promise()
},g.count=function(){var e=new l.Deferred;return l.when(g.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},m.resolve()):"websqldatabase"===u?(n=1024*1024*(e.device?5:.75),r=function(e,t){var n=t&&e.executeSql?t:e;
return s("BlinkStorage error1: "+n.code+" "+n.message),(3===n.code||4===n.code||7===n.code)&&f.alert(n.code+"\n"+n.message,{title:"Storage error!"}),!1
},i=function(){v.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS `"+d+"` (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",[],m.resolve,m.reject)
},r,l.noop)},o=function(){try{v=e.openDatabase(c,"1.0",c,n),p[c]=v,v.readTransaction=v.readTransaction||v.transaction
}catch(t){throw m.reject(),"BlinkStorage: "+t}},h={get:"SELECT v FROM `"+d+"` WHERE k = ?",set:"INSERT OR REPLACE INTO `"+d+"` (k, v) VALUES (?, ?)",remove:"DELETE FROM `"+d+"` WHERE k = ?",keys:"SELECT k FROM `"+d+"`",count:"SELECT count(k) AS `count` FROM "+d},p[c]?v=p[c]:o(),i(),g.get=function(e){var t=new l.Deferred;
return v.readTransaction(function(n){n.executeSql(h.get,[e],function(e,n){1===n.rows.length?t.resolve(n.rows.item(0).v):(t.resolve(null),n.rows.length>1&&s("BlinkStorage: SELECT returned multiple rows"))
},r)},r,l.noop),t.promise()},g.set=function(e,t,n){var i=new l.Deferred,o=new l.Deferred,a=function(){setTimeout(function(){l.when(g.set(e,t,n)).fail(i.reject).then(i.resolve)
},2e3)};return n="number"!=typeof n?2:n,0>=n--?(i.reject(),i.promise()):(setTimeout(function(){v.transaction(function(n){n.executeSql(h.set,[e,t],function(e,t){1!==t.rowsAffected?(s("BlinkStorage: INSERT did not affect 1 row"),a()):o.resolve()
},function(e,t){r(t),a()})},function(e,t){r(e,t),a()},function(){"pending"===o.state()?a():i.resolve()
})},0),i.promise())},g.remove=function(e){var t=new l.Deferred;return v.transaction(function(n){n.executeSql(h.remove,[e],function(){t.resolve()
})},r,l.noop),t.promise()},g.keys=function(){var e=new l.Deferred;return v.readTransaction(function(t){t.executeSql(h.keys,[],function(t,n){var r,i,o=n.rows.length,a=[];
for(r=0;o>r;r++)i=n.rows.item(r),a.push(i.k);e.resolve(a)})},r,l.noop),e.promise()
},g.count=function(){var e=new l.Deferred;return v.readTransaction(function(t){t.executeSql(h.count,[],function(t,n){var r=n.rows.item(0).count;
l.isNumeric(r)?e.resolve(parseInt(r,10)):(s("BlinkStorage: SELECT count(k) non-numeric"),e.reject())
})},r,l.noop),e.promise()}):"memory"===u&&(y={},g.get=function(e){var t=new l.Deferred;
return t.resolve(y[c+":"+d+":"+e]),t.promise()},g.set=function(e,t){var n=new l.Deferred;
return y[c+":"+d+":"+e]=t,n.resolve(),n.promise()},g.remove=function(e){var t=new l.Deferred;
return delete y[c+":"+d+":"+e],t.resolve(),t.promise()},g.keys=function(){var e,t=new l.Deferred,n=[],r=c+":"+d+":";
for(e in y)y.hasOwnProperty(e)&&0===e.indexOf(r)&&n.push(e.replace(r,""));return t.resolve(n),t.promise()
},g.count=function(){var e=new l.Deferred;return l.when(g.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},m.resolve()),this};return l?(l.each(["log","error","warn","info"],function(t,n){d[n]=function(){e[n]&&e[n].apply(e,arguments)
}}),a=d.log,s=d.error,u=d.warn,c=d.info,h.prototype.removeKeysRegExp=function(e){var t=this,n=new l.Deferred(function(n){l.when(t.keys()).done(function(r){var i,o=r.length,a=[];
for(i=0;o>i;i++)-1!==r[i].search(e)&&a.push(t.remove(r[i]));l.when(a).done(n.resolve())
})});return n.promise()},h.prototype.available=[],t=h.prototype.available,e.openDatabase!==void 0&&t.push("websqldatabase"),e.localStorage!==void 0&&t.push("localstorage"),e.sessionStorage!==void 0&&t.push("sessionstorage"),t.push("memory"),"function"==typeof e.log&&c("BlinkStorage(): available=["+t.join(",")+"]"),e.BlinkStorage=h,void 0):(f.alert("jQuery must be be loaded first",{title:"Storage error!"}),void 0)
}(this);
//@ sourceMappingURL=common.js.map