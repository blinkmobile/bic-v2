/*!
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/
(function(){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;
if("function"!=typeof t)throw new TypeError;var n=u.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};
o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(u.call(arguments)));return null!==a&&Object(a)===a?a:i
}return t.apply(e,n.concat(u.call(arguments)))};return r});var e,t,n,r,o,i=Function.prototype.call,a=Array.prototype,s=Object.prototype,u=a.slice,c=i.bind(s.toString),f=i.bind(s.hasOwnProperty);
if((o=f(s,"__defineGetter__"))&&(e=i.bind(s.__defineGetter__),t=i.bind(s.__defineSetter__),n=i.bind(s.__lookupGetter__),r=i.bind(s.__lookupSetter__)),Array.isArray||(Array.isArray=function(e){return"[object Array]"==c(e)
}),Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=b(this),n=arguments[1],r=0,o=t.length>>>0;
if("[object Function]"!=c(e))throw new TypeError;for(;o>r;)r in t&&e.call(n,t[r],r,t),r++
}),Array.prototype.map||(Array.prototype.map=function(e){var t=b(this),n=t.length>>>0,r=Array(n),o=arguments[1];
if("[object Function]"!=c(e))throw new TypeError;for(var i=0;n>i;i++)i in t&&(r[i]=e.call(o,t[i],i,t));
return r}),Array.prototype.filter||(Array.prototype.filter=function(e){var t=b(this),n=t.length>>>0,r=[],o=arguments[1];
if("[object Function]"!=c(e))throw new TypeError;for(var i=0;n>i;i++)i in t&&e.call(o,t[i],i,t)&&r.push(t[i]);
return r}),Array.prototype.every||(Array.prototype.every=function(e){var t=b(this),n=t.length>>>0,r=arguments[1];
if("[object Function]"!=c(e))throw new TypeError;for(var o=0;n>o;o++)if(o in t&&!e.call(r,t[o],o,t))return!1;
return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=b(this),n=t.length>>>0,r=arguments[1];
if("[object Function]"!=c(e))throw new TypeError;for(var o=0;n>o;o++)if(o in t&&e.call(r,t[o],o,t))return!0;
return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=b(this),n=t.length>>>0;
if("[object Function]"!=c(e))throw new TypeError;if(!n&&1==arguments.length)throw new TypeError;
var r,o=0;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in t){r=t[o++];
break}if(++o>=n)throw new TypeError}for(;n>o;o++)o in t&&(r=e.call(void 0,r,t[o],o,t));
return r}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=b(this),n=t.length>>>0;
if("[object Function]"!=c(e))throw new TypeError;if(!n&&1==arguments.length)throw new TypeError;
var r,o=n-1;if(arguments.length>=2)r=arguments[1];else for(;;){if(o in t){r=t[o--];
break}if(0>--o)throw new TypeError}do o in this&&(r=e.call(void 0,r,t[o],o,t));while(o--);
return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=b(this),n=t.length>>>0;
if(!n)return-1;var r=0;for(arguments.length>1&&(r=m(arguments[1])),r=r>=0?r:n-Math.abs(r);n>r;r++)if(r in t&&t[r]===e)return r;
return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(e){var t=b(this),n=t.length>>>0;
if(!n)return-1;var r=n-1;for(arguments.length>1&&(r=m(arguments[1])),r=r>=0?r:n-Math.abs(r);r>=0;r--)if(r in t&&e===t[r])return r;
return-1}),!Object.keys){var l=!0,p=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=p.length;
for(var d in{toString:null})l=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");
var t=[];for(var n in e)f(e,n)&&t.push(n);if(l)for(var r=0,o=h;o>r;r++){var i=p[r];
f(e,i)&&t.push(i)}return t}}Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e,t,n;
if(!isFinite(this))throw new RangeError;for(e=[this.getUTCFullYear(),this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],t=e.length;t--;)n=e[t],10>n&&(e[t]="0"+n);
return e.slice(0,3).join("-")+"T"+e.slice(3).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"
}),Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(){if("function"!=typeof this.toISOString)throw new TypeError;
return this.toISOString()}),isNaN(Date.parse("2011-06-15T21:40:05+06:00"))&&(Date=function(e){var t=function t(n,r,o,i,a,s,u){var c=arguments.length;
if(this instanceof e){var f=1==c&&n+""===n?new e(t.parse(n)):c>=7?new e(n,r,o,i,a,s,u):c>=6?new e(n,r,o,i,a,s):c>=5?new e(n,r,o,i,a):c>=4?new e(n,r,o,i):c>=3?new e(n,r,o):c>=2?new e(n,r):c>=1?new e(n):new e;
return f.constructor=t,f}return e.apply(this,arguments)},n=RegExp("^(\\d{4})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");
for(var r in e)t[r]=e[r];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(t){var r=n.exec(t);
if(r){r.shift();for(var o=1;7>o;o++)r[o]=+(r[o]||(3>o?1:0)),1==o&&r[o]--;var i=+r.pop(),a=+r.pop(),s=r.pop(),u=0;
if(s){if(a>23||i>59)return 0/0;u=6e4*(60*a+i)*("+"==s?-1:1)}return e.UTC.apply(this,r)+u
}return e.parse.apply(this,arguments)},t}(Date));var y="	\n\f\r   ᠎             　\u2028\u2029﻿";
if(!String.prototype.trim||y.trim()){y="["+y+"]";var v=RegExp("^"+y+y+"*"),g=RegExp(y+y+"*$");
String.prototype.trim=function(){return(this+"").replace(v,"").replace(g,"")}}var m=function(e){return e=+e,e!==e?e=-1:0!==e&&e!==1/0&&e!==-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e
},w="a"!="a"[0],b=function(e){if(null==e)throw new TypeError;return w&&"string"==typeof e&&e?e.split(""):Object(e)
}})();var Hashtable=function(){function e(t){var n;if("string"==typeof t)return t;
if(typeof t.hashCode==f)return n=t.hashCode(),"string"==typeof n?n:e(n);if(typeof t.toString==f)return""+t;
try{return t+""}catch(r){return Object.prototype.toString.call(t)}}function t(e,t){return e.equals(t)
}function n(e,t){return typeof t.equals==f?t.equals(e):e===t}function r(e){return function(t){if(null===t)throw Error("null is not a valid "+e);
if(t===void 0)throw Error(e+" must not be undefined")}}function o(e,t,n,r){this[0]=e,this.entries=[],this.addEntry(t,n),null!==r&&(this.getEqualityFunction=function(){return r
})}function i(e){return function(t){for(var n,r=this.entries.length,o=this.getEqualityFunction(t);r--;)if(n=this.entries[r],o(t,n[0]))switch(e){case d:return!0;
case y:return n;case v:return[r,n[1]]}return!1}}function a(e){return function(t){for(var n=t.length,r=0,o=this.entries.length;o>r;++r)t[n+r]=this.entries[r][e]
}}function s(e,t){for(var n,r=e.length;r--;)if(n=e[r],t===n[0])return r;return null
}function u(e,t){var n=e[t];return n&&n instanceof o?n:null}function c(t,n){var r=this,i=[],a={},d=typeof t==f?t:e,y=typeof n==f?n:null;
this.put=function(e,t){p(e),h(t);var n,r,s=d(e),c=null;return n=u(a,s),n?(r=n.getEntryForKey(e),r?(c=r[1],r[1]=t):n.addEntry(e,t)):(n=new o(s,e,t,y),i[i.length]=n,a[s]=n),c
},this.get=function(e){p(e);var t=d(e),n=u(a,t);if(n){var r=n.getEntryForKey(e);if(r)return r[1]
}return null},this.containsKey=function(e){p(e);var t=d(e),n=u(a,t);return n?n.containsKey(e):!1
},this.containsValue=function(e){h(e);for(var t=i.length;t--;)if(i[t].containsValue(e))return!0;
return!1},this.clear=function(){i.length=0,a={}},this.isEmpty=function(){return!i.length
};var v=function(e){return function(){for(var t=[],n=i.length;n--;)i[n][e](t);return t
}};this.keys=v("keys"),this.values=v("values"),this.entries=v("getEntries"),this.remove=function(e){p(e);
var t,n=d(e),r=null,o=u(a,n);return o&&(r=o.removeEntryForKey(e),null!==r&&(o.entries.length||(t=s(i,n),l(i,t),delete a[n]))),r
},this.size=function(){for(var e=0,t=i.length;t--;)e+=i[t].entries.length;return e
},this.each=function(e){for(var t,n=r.entries(),o=n.length;o--;)t=n[o],e(t[0],t[1])
},this.putAll=function(e,t){for(var n,o,i,a,s=e.entries(),u=s.length,c=typeof t==f;u--;)n=s[u],o=n[0],i=n[1],c&&(a=r.get(o))&&(i=t(o,a,i)),r.put(o,i)
},this.clone=function(){var e=new c(t,n);return e.putAll(r),e}}var f="function",l=typeof Array.prototype.splice==f?function(e,t){e.splice(t,1)
}:function(e,t){var n,r,o;if(t===e.length-1)e.length=t;else for(n=e.slice(t+1),e.length=t,r=0,o=n.length;o>r;++r)e[t+r]=n[r]
},p=r("key"),h=r("value"),d=0,y=1,v=2;return o.prototype={getEqualityFunction:function(e){return typeof e.equals==f?t:n
},getEntryForKey:i(y),getEntryAndIndexForKey:i(v),removeEntryForKey:function(e){var t=this.getEntryAndIndexForKey(e);
return t?(l(this.entries,t[0]),t[1]):null},addEntry:function(e,t){this.entries[this.entries.length]=[e,t]
},keys:a(0),values:a(1),getEntries:function(e){for(var t=e.length,n=0,r=this.entries.length;r>n;++n)e[t+n]=this.entries[n].slice(0)
},containsKey:i(d),containsValue:function(e){for(var t=this.entries.length;t--;)if(e===this.entries[t][1])return!0;
return!1}},c}();(function(e){"use strict";var t,n=(e.BMP,{}),r={};n.createObjectURL=function(e,n){var o=t();
return!(!n||!n.autoRevoke)||!1,r[o]=e,"blob:"+o},n.revokeObjectURL=function(e){var t=e.replace("blob:","");
delete r[t]},n.retrieveObject=function(e){var t=e.replace("blob:","");return r[t]
},n.revokeAllObjectURLs=function(){r={}},t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"===e?t:8|3&t;
return n.toString(16)})},e.BMP=e.BMP||{},e.BMP.URL=n})(this),function(e){"use strict";
var t,n;e.BMP=e.BMP||{},t=e.BMP,t.MIME=t.MIME||{},n=t.MIME,n.TEXT_TYPES=["application/javascript","application/json","application/x-javascript"],n.isText=function(e){return 0===e.indexOf("text/")?!0:-1!==n.TEXT_TYPES.indexOf(e)?!0:!1
}}(this),function(e){"use strict";var t,n,r,o,i=!0;e.BMP.MIME;try{t=new e.Blob,t=null
}catch(a){i=!1}o=function(t){var n,r="",o=new e.Uint8Array(t),i=o.byteLength;for(n=0;i>n;n++)r+=String.fromCharCode(o[n]);
return e.btoa(r)},n=function(e,t){var n;if(e&&!Array.isArray(e))throw Error("first argument should be an Array");
return t=t||{},this.size=0,this.type="",this.base64="",this.text="","object"==typeof t&&(this.type=t.type||this.type),e&&e.length&&(n=e[0],"string"==typeof n&&(0===n.indexOf("data:")&&"text/plain"===this.type?(this.size+=n.length,this.text+=n):(this.size+=n.length,this.base64+=n))),this
},n.createNative=function(t,r){var o;return r=r||{},i?new e.Blob(t,r):e.BlobBuilder?(o=new e.BlobBuilder,o.append(t),o.getBlob(r)):new n(t,r)
},n.fromBlobURL=function(t,r,o){r=r||function(){},o=o||function(){},e.URL&&e.URL.createObjectURL?n.nativelyFromBlobURL(t,r,o):this.fromNativeBlob(e.BMP.URL.retrieveObject(t),function(e){r(e)
},function(e){o(e)})},n.fromNativeBlob=function(t,r,o){var i=new e.FileReader;r=r||function(){},o=o||function(){},i.onload=function(e){var a;
i.onload=null;try{if(a=e.target.result,t=n.fromDataURI(e.target.result),!t)throw Error("Blob.fromNativeBlob: fromDataURI gave no blob")
}catch(s){return o(s),void 0}r(t)},i.onerror=function(e){i.onerror=null,o(e.target.error)
};try{i.readAsDataURL(t)}catch(a){i.onload=null,i.onerror=null,o(a)}},n.fromDataURI=function(t){var r,o,i,a,s=new n;
r=t.split(","),a=r[1],r=r[0].split(":"),r=r[1].split(";"),o=r[0],i=r[1],"base64"===i?s.base64=a:s.text=a,s.type=o,s.size=a.length;
try{s=n.fromDataURI(e.atob(s.base64)),s.makeNested()}catch(u){}return s},n.nativelyFromBlobURL=function(t,r,i){var a,s;
r=r||function(){},i=i||function(){},a=new e.XMLHttpRequest,a.onreadystatechange=function(){var t,a,u;
this.readyState===e.XMLHttpRequest.DONE&&(this.onreadystatechange=null,t=this.getResponseHeader("Content-Type"),200===this.status?("arraybuffer"===this.responseType?(a=o(this.response),s=new n([a],{type:t})):"blob"===this.responseType?n.fromNativeBlob(this.response,function(e){r(e)
},function(e){i(e)}):"document"===this.responseType?(u=new e.XMLSerializer,a=e.btoa(u.serializeToString(this.response)),s=new n([a],{type:t})):"json"===this.responseType?(a=e.btoa(JSON.stringify(this.response)),s=new n([a],{type:t})):s=new n([this.response],{type:t}),s?r(s):i(Error("error retrieving target Blob via Blob URL"))):i(Error(this.url+" -> "+this.status)))
},a.open("GET",t),a.send()},n.isNested=function(){},n.prototype.makeNested=function(){var e="data:";
e+=this.type,e+=";base64,",e+=this.base64,this.type="text/plain",this.text=e,this.base64=null
},n.prototype.undoNested=function(){var e=n.fromDataURI(this.text);this.type=e.type,this.base64=e.base64,this.text=null
},n.prototype.toNative=function(){return e.BMP.Blob.createNative([e.atob(this.base64)],{type:this.type})
},e.BMP=e.BMP||{},e.BMP.Blob=n,e.BMP.NestedBlob=r}(this),function(e){"use strict";
var t,n,r,o=e.Modernizr,i=e.document,a=e.jQuery;return o?(o.addTest("filereader",function(){return!!(e.File&&e.FileList&&e.FileReader)
}),o.addTest("positionfixed",function(){var t,n,r=i.createElement("div"),o=!1,s=i.body||function(){return o=!0,i.documentElement.appendChild(i.createElement("body"))
}(),u=s.style.cssText;return s.style.cssText="height: 3000px; margin: 0; padding; 0;",r.style.cssText="position: fixed; top: 100px",s.appendChild(r),e.scrollTo(0,500),n=a(r).offset(),t=600===n.top,t||void 0===r.getBoundingClientRect||(t=100===r.getBoundingClientRect().top),s.removeChild(r),s.style.cssText=u,e.scrollTo(0,1),o&&i.documentElement.removeChild(s),t
}),o.addTest("xpath",function(){var t=a.parseXML("<xml />");return!!e.XPathResult&&!!t.evaluate
}),o.addTest("documentfragment",function(){var e,t,n;try{return n=i.createElement("p"),e=i.createDocumentFragment(),t=i.createDocumentFragment(),t.appendChild(n),e.appendChild(t),n.parentNode!==e?!1:t.parentNode===e?!1:!0
}catch(r){return!1}}),o.inputtypes.file=function(){var e,t=navigator.userAgent,n=-1!==t.indexOf("Android"),r=n&&/Android 2\.(0|1)/.test(t);
return n&&(-1!==t.indexOf("Android 1.")||r)?!1:(e=i.createElement("input"),e.setAttribute("type","file"),e.disabled===!1)
}(),o.inputtypes.number=function(){var e,t;return o.inputtypes.number?(e=a('<input type="number" />'),e.val(1.5),t=e[0].checkValidity(),e.remove(),t):!1
}(),o.canvas&&(t=new Image,n=i.createElement("canvas"),r=n.getContext("2d"),t.onload=function(){r.drawImage(t,0,0),o.addTest("canvastodataurlpng",function(){return 0===n.toDataURL("image/png").indexOf("data:image/png")
}),o.addTest("canvastodataurljpeg",function(){return 0===n.toDataURL("image/jpeg").indexOf("data:image/jpeg")
}),o.addTest("canvastodataurlwebp",function(){return 0===n.toDataURL("image/webp").indexOf("data:image/webp")
})},t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg=="),void 0):(e.warn("Blink Modernizr tests need Modernizr to be included first."),void 0)
}(this),function(e){"use strict";var t=e.jQuery,n=e.Math;e.isBlinkGapDevice=function(){return e.PhoneGap&&"object"===t.type(e.device)&&e.device instanceof e.Device
},e.computeTimeout=function(e){var t=1e3/600;return n.floor(e*t+15e3)}}(this),function(e){"use strict";
var t,n=e.jQuery,r=n(e.document),o={history:[]},i=["log","error","warn","info"],a=function(){r.off("ready deviceready",a),setTimeout(function(){t=e.console||e.debug||{log:n.noop},n.each(i,function(r,o){var i=n.type(t[o]);
e[o]="function"===i?function(){t[o].apply(t,arguments)}:"object"===i?function(e){t[o](e)
}:"log"!==o?e.log:n.noop}),n.each(o.history,function(r,o){var i=e[o.fn],a=n.type(i);
"function"===a?i.apply(t,o.args):"object"===a&&i(o.args[0])}),delete o.history,n.each(i,function(e,t){delete o[t]
})},0)},s=function(){e.PhoneGap&&e.PhoneGap.available?o.history&&a():setTimeout(s,197)
};t=o,n.each(i,function(r,i){o[i]=function(){o.history.push({fn:i,args:n.makeArray(arguments)})
},e[i]=t[i]}),e.isBlinkGap?s():r.on("ready",a)}(this),function(e){var t=e.String;
t.prototype.hasEntities=function(){var e=this;return-1===e.indexOf("&")?!1:void 0
},t.prototype.repeat=function(e){var t,n="";for(t=0;e>t;t++)n+=this;return n}}(this),function(e){"use strict";
var t=e.Math,n=t.round;t.round=function(e,r){var o;return r&&0!==r?(o=t.pow(10,r),"number"==typeof r&&r>0&&(e=t.round(e*o)/o),e):n(e)
},"function"!=typeof t.uuid&&(t.uuid=function(){var e,n=t.uuid.CHARS,r=[],o=36;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4";o--;)r[o]||(e=0|16*t.random(),r[o]=n[19===o?8|3&e:e]);
return r.join("")},t.uuid.CHARS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"])
}(this),function(e){"use strict";function t(e,t){var r=!0;return e&&"object"===n.type(e)?"array"===n.type(t)?(n.each(t,function(t,n){return e[n]===void 0?(r=!1,!1):!0
}),r):"object"===n.type(t)?(n.each(t,function(t,o){return n.type(e[t])!==o?(r=!1,!1):!0
}),r):!1:!1}var n=e.jQuery,r=n.fn.attr,o=n.fn.show;n.isObject=function(e){return"object"===n.type(e)
},n.isPromise=function(e){var n="function",r={always:n,done:n,fail:n,pipe:n,progress:n,promise:n,state:n,then:n};
return t(e,r)},n.isDeferred=function(e){var r="function",o={notify:r,notifyWith:r,reject:r,rejectWith:r,resolve:r,resolveWith:r};
return n.isPromise(e)?t(e,o):!1},n.fn.attr=function(){var e,t,o;return this[0]&&0===arguments.length?(o={},t=this[0].attributes,e=t.length,n.each(t,function(e,t){var n=t.name||t.nodeName,r=t.value||t.nodeValue;
n&&(o[n.toLowerCase()]=r)}),o):r.apply(this,arguments)},n.fn.show=function(){return this.removeAttr("hidden"),this.removeClass("hidden"),o.apply(this,arguments)
},n.fn.isHidden=function(){return this.prop("hidden")||this.hasClass("hidden")?!0:this[0]&&this[0].style&&"none"===this[0].style.display
},n.fn.tag=function(){var e;return this.length>0?(e=this[0].nodeName||this[0].tagName||"",e.toLowerCase()):""
},n.fn.tagHTML=function(){var e,t=n(this);return this[0]?(e="<"+t.tag(),n.each(t.attr(),function(t,n){e+=" "+t+'="'+n+'"'
}),e+=" />"):void 0},n.whenArray=function(e){return n.when.apply(n,e)},n.resolveTimeout=function(){var e=n.makeArray(arguments),t=e.shift();
return setTimeout(function(){t.resolve.apply(t,e)},0),this},n.fn.appendWithCheck=function(t,r,o,i){var a=n(this),s=new n.Deferred,u=e.MyAnswers;
return"string"!==n.type(o)&&(o=t.match(/>([^<>\0\n\f\r\t\v]+)</),o||(o=t.match(/(\w+)/)),o="array"===n.type(o)?o[0]:t),"number"!==n.type(i)&&u.dispatch.add(function(){i=a.html().lastIndexOf(o)
}),u.dispatch.add(function(){a.append(t)}),u.dispatch.add(function(){var e=a.html();
"string"!==n.type(e)||!e||e.lastIndexOf(o)>i?s.resolve():r>0?n.when(a.appendWithCheck(t,--r,o,i)).fail(s.reject).then(s.resolve):s.reject()
}),s.promise()},n.fn.childrenAsProperties=function(){var e={};return n(this).children().each(function(t,r){var o=n(r),i=o.tag(),a=o.text();
i.length>0&&a.length>0&&(e[i]=a)}),e},n.getCachedScript=function(e,t){return t=n.extend(t||{},{dataType:"script",cache:!0,url:e}),n.ajax(t)
}}(this),function(e){"use strict";var t=e.jQuery,n=e._Blink,r=e._SERVER,o={PREFIX_GZ:"/_c_/",SUFFIX_GZ:"",PREFIX:"/_c_/",SUFFIX:""},i=["css","js"],a=function(e){var a;
return a=n&&n.cfg&&n.cfg.CDN_PLATFORM,a=t.isObject(a)?a:{},a=t.extend({},o,a),e=e||r&&r.HTTP_ACCEPT_ENCODING,e="string"==typeof e?e:"",-1===e.indexOf("gzip")&&(a.PREFIX_GZ=a.PREFIX,a.SUFFIX_GZ=a.SUFFIX),this.getURL=function(e){var n;
return e&&"string"==typeof e?(e=t.trim(e),e=e.replace(/^\/*/,""),n=e.match(/\.?(\w+)$/),n="array"===t.type(n)?n[1]:"",n&&-1!==t.inArray(n,i)?a.PREFIX_GZ+e+a.SUFFIX_GZ:a.PREFIX+e+a.SUFFIX):""
},this};n.preloadPage=function(e){var n,r=t("<iframe></iframe>"),o=30,i=function(){r.remove()
},a=function(){o--,t(n.document.body).hasClass("s-ready")?i():0>o?(warn('preloadPage(): timed out waiting for "s-ready"'),i()):setTimeout(a,2e3)
};r.attr({height:10,width:10,src:e}),r.css({position:"absolute",top:"-50px",left:"-50px"}),t("body").append(r),n=r[0].contentWindow,t.isWindow(n)&&n.document?t(n.document.body).hasClass("s-ready")?i():setTimeout(a,2e3):warn("preloadPage(): unable to find Window or Document in <iframe>")
},n.stringifyDOM=function(t){var n;return t.xml?t.xml:e.XMLSerializer?(n=new e.XMLSerializer,n.serializeToString(t)):null
},n.hasFontFor=function(r){var o,i,a,s,u=n.hasFontFor;try{u.results||(u.results={}),"boolean"==typeof u.results[r]?o=u.results[r]:(i=t(e.document.body),a=t("<span>"+r+"</span>"),s=t("<span>&#xFFFD;</span>"),a.add(s).appendTo(i),o=a.innerWidth()!==s.innerWidth(),u.results[r]=o,a.add(s).remove())
}catch(c){error(error),o=!1}return o},e._Blink.cdnp=new a}(this),function(e){"use strict";
var t=e.jQuery,n=function(e){function n(){if(!o.isPaused&&null===r&&0!==o.queue.length){var e,i=o.queue.shift();
"function"==typeof i&&(e=i()),"function"==typeof t&&t()instanceof t&&e&&"object"==typeof e&&e.promise&&"function"==typeof e.promise?(r=0,t.when(e).always(function(){r=setTimeout(function(){r=null,n()
},o.interval)})):r=setTimeout(function(){r=null,n()},o.interval)}}var r=null,o=this;
return this.queue=[],this.interval=e||0,this.isPaused=!1,this.poke=function(){n()
},this.pause=function(){clearTimeout(r),r=null,this.isPaused=!0},this.resume=function(){this.isPaused=!1,n()
},this};n.prototype.add=function(e){this.queue.push(e),this.poke()},e.BlinkDispatch=n
}(this),function(e){"use strict";var t,n,r,o,i,a,s,u,c,f=e.jQuery,l=e.alert,p={},h={},d=function(u,c,h){var d,y,v,g=this,m=new f.Deferred;
return("string"!=typeof c||1>c.length)&&(c="default"),("string"!=typeof h||1>h.length)&&(h="main"),"string"!=typeof u?u=t[0]:"sessionstorage"===u&&-1===f.inArray("sessionstorage",t)?u="memory":-1===f.inArray(u,t)&&(u=t[0]),g.type=u,g.partition=c,g.section=h,m.done(function(){a("BlinkStorage(): "+u+" -> "+c+" : "+h+" ready")
}),g.ready=function(){return m.promise()},"localstorage"===u||"sessionstorage"===u?(y="localstorage"===u?e.localStorage:e.sessionStorage,g.get=function(e){var t=new f.Deferred;
return t.resolve(y.getItem(c+":"+h+":"+e)),t.promise()},g.set=function(e,t){var n=new f.Deferred;
return y.setItem(c+":"+h+":"+e,t),n.resolve(),n.promise()},g.remove=function(e){var t=new f.Deferred;
return y.removeItem(c+":"+h+":"+e),t.resolve(),t.promise()},g.keys=function(){var e,t,n=new f.Deferred,r=[],o=y.length,i=c+":"+h+":";
for(e=0;o>e;e++)t=y.key(e),0===t.indexOf(i)&&r.push(t.replace(i,""));return n.resolve(r),n.promise()
},g.count=function(){var e=new f.Deferred;return f.when(g.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},m.resolve()):"websqldatabase"===u?(n=1024*1024*(e.device?5:.75),r=function(e,t){var n=t&&e.executeSql?t:e;
return s("BlinkStorage error1: "+n.code+" "+n.message),(3===n.code||4===n.code||7===n.code)&&l("storage-error: "+n.code+"\n"+n.message),!1
},o=function(){y.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS `"+h+"` (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",[],m.resolve,m.reject)
},r,f.noop)},i=function(){try{y=e.openDatabase(c,"1.0",c,n),p[c]=y,y.readTransaction=y.readTransaction||y.transaction
}catch(t){throw m.reject(),"BlinkStorage: "+t}},d={get:"SELECT v FROM `"+h+"` WHERE k = ?",set:"INSERT OR REPLACE INTO `"+h+"` (k, v) VALUES (?, ?)",remove:"DELETE FROM `"+h+"` WHERE k = ?",keys:"SELECT k FROM `"+h+"`",count:"SELECT count(k) AS `count` FROM "+h},p[c]?y=p[c]:i(),o(),g.get=function(e){var t=new f.Deferred;
return y.readTransaction(function(n){n.executeSql(d.get,[e],function(e,n){1===n.rows.length?t.resolve(n.rows.item(0).v):(t.resolve(null),n.rows.length>1&&s("BlinkStorage: SELECT returned multiple rows"))
},r)},r,f.noop),t.promise()},g.set=function(e,t,n){var o=new f.Deferred,i=new f.Deferred,a=function(){setTimeout(function(){f.when(g.set(e,t,n)).fail(o.reject).then(o.resolve)
},2e3)};return n="number"!=typeof n?2:n,0>=n--?(o.reject(),o.promise()):(setTimeout(function(){y.transaction(function(n){n.executeSql(d.set,[e,t],function(e,t){1!==t.rowsAffected?(s("BlinkStorage: INSERT did not affect 1 row"),a()):i.resolve()
},function(e,t){r(t),a()})},function(e,t){r(e,t),a()},function(){"pending"===i.state()?a():o.resolve()
})},0),o.promise())},g.remove=function(e){var t=new f.Deferred;return y.transaction(function(n){n.executeSql(d.remove,[e],function(){t.resolve()
})},r,f.noop),t.promise()},g.keys=function(){var e=new f.Deferred;return y.readTransaction(function(t){t.executeSql(d.keys,[],function(t,n){var r,o,i=n.rows.length,a=[];
for(r=0;i>r;r++)o=n.rows.item(r),a.push(o.k);e.resolve(a)})},r,f.noop),e.promise()
},g.count=function(){var e=new f.Deferred;return y.readTransaction(function(t){t.executeSql(d.count,[],function(t,n){var r=n.rows.item(0).count;
f.isNumeric(r)?e.resolve(parseInt(r,10)):(s("BlinkStorage: SELECT count(k) non-numeric"),e.reject())
})},r,f.noop),e.promise()}):"memory"===u&&(v={},g.get=function(e){var t=new f.Deferred;
return t.resolve(v[c+":"+h+":"+e]),t.promise()},g.set=function(e,t){var n=new f.Deferred;
return v[c+":"+h+":"+e]=t,n.resolve(),n.promise()},g.remove=function(e){var t=new f.Deferred;
return delete v[c+":"+h+":"+e],t.resolve(),t.promise()},g.keys=function(){var e,t=new f.Deferred,n=[],r=c+":"+h+":";
for(e in v)v.hasOwnProperty(e)&&0===e.indexOf(r)&&n.push(e.replace(r,""));return t.resolve(n),t.promise()
},g.count=function(){var e=new f.Deferred;return f.when(g.keys()).done(function(t){e.resolve(t.length)
}),e.promise()},m.resolve()),this};return f?(f.each(["log","error","warn","info"],function(t,n){h[n]=function(){e[n]&&e[n].apply(e,arguments)
}}),a=h.log,s=h.error,u=h.warn,c=h.info,d.prototype.removeKeysRegExp=function(e){var t=this,n=new f.Deferred(function(n){f.when(t.keys()).done(function(r){var o,i=r.length,a=[];
for(o=0;i>o;o++)-1!==r[o].search(e)&&a.push(t.remove(r[o]));f.when(a).done(n.resolve())
})});return n.promise()},d.prototype.available=[],t=d.prototype.available,e.openDatabase!==void 0&&t.push("websqldatabase"),e.localStorage!==void 0&&t.push("localstorage"),e.sessionStorage!==void 0&&t.push("sessionstorage"),t.push("memory"),"function"==typeof e.log&&c("BlinkStorage(): available=["+t.join(",")+"]"),e.BlinkStorage=d,void 0):(l("error: BlinkStorage.JS requires jQuery to be loaded first"),void 0)
}(this);
//@ sourceMappingURL=common.js.map