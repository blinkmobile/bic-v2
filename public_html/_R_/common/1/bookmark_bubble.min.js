/**
 * @fileoverview Bookmark bubble library. This is meant to be included in the
 * main JavaScript binary of a mobile web application.
 *
 * Supported browsers: iPhone / iPod / iPad Safari 3.0+
 */
var google=google||{};google.bookmarkbubble=google.bookmarkbubble||{};google.bind=function(c,b){return function(){return c.apply(b,arguments)}};google.abstractMethod=function(){throw Error("Unimplemented abstract method.");};google.bookmarkbubble.Bubble=function(){this.boundScrollHandler_=google.bind(this.setPosition,this);this.element_=null;this.hasBeenDestroyed_=false};google.bookmarkbubble.Bubble.prototype.showIfAllowed=function(){if(!this.isAllowedToShow_())return false;this.show_();return true};
google.bookmarkbubble.Bubble.prototype.showIfAllowedWhenLoaded=function(c){if(!this.isAllowedToShow_())return false;var b=this,a=b.loadImg_=document.createElement("img");a.src=b.getIconUrl_();a.onload=function(){if(a.complete){delete b.loadImg_;a.onload=null;b.show_();c&&c()}};a.onload();return true};google.bookmarkbubble.Bubble.prototype.setHashParameter=google.abstractMethod;google.bookmarkbubble.Bubble.prototype.hasHashParameter=google.abstractMethod;
google.bookmarkbubble.Bubble.prototype.NUMBER_OF_TIMES_TO_DISMISS=2;google.bookmarkbubble.Bubble.prototype.TIME_UNTIL_AUTO_DESTRUCT=15E3;google.bookmarkbubble.Bubble.prototype.LOCAL_STORAGE_PREFIX="BOOKMARK_";google.bookmarkbubble.Bubble.prototype.DISMISSED_="DISMISSED_COUNT";google.bookmarkbubble.Bubble.prototype.IMAGE_ARROW_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAATCAMAAABSrFY3AAABKVBMVEUAAAD///8AAAAAAAAAAAAAAAAAAADf398AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD09PQAAAAAAAAAAAC9vb0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD19fUAAAAAAAAAAAAAAADq6uoAAAAAAAAAAAC8vLzU1NTT09MAAADg4OAAAADs7OwAAAAAAAAAAAD///+cueenwerA0vC1y+3a5fb5+/3t8vr4+v3w9PuwyOy3zO3h6vfh6vjq8Pqkv+mat+fE1fHB0/Cduuifu+iuxuuivemrxOvC1PDz9vzJ2fKpwuqmwOrb5vapw+q/0vDf6ffK2vLN3PPprJISAAAAQHRSTlMAAAEGExES7FM+JhUoQSxIRwMbNfkJUgXXBE4kDQIMHSA0Tw4xIToeTSc4Chz4OyIjPfI3QD/X5OZR6zzwLSUPrm1y3gAAAQZJREFUeF5lzsVyw0AURNE3IMsgmZmZgszQZoeZOf//EYlG5Yrhbs+im4Dj7slM5wBJ4OJ+undAUr68gK/Hyb6Bcp5yBR/w8jreNeAr5Eg2XE7g6e2/0z6cGw1JQhpmHP3u5aiPPnTTkIK48Hj9Op7bD3btAXTfgUdwYjwSDCVXMbizO0O4uDY/x4kYC5SWFnfC6N1a9RCO7i2XEmQJj2mHK1Hgp9Vq3QBRl9shuBLGhcNtHexcdQCnDUoUGetxDD+H2DQNG2xh6uAWgG2/17o1EmLqYH0Xej0UjHAaFxZIV6rJ/WK1kg7QZH8HU02zmdJinKZJaDV3TVMjM5Q9yiqYpUwiMwa/1apDXTNESjsAAAAASUVORK5CYII=";
google.bookmarkbubble.Bubble.prototype.IMAGE_CLOSE_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAALVBMVEXM3fm+1Pfb5/rF2fjw9f23z/aavPOhwfTp8PyTt/L3+v7T4vqMs/K7zP////+qRWzhAAAAXElEQVQIW2O4CwUM996BwVskxtOqd++2rwMyPI+ve31GD8h4Madqz2mwms5jZ/aBGS/mHIDoen3m+DowY8/hOVUgxusz+zqPg7SvPA1UxQfSvu/du0YUK2AMmDMA5H1qhVX33T8AAAAASUVORK5CYII=";google.bookmarkbubble.Bubble.prototype.REL_ICON_="apple-touch-icon";google.bookmarkbubble.Bubble.prototype.MOBILE_SAFARI_USERAGENT_REGEX_=/iPhone|iPod|iPad/;
google.bookmarkbubble.Bubble.prototype.isAllowedToShow_=function(){return this.isMobileSafari_()&&!this.hasBeenDismissedTooManyTimes_()&&!this.isFullscreen_()&&!this.hasHashParameter()};
google.bookmarkbubble.Bubble.prototype.show_=function(){this.element_=this.build_();document.body.appendChild(this.element_);this.setHashParameter();window.setTimeout(this.boundScrollHandler_,1);window.addEventListener("scroll",this.boundScrollHandler_,false);window.setTimeout(google.bind(this.autoDestruct_,this),this.TIME_UNTIL_AUTO_DESTRUCT)};
google.bookmarkbubble.Bubble.prototype.destroy=function(){if(!this.hasBeenDestroyed_){window.removeEventListener("scroll",this.boundScrollHandler_,false);if(this.element_&&this.element_.parentNode==document.body){document.body.removeChild(this.element_);this.element_=null}this.hasBeenDestroyed_=true}};
google.bookmarkbubble.Bubble.prototype.rememberDismissal_=function(){if(window.localStorage)try{var c=this.LOCAL_STORAGE_PREFIX+this.DISMISSED_,b=Number(window.localStorage[c])||0;window.localStorage[c]=String(b+1)}catch(a){}};google.bookmarkbubble.Bubble.prototype.hasBeenDismissedTooManyTimes_=function(){if(!window.localStorage)return true;try{return(Number(window.localStorage[this.LOCAL_STORAGE_PREFIX+this.DISMISSED_])||0)>=this.NUMBER_OF_TIMES_TO_DISMISS}catch(c){return true}};
google.bookmarkbubble.Bubble.prototype.isFullscreen_=function(){return!!window.navigator.standalone};google.bookmarkbubble.Bubble.prototype.isMobileSafari_=function(){return this.MOBILE_SAFARI_USERAGENT_REGEX_.test(navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.setPosition=function(){this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-out";this.element_.style.WebkitTransform="translateY("+(window.pageYOffset+window.innerHeight-this.element_.offsetHeight-17)+"px)"};
google.bookmarkbubble.Bubble.prototype.closeClickHandler_=function(){this.destroy();this.rememberDismissal_()};google.bookmarkbubble.Bubble.prototype.autoDestruct_=function(){if(!this.hasBeenDestroyed_){this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-in";this.element_.style.WebkitTransform="translateY("+(window.pageYOffset+window.innerHeight)+"px)";window.setTimeout(google.bind(this.destroy,this),700)}};
google.bookmarkbubble.Bubble.prototype.getIconUrl_=function(){if(!this.iconUrl_){var c=this.getLink(this.REL_ICON_);if(!c||!(this.iconUrl_=c.href))this.iconUrl_="data:image/png;base64,"}return this.iconUrl_};google.bookmarkbubble.Bubble.prototype.getLink=function(c){c=c.toLowerCase();for(var b=document.getElementsByTagName("link"),a=0;a<b.length;++a){var d=b[a];if(d.getAttribute("rel").toLowerCase()==c)return d}return null};
google.bookmarkbubble.Bubble.prototype.build_=function(){var c=document.createElement("div");c.style.position="absolute";c.style.zIndex=1E3;c.style.width="100%";c.style.left="0";c.style.top="0";c.style.WebkitTransform="translateY("+(window.pageYOffset+window.innerHeight)+"px)";var b=document.createElement("div");b.style.position="relative";b.style.width="214px";b.style.margin="0 auto";b.style.border="2px solid #fff";b.style.padding="20px 20px 20px 10px";b.style.WebkitBorderRadius="8px";b.style.WebkitBoxShadow=
"0 0 8px rgba(0, 0, 0, 0.7)";b.style.WebkitBackgroundSize="100% 8px";b.style.backgroundColor="#b0c8ec";b.style.background="#cddcf3 -webkit-gradient(linear, left bottom, left top, from(#b3caed), to(#cddcf3)) no-repeat bottom";b.style.font="13px/17px sans-serif";c.appendChild(b);b.innerHTML="Install this web app on your phone: tap <b style=\"font-size:15px\">+</b> and then <b>'Add to Home Screen'</b>";var a=document.createElement("div");a.style["float"]="left";a.style.width="55px";a.style.height="55px";
a.style.margin="-2px 7px 3px 5px";a.style.background="#fff url("+this.getIconUrl_()+") no-repeat -1px -1px";a.style.backgroundSize="100% 100%";a.style.backgroundPosition="center";a.style.WebkitBackgroundSize="57px 57px";a.style.WebkitBorderRadius="10px";a.style.WebkitBoxShadow="0 2px 5px rgba(0, 0, 0, 0.4)";b.insertBefore(a,b.firstChild);a=document.createElement("div");a.style.backgroundImage="url("+this.IMAGE_ARROW_DATA_URL_+")";a.style.width="25px";a.style.height="19px";a.style.position="absolute";
a.style.bottom="-19px";a.style.left="111px";b.appendChild(a);a=document.createElement("a");a.onclick=google.bind(this.closeClickHandler_,this);a.style.position="absolute";a.style.display="block";a.style.top="-3px";a.style.right="-3px";a.style.width="16px";a.style.height="16px";a.style.border="10px solid transparent";a.style.background="url("+this.IMAGE_CLOSE_DATA_URL_+") no-repeat";b.appendChild(a);return c};
