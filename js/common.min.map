{"version":3,"file":"common.min.js","sources":["vendor/phpjs-2011-09.js","lib/Object.create.js","vendor/jshashtable-2.1.js","../bower_components/underscore/underscore.js","../bower_components/es5-shim/es5-shim.js","../bower_components/jquery-migrate/jquery-migrate.js","lib/bmp-blobs.js","lib/Modernizr-tests.js","lib/utilities.js","lib/BlinkDispatch.js","lib/BMP.js","lib/BMP.BIC.Config.js","lib/BlinkStorage.js"],"names":["explode","delimiter","string","limit","emptyArray","arguments","length","splitted","toString","split","partA","splice","partB","join","push","utf8_encode","argString","start","end","utftext","stringl","n","c1","charCodeAt","enc","String","fromCharCode","slice","sha1","str","blockstart","i","j","A","B","C","D","E","temp","rotate_left","s","t4","cvt_hex","val","v","W","Array","H0","H1","H2","H3","H4","this","str_len","word_array","toLowerCase","urldecode","decodeURIComponent","replace","parse_url","component","o","strictMode","key","q","name","parser","strict","loose","m","exec","uri","protocol","host","port","user","password","path","query","anchor","retArr","scheme","pass","fragment","parse_str","array","glue1","glue2","array2","chr","tmp","value","bracket","keys","evalStr","that","fixStr","window","charAt","substr","indexOf","eval","htmlspecialchars","quote_style","charset","double_encode","optTemp","noquotes","OPTS","ENT_NOQUOTES","ENT_HTML_QUOTE_SINGLE","ENT_HTML_QUOTE_DOUBLE","ENT_COMPAT","ENT_QUOTES","ENT_IGNORE","concat","htmlspecialchars_decode","setlocale","category","locale","categ","cats","d","document","_copy","orig","RegExp","Date","newObj","_nplurals2a","_nplurals2b","php_js","phpjs","locales","en","LC_COLLATE","str1","str2","LC_CTYPE","an","al","ct","dg","gr","lw","pr","pu","sp","up","xd","CODESET","lower","upper","LC_TIME","a","b","c","p","P","r","x","X","alt_digits","ERA","ERA_YEAR","ERA_D_T_FMT","ERA_D_FMT","ERA_T_FMT","LC_MONETARY","int_curr_symbol","currency_symbol","mon_decimal_point","mon_thousands_sep","mon_grouping","positive_sign","negative_sign","int_frac_digits","frac_digits","p_cs_precedes","p_sep_by_space","n_cs_precedes","n_sep_by_space","p_sign_posn","n_sign_posn","LC_NUMERIC","decimal_point","thousands_sep","grouping","LC_MESSAGES","YESEXPR","NOEXPR","YESSTR","NOSTR","nplurals","en_US","en_GB","en_AU","fr","fr_CA","NS_XHTML","NS_XML","getElementsByTagNameNS","getAttributeNS","getElementsByTagName","lang","localeCategories","getenv","Object","prototype","call","strftime","fmt","timestamp","_xPad","pad","parseInt","lc_time","_formats","getDay","getMonth","getFullYear","e","g","G","y","V","H","I","getHours","ms","getTimezoneOffset","doy","k","l","M","parse","S","u","dow","U","rdow","woy","dow1_1","idow","w","Y","z","Math","abs","Z","%","_date","_aggregates","F","h","R","t","T","match","m0","m1","f","create","properties","Type","object","TypeError","undefined","Hashtable","hashObject","obj","hashCode","FUNCTION","ex","equals_fixedValueHasEquals","fixedValue","variableValue","equals","equals_fixedValueNoEquals","createKeyValCheck","kvStr","kv","Error","Bucket","hash","firstKey","firstValue","equalityFunction","entries","addEntry","getEqualityFunction","createBucketSearcher","mode","entry","EXISTENCE","ENTRY","ENTRY_INDEX_AND_VALUE","createBucketLister","entryProperty","aggregatedArr","startIndex","len","searchBuckets","buckets","bucket","getBucketForHash","bucketsByHash","hashingFunctionParam","equalityFunctionParam","hashingFunction","put","checkKey","checkValue","bucketEntry","oldValue","getEntryForKey","get","containsKey","bucketKey","containsValue","clear","isEmpty","createBucketAggregator","bucketFuncName","aggregated","values","remove","bucketIndex","removeEntryForKey","arrayRemoveAt","size","total","each","callback","putAll","hashtable","conflictCallback","thisValue","hasConflictCallback","clone","arr","idx","itemsAfterDeleted","searchValue","getEntryAndIndexForKey","result","getEntries","root","previousUnderscore","_","breaker","ArrayProto","ObjProto","FuncProto","Function","hasOwnProperty","nativeForEach","forEach","nativeMap","map","nativeReduce","reduce","nativeReduceRight","reduceRight","nativeFilter","filter","nativeEvery","every","nativeSome","some","nativeIndexOf","nativeLastIndexOf","lastIndexOf","nativeIsArray","isArray","nativeKeys","nativeBind","bind","_wrapped","exports","module","VERSION","iterator","context","collect","results","index","list","reduceError","foldl","inject","memo","initial","foldr","find","detect","any","select","reject","all","identity","contains","include","target","invoke","method","args","isFunc","isFunction","apply","pluck","where","attrs","first","findWhere","max","Infinity","computed","min","shuffle","rand","shuffled","random","sample","guard","lookupIterator","sortBy","criteria","sort","left","right","group","behavior","groupBy","has","indexBy","countBy","sortedIndex","low","high","mid","toArray","head","take","last","rest","tail","drop","compact","flatten","input","shallow","output","isArguments","without","difference","uniq","unique","isSorted","seen","union","intersection","item","other","zip","from","hasIndex","range","stop","step","ceil","ctor","func","bound","self","partial","bindAll","funcs","memoize","hasher","delay","wait","setTimeout","defer","throttle","options","timeout","previous","later","leading","now","remaining","clearTimeout","trailing","debounce","immediate","callNow","once","ran","wrap","wrapper","compose","after","times","pairs","invert","functions","methods","names","extend","source","prop","pick","copy","omit","defaults","isObject","tap","interceptor","eq","aStack","bStack","className","global","multiline","ignoreCase","aCtor","constructor","bCtor","pop","isEqual","isString","isElement","nodeType","isFinite","isNaN","parseFloat","isNumber","isBoolean","isNull","isUndefined","noConflict","accum","floor","entityMap","escape","&","<",">","\"","'","unescape","entityRegexes","property","mixin","idCounter","uniqueId","prefix","id","templateSettings","evaluate","interpolate","noMatch","escapes","\\","\r","\n","\t"," "," ","escaper","template","text","data","settings","render","matcher","offset","variable","chain","_chain","factory","define","amd","returnExports","Empty","toInteger","isPrimitive","type","toPrimitive","valueOf","toStr","prototypeOfArray","prototypeOfObject","_Array_slice_","array_splice","array_unshift","unshift","_toString","isRegex","isArgs","callee","binder","boundLength","boundArgs","defineGetter","defineSetter","lookupGetter","lookupSetter","supportsAccessors","owns","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","spliceWorksWithEmptyObject","omittingSecondSpliceArgIsNoop","spliceNoopReturnsEmptyArray","deleteCount","boxedString","splitString","properlyBoxesContext","properlyBoxesNonStrict","properlyBoxesStrict","__","fun","toObject","thisp","reduceCoercesToObject","___","reduceRightCoercesToObject","sought","keysWorksWithArguments","originalKeys","hasDontEnumBug","propertyIsEnumerable","hasProtoEnumBug","dontEnums","dontEnumsLength","isFn","theKeys","skipProto","skipConstructor","dontEnum","negativeDate","negativeYearString","toISOString","year","month","RangeError","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","dateToJSONIsSupported","toJSON","NaN","toISO","tv","supportsExtendedYears","acceptsInvalidDates","doesNotParseY2KNewYear","NativeDate","date","dayFromMonth","months","toUTC","Number","isoDateExpression","UTC","day","hour","minute","second","millisecond","isLocalTime","Boolean","signOffset","hourOffset","minuteOffset","getTime","toFixed","multiply","base","divide","numToString","pow","acc","log","fractionDigits","string_split","compliantExecNpcg","separator","separator2","lastIndex","lastLength","flags","extended","sticky","lastLastIndex","ToUint32","test","str_replace","replaceReportsGroupsCorrectly","groups","replaceValue","hasCapturingGroups","wrappedReplaceValue","originalLastIndex","string_substr","ws","zeroWidth","trim","trimBeginRegexp","trimEndRegexp","origParseInt","hexRegex","radix","jQuery","migrateWarn","msg","console","warnedAbout","migrateWarnings","warn","migrateMute","migrateTrace","trace","migrateWarnProp","defineProperty","configurable","enumerable","set","newValue","err","_definePropertyBroken","migrateReset","compatMode","attrFn","attr","oldAttr","valueAttrGet","attrHooks","valueAttrSet","rnoType","rnoAttrNodeType","rboolean","ruseDefault","elem","lowerName","nType","fn","nodeName","parentNode","attrNode","getAttributeNode","nodeValue","propName","removeAttr","propFix","setAttribute","matched","browser","oldInit","init","oldParseJSON","parseJSON","rquickExpr","selector","rootjQuery","isPlainObject","error","parseHTML","json","uaMatch","ua","version","navigator","userAgent","chrome","webkit","safari","sub","jQuerySub","superclass","rootjQuerySub","ajaxSetup","converters","text json","oldFnData","ret","evt","_data","rscriptType","oldSelf","andSelf","addBack","clean","elems","scripts","ownerDocument","handleScript","jsTags","merge","buildFragment","childNodes","removeChild","appendChild","grep","eventAdd","event","add","eventRemove","eventTrigger","trigger","oldToggle","toggle","oldLive","live","oldDie","die","ajaxEvents","rajaxEvent","rhoverHack","hoverHack","events","special","hover","props","dispatch","types","handler","mappedTypes","triggerHandler","fn2","guid","toggler","lastToggle","preventDefault","click","on","off","onlyHandlers","setup","teardown","generateUUID","URL","BMP","blobs","createObjectURL","blob","autoRevoke","revokeObjectURL","retrieveObject","revokeAllObjectURLs","MIME","TEXT_TYPES","isText","Blob","NestedBlob","convertArrayBufferToBase64","isConstructableBlob","buffer","binary","bytes","Uint8Array","byteLength","btoa","datum","base64","createNative","builder","BlobBuilder","append","getBlob","fromBlobURL","url","onSuccess","onError","nativelyFromBlobURL","fromNativeBlob","FileReader","onload","fromDataURI","onerror","readAsDataURL","dataURI","parts","encoding","atob","makeNested","xhr","XMLHttpRequest","onreadystatechange","mime","serializer","readyState","DONE","getResponseHeader","status","responseType","response","XMLSerializer","serializeToString","JSON","stringify","open","send","isNested","undoNested","toNative","image","canvas","ctx","Modernizr","$","addTest","File","FileList","createElement","fake","body","documentElement","oldCssText","style","cssText","scrollTo","top","getBoundingClientRect","xml","XPathResult","DOMParser","parseFromString","ignore","singleNodeValue","outerFragment","innerFragment","createDocumentFragment","inputtypes","file","dummy","isAndroid","isEclair","disabled","number","$number","checkValidity","Image","getContext","drawImage","toDataURL","src","isBlinkGapDevice","PhoneGap","device","Device","computeTimeout","messageLength","lowestTransferRateConst","$document","early","history","fns","initialise","debug","noop","message","waitForBlinkGap","available","makeArray","isBlinkGap","hasEntities","repeat","occurrences","oldRound","round","decimals","order","uuid","chars","CHARS","hasProperties","_oldAttr","_show","show","isPromise","always","done","fail","pipe","progress","promise","state","then","isDeferred","notify","notifyWith","rejectWith","resolve","resolveWith","attributes","attribute","removeClass","isHidden","hasClass","display","tag","tagName","tagHTML","html","$this","whenArray","when","resolveTimeout","deferred","shift","appendWithCheck","attempts","needle","$element","Deferred","MyAnswers","childrenAsProperties","children","element","getCachedScript","dataType","cache","ajax","_Blink","_SERVER","PREFIX_GZ","SUFFIX_GZ","PREFIX","SUFFIX","GZ_TYPES","PlatformCDN","cfg","isAppCache","isSecure","applicationCache","location","CDN_PLATFORM","HTTP_ACCEPT_ENCODING","getURL","extension","inArray","AnswerSpaceCDN","cdn","basename","answerSpaceDefaults","getCDN","ROOT","CDN_USER","cdnLocation","suffix","ln","preloadPage","iframeWindow","$iframe","checkCountdown","onReadyFn","testReadyFn","height","width","css","position","contentWindow","isWindow","stringifyDOM","node","xmlSerializer","hasFontFor","char","$body","$target","$test","me","appendTo","innerWidth","cdnp","BlinkDispatch","interval","processQueue","isPaused","queue","poke","pause","resume","$dialog","putDialog","hasjQueryUI","hasjQueryMobile","bindQueue","$doc","nav","showDialog","jquery","$div","hide","jQueryUI","empty","dialog","modal","closeOnEscape","mobile","alertNoQueue","dismissedFn","dfrd","n10n","notification","alert","ok","title","buttons","close","confirmNoQueue","cancel","isRejected","isResolved","confirm","promptNoQueue","prompt","next","dequeue","BIC","Config","toCameraOptions","cameraOpts","imageCaptureQuality","quality","imageCaptureScale","imageScale","cameraOptions","estimatedSizeMbs","estimatedSize","errorHandler","openSection","openWebSQL","info","webSqlDbs","logger","BlinkStorage","partition","section","sql","db","memory","readyDeferred","ready","localStorage","sessionStorage","getItem","setItem","removeItem","current","found","count","sqlitePlugin","arg1","arg2","sqlError","executeSql","code","transaction","tx","openDatabase","readTransaction","rows","dfrdSQL","retryFn","rowsAffected","row","isNumeric","removeKeysRegExp","regexp","store","kLength","removeDefers","search"],"mappings":"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","sourcesContent":["// see MIT/GPL http://phpjs.org/ for the original source of these functions\n\nfunction explode (delimiter, string, limit) {\n    // Splits a string on string separator and return array of components. If limit is positive only limit number of components is returned. If limit is negative all components except the last abs(limit) are returned.  \n    // \n    // version: 1103.1210\n    // discuss at: http://phpjs.org/functions/explode\n    // +     original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +     improved by: kenneth\n    // +     improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +     improved by: d3x\n    // +     bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // *     example 1: explode(' ', 'Kevin van Zonneveld');\n    // *     returns 1: {0: 'Kevin', 1: 'van', 2: 'Zonneveld'}\n    // *     example 2: explode('=', 'a=bc=d', 2);\n    // *     returns 2: ['a', 'bc=d']\n    var emptyArray = {\n        0: ''\n    };\n \n    // third argument is not required\n    if (arguments.length < 2 || typeof arguments[0] == 'undefined' || typeof arguments[1] == 'undefined') {\n        return null;\n    }\n \n    if (delimiter === '' || delimiter === false || delimiter === null) {\n        return false;\n    }\n \n    if (typeof delimiter == 'function' || typeof delimiter == 'object' || typeof string == 'function' || typeof string == 'object') {\n        return emptyArray;\n    }\n \n    if (delimiter === true) {\n        delimiter = '1';\n    }\n \n    if (!limit) {\n        return string.toString().split(delimiter.toString());\n    } else {\n        // support for limit argument\n        var splitted = string.toString().split(delimiter.toString());\n        var partA = splitted.splice(0, limit - 1);\n        var partB = splitted.join(delimiter.toString());\n        partA.push(partB);\n        return partA;\n    }\n}\n\nfunction utf8_encode (argString) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: sowberry\n    // +    tweaked by: Jack\n    // +   bugfixed by: Onno Marsman\n    // +   improved by: Yves Sucaet\n    // +   bugfixed by: Onno Marsman\n    // +   bugfixed by: Ulrich\n    // +   bugfixed by: Rafal Kukawski\n    // *     example 1: utf8_encode('Kevin van Zonneveld');\n    // *     returns 1: 'Kevin van Zonneveld'\n\n    if (argString === null || typeof argString === \"undefined\") {\n        return \"\";\n    }\n\n    var string = (argString + ''); // .replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\n    var utftext = \"\",\n        start, end, stringl = 0;\n\n    start = end = 0;\n    stringl = string.length;\n    for (var n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192) + String.fromCharCode((c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224) + String.fromCharCode(((c1 >> 6) & 63) | 128) + String.fromCharCode((c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.slice(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.slice(start, stringl);\n    }\n\n    return utftext;\n}\n\nfunction sha1 (str) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Webtoolkit.info (http://www.webtoolkit.info/)\n    // + namespaced by: Michael White (http://getsprink.com)\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // -    depends on: utf8_encode\n    // *     example 1: sha1('Kevin van Zonneveld');\n    // *     returns 1: '54916d2e62f65b3afa6e192e6a601cdbe5cb5897'\n    var rotate_left = function (n, s) {\n        var t4 = (n << s) | (n >>> (32 - s));\n        return t4;\n    };\n\n    var cvt_hex = function (val) {\n        var str = \"\";\n        var i;\n        var v;\n\n        for (i = 7; i >= 0; i--) {\n            v = (val >>> (i * 4)) & 0x0f;\n            str += v.toString(16);\n        }\n        return str;\n    };\n\n    var blockstart;\n    var i, j;\n    var W = new Array(80);\n    var H0 = 0x67452301;\n    var H1 = 0xEFCDAB89;\n    var H2 = 0x98BADCFE;\n    var H3 = 0x10325476;\n    var H4 = 0xC3D2E1F0;\n    var A, B, C, D, E;\n    var temp;\n\n    str = this.utf8_encode(str);\n    var str_len = str.length;\n\n    var word_array = [];\n    for (i = 0; i < str_len - 3; i += 4) {\n        j = str.charCodeAt(i) << 24 | str.charCodeAt(i + 1) << 16 | str.charCodeAt(i + 2) << 8 | str.charCodeAt(i + 3);\n        word_array.push(j);\n    }\n\n    switch (str_len % 4) {\n    case 0:\n        i = 0x080000000;\n        break;\n    case 1:\n        i = str.charCodeAt(str_len - 1) << 24 | 0x0800000;\n        break;\n    case 2:\n        i = str.charCodeAt(str_len - 2) << 24 | str.charCodeAt(str_len - 1) << 16 | 0x08000;\n        break;\n    case 3:\n        i = str.charCodeAt(str_len - 3) << 24 | str.charCodeAt(str_len - 2) << 16 | str.charCodeAt(str_len - 1) << 8 | 0x80;\n        break;\n    }\n\n    word_array.push(i);\n\n    while ((word_array.length % 16) != 14) {\n        word_array.push(0);\n    }\n\n    word_array.push(str_len >>> 29);\n    word_array.push((str_len << 3) & 0x0ffffffff);\n\n    for (blockstart = 0; blockstart < word_array.length; blockstart += 16) {\n        for (i = 0; i < 16; i++) {\n            W[i] = word_array[blockstart + i];\n        }\n        for (i = 16; i <= 79; i++) {\n            W[i] = rotate_left(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n        }\n\n\n        A = H0;\n        B = H1;\n        C = H2;\n        D = H3;\n        E = H4;\n\n        for (i = 0; i <= 19; i++) {\n            temp = (rotate_left(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5A827999) & 0x0ffffffff;\n            E = D;\n            D = C;\n            C = rotate_left(B, 30);\n            B = A;\n            A = temp;\n        }\n\n        for (i = 20; i <= 39; i++) {\n            temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ED9EBA1) & 0x0ffffffff;\n            E = D;\n            D = C;\n            C = rotate_left(B, 30);\n            B = A;\n            A = temp;\n        }\n\n        for (i = 40; i <= 59; i++) {\n            temp = (rotate_left(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8F1BBCDC) & 0x0ffffffff;\n            E = D;\n            D = C;\n            C = rotate_left(B, 30);\n            B = A;\n            A = temp;\n        }\n\n        for (i = 60; i <= 79; i++) {\n            temp = (rotate_left(A, 5) + (B ^ C ^ D) + E + W[i] + 0xCA62C1D6) & 0x0ffffffff;\n            E = D;\n            D = C;\n            C = rotate_left(B, 30);\n            B = A;\n            A = temp;\n        }\n\n        H0 = (H0 + A) & 0x0ffffffff;\n        H1 = (H1 + B) & 0x0ffffffff;\n        H2 = (H2 + C) & 0x0ffffffff;\n        H3 = (H3 + D) & 0x0ffffffff;\n        H4 = (H4 + E) & 0x0ffffffff;\n    }\n\n    temp = cvt_hex(H0) + cvt_hex(H1) + cvt_hex(H2) + cvt_hex(H3) + cvt_hex(H4);\n    return temp.toLowerCase();\n}\n\n/* from http://phpjs.org/functions/urldecode:572 */\nfunction urldecode (str) {\n    // Decodes URL-encoded string  \n    // \n    // version: 1103.1210\n    // discuss at: http://phpjs.org/functions/urldecode\n    // +   original by: Philip Peterson\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +      input by: AJ\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: travc\n    // +      input by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   improved by: Lars Fischer\n    // +      input by: Ratheous\n    // +   improved by: Orlando\n    // +      reimplemented by: Brett Zamir (http://brett-zamir.me)\n    // +      bugfixed by: Rob\n    // +      input by: e-mike\n    // +   improved by: Brett Zamir (http://brett-zamir.me)\n    // %        note 1: info on what encoding functions to use from: http://xkr.us/articles/javascript/encode-compare/\n    // %        note 2: Please be aware that this function expects to decode from UTF-8 encoded strings, as found on\n    // %        note 2: pages served as UTF-8\n    // *     example 1: urldecode('Kevin+van+Zonneveld%21');\n    // *     returns 1: 'Kevin van Zonneveld!'\n    // *     example 2: urldecode('http%3A%2F%2Fkevin.vanzonneveld.net%2F');\n    // *     returns 2: 'http://kevin.vanzonneveld.net/'\n    // *     example 3: urldecode('http%3A%2F%2Fwww.google.nl%2Fsearch%3Fq%3Dphp.js%26ie%3Dutf-8%26oe%3Dutf-8%26aq%3Dt%26rls%3Dcom.ubuntu%3Aen-US%3Aunofficial%26client%3Dfirefox-a');\n    // *     returns 3: 'http://www.google.nl/search?q=php.js&ie=utf-8&oe=utf-8&aq=t&rls=com.ubuntu:en-US:unofficial&client=firefox-a'\n    return decodeURIComponent((str + '').replace(/\\+/g, '%20'));\n}\n\n/* http://phpjs.org/functions/parse_url:485 version 1009.2513 */\n// note: Does not replace invalid characters with '_' as in PHP, nor does it return false for bad URLs\nfunction parse_url (str, component) {\n\tvar o = {\n\t\tstrictMode: false,\n\t\tkey: [\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],\n\t\tq: {\n\t\t\tname: \"queryKey\",\n\t\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t\t},\n\t\tparser: {\n\t\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\t\tloose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/\\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/ \n\t\t\t\t// Added one optional slash to post-protocol to catch file:/// (should restrict this)\n\t\t}\n\t};\n\tvar m = o.parser[o.strictMode ? \"strict\" : \"loose\"].exec(str),\n\turi = {},\n\ti = 14;\n\twhile (i--) { uri[o.key[i]] = m[i] || \"\"; }\n\tswitch (component) {\n\t\tcase 'PHP_URL_SCHEME':\n\t\t\treturn uri.protocol;\n\t\tcase 'PHP_URL_HOST':\n\t\t\treturn uri.host;\n\t\tcase 'PHP_URL_PORT':\n\t\t\treturn uri.port;\n\t\tcase 'PHP_URL_USER':\n\t\t\treturn uri.user;\n\t\tcase 'PHP_URL_PASS':\n\t\t\treturn uri.password;\n\t\tcase 'PHP_URL_PATH':\n\t\t\treturn uri.path;\n\t\tcase 'PHP_URL_QUERY':\n\t\t\treturn uri.query;\n\t\tcase 'PHP_URL_FRAGMENT':\n\t\t\treturn uri.anchor;\n\t\tdefault:\n\t\t\tvar retArr = {};\n\t\t\tif (uri.protocol !== '') {retArr.scheme=uri.protocol;}\n\t\t\tif (uri.host !== '') {retArr.host=uri.host;}\n\t\t\tif (uri.port !== '') {retArr.port=uri.port;}\n\t\t\tif (uri.user !== '') {retArr.user=uri.user;}\n\t\t\tif (uri.password !== '') {retArr.pass=uri.password;}\n\t\t\tif (uri.path !== '') {retArr.path=uri.path;}\n\t\t\tif (uri.query !== '') {retArr.query=uri.query;}\n\t\t\tif (uri.anchor !== '') {retArr.fragment=uri.anchor;}\n\t\t\treturn retArr;\n\t}\n}\n\n/* from http://phpjs.org/functions/parse_str:484 */\nfunction parse_str (str, array) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Cagri Ekin\n    // +   improved by: Michael White (http://getsprink.com)\n    // +    tweaked by: Jack\n    // +   bugfixed by: Onno Marsman\n    // +   reimplemented by: stag019\n    // +   bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // +   bugfixed by: stag019\n    // -    depends on: urldecode\n    // +   input by: Dreamer\n    // +   bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // %        note 1: When no argument is specified, will put variables in global scope.\n    // *     example 1: var arr = {};\n    // *     example 1: parse_str('first=foo&second=bar', arr);\n    // *     results 1: arr == { first: 'foo', second: 'bar' }\n    // *     example 2: var arr = {};\n    // *     example 2: parse_str('str_a=Jack+and+Jill+didn%27t+see+the+well.', arr);\n    // *     results 2: arr == { str_a: \"Jack and Jill didn't see the well.\" }\n    var glue1 = '=',\n        glue2 = '&',\n        array2 = String(str).replace(/^&?([\\s\\S]*?)&?$/, '$1').split(glue2),\n        i, j, chr, tmp, key, value, bracket, keys, evalStr, that = this,\n        fixStr = function (str) {\n            return that.urldecode(str).replace(/([\\\\\"'])/g, '\\\\$1').replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n        };\n\n    if (!array) {\n        array = this.window;\n    }\n\n    for (i = 0; i < array2.length; i++) {\n        tmp = array2[i].split(glue1);\n        if (tmp.length < 2) {\n            tmp = [tmp, ''];\n        }\n        key = fixStr(tmp[0]);\n        value = fixStr(tmp[1]);\n        while (key.charAt(0) === ' ') {\n            key = key.substr(1);\n        }\n        if (key.indexOf('\\0') !== -1) {\n            key = key.substr(0, key.indexOf('\\0'));\n        }\n        if (key && key.charAt(0) !== '[') {\n            keys = [];\n            bracket = 0;\n            for (j = 0; j < key.length; j++) {\n                if (key.charAt(j) === '[' && !bracket) {\n                    bracket = j + 1;\n                } else if (key.charAt(j) === ']') {\n                    if (bracket) {\n                        if (!keys.length) {\n                            keys.push(key.substr(0, bracket - 1));\n                        }\n                        keys.push(key.substr(bracket, j - bracket));\n                        bracket = 0;\n                        if (key.charAt(j + 1) !== '[') {\n                            break;\n                        }\n                    }\n                }\n            }\n            if (!keys.length) {\n                keys = [key];\n            }\n            for (j = 0; j < keys[0].length; j++) {\n                chr = keys[0].charAt(j);\n                if (chr === ' ' || chr === '.' || chr === '[') {\n                    keys[0] = keys[0].substr(0, j) + '_' + keys[0].substr(j + 1);\n                }\n                if (chr === '[') {\n                    break;\n                }\n            }\n            evalStr = 'array';\n            for (j = 0; j < keys.length; j++) {\n                key = keys[j];\n                if ((key !== '' && key !== ' ') || j === 0) {\n                    key = \"'\" + key + \"'\";\n                } else {\n                    key = eval(evalStr + '.push([]);') - 1;\n                }\n                evalStr += '[' + key + ']';\n                if (j !== keys.length - 1 && eval('typeof ' + evalStr) === 'undefined') {\n                    eval(evalStr + ' = [];');\n                }\n            }\n            evalStr += \" = '\" + value + \"';\\n\";\n            eval(evalStr);\n        }\n    }\n}\n\nfunction htmlspecialchars (string, quote_style, charset, double_encode) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Mirek Slugen\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Nathan\n    // +   bugfixed by: Arno\n    // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +    bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: Ratheous\n    // +      input by: Mailfaker (http://www.weedem.fr/)\n    // +      reimplemented by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: felix\n    // +    bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // %        note 1: charset argument not supported\n    // *     example 1: htmlspecialchars(\"<a href='test'>Test</a>\", 'ENT_QUOTES');\n    // *     returns 1: '&lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;'\n    // *     example 2: htmlspecialchars(\"ab\\\"c'd\", ['ENT_NOQUOTES', 'ENT_QUOTES']);\n    // *     returns 2: 'ab\"c&#039;d'\n    // *     example 3: htmlspecialchars(\"my \"&entity;\" is still here\", null, null, false);\n    // *     returns 3: 'my &quot;&entity;&quot; is still here'\n    var optTemp = 0,\n        i = 0,\n        noquotes = false;\n    if (typeof quote_style === 'undefined' || quote_style === null) {\n        quote_style = 2;\n    }\n    string = string.toString();\n    if (double_encode !== false) { // Put this first to avoid double-encoding\n        string = string.replace(/&/g, '&amp;');\n    }\n    string = string.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n    var OPTS = {\n        'ENT_NOQUOTES': 0,\n        'ENT_HTML_QUOTE_SINGLE': 1,\n        'ENT_HTML_QUOTE_DOUBLE': 2,\n        'ENT_COMPAT': 2,\n        'ENT_QUOTES': 3,\n        'ENT_IGNORE': 4\n    };\n    if (quote_style === 0) {\n        noquotes = true;\n    }\n    if (typeof quote_style !== 'number') { // Allow for a single string or an array of string flags\n        quote_style = [].concat(quote_style);\n        for (i = 0; i < quote_style.length; i++) {\n            // Resolve string input to bitwise e.g. 'ENT_IGNORE' becomes 4\n            if (OPTS[quote_style[i]] === 0) {\n                noquotes = true;\n            }\n            else if (OPTS[quote_style[i]]) {\n                optTemp = optTemp | OPTS[quote_style[i]];\n            }\n        }\n        quote_style = optTemp;\n    }\n    if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {\n        string = string.replace(/'/g, '&#039;');\n    }\n    if (!noquotes) {\n        string = string.replace(/\"/g, '&quot;');\n    }\n\n    return string;\n}\n\nfunction htmlspecialchars_decode (string, quote_style) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Mirek Slugen\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Mateusz \"loonquawl\" Zalega\n    // +      input by: ReverseSyntax\n    // +      input by: Slawomir Kaniecki\n    // +      input by: Scott Cariss\n    // +      input by: Francois\n    // +   bugfixed by: Onno Marsman\n    // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +   bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: Ratheous\n    // +      input by: Mailfaker (http://www.weedem.fr/)\n    // +      reimplemented by: Brett Zamir (http://brett-zamir.me)\n    // +    bugfixed by: Brett Zamir (http://brett-zamir.me)\n    // *     example 1: htmlspecialchars_decode(\"<p>this -&gt; &quot;</p>\", 'ENT_NOQUOTES');\n    // *     returns 1: '<p>this -> &quot;</p>'\n    // *     example 2: htmlspecialchars_decode(\"&amp;quot;\");\n    // *     returns 2: '&quot;'\n    var optTemp = 0,\n        i = 0,\n        noquotes = false;\n    if (typeof quote_style === 'undefined') {\n        quote_style = 2;\n    }\n    string = string.toString().replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n    var OPTS = {\n        'ENT_NOQUOTES': 0,\n        'ENT_HTML_QUOTE_SINGLE': 1,\n        'ENT_HTML_QUOTE_DOUBLE': 2,\n        'ENT_COMPAT': 2,\n        'ENT_QUOTES': 3,\n        'ENT_IGNORE': 4\n    };\n    if (quote_style === 0) {\n        noquotes = true;\n    }\n    if (typeof quote_style !== 'number') { // Allow for a single string or an array of string flags\n        quote_style = [].concat(quote_style);\n        for (i = 0; i < quote_style.length; i++) {\n            // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4\n            if (OPTS[quote_style[i]] === 0) {\n                noquotes = true;\n            } else if (OPTS[quote_style[i]]) {\n                optTemp = optTemp | OPTS[quote_style[i]];\n            }\n        }\n        quote_style = optTemp;\n    }\n    if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {\n        string = string.replace(/&#0*39;/g, \"'\"); // PHP doesn't currently escape if more than one 0, but it should\n        // string = string.replace(/&apos;|&#x0*27;/g, \"'\"); // This would also be useful here, but not a part of PHP\n    }\n    if (!noquotes) {\n        string = string.replace(/&quot;/g, '\"');\n    }\n    // Put this in last place to avoid escape being double-decoded\n    string = string.replace(/&amp;/g, '&');\n\n    return string;\n}\n\nfunction setlocale (category, locale) {\n\t// Set locale information  \n\t// \n\t// version: 1107.2516\n\t// discuss at: http://phpjs.org/functions/setlocale\n\t// +   original by: Brett Zamir (http://brett-zamir.me)\n\t// +   derived from: Blues at http://hacks.bluesmoon.info/strftime/strftime.js\n\t// +   derived from: YUI Library: http://developer.yahoo.com/yui/docs/YAHOO.util.DateLocale.html\n\t// -    depends on: getenv\n\t// %          note 1: Is extensible, but currently only implements locales en,\n\t// %          note 1: en_US, en_GB, en_AU, fr, and fr_CA for LC_TIME only; C for LC_CTYPE;\n\t// %          note 1: C and en for LC_MONETARY/LC_NUMERIC; en for LC_COLLATE\n\t// %          note 2: Uses global: php_js to store locale info\n\t// %          note 3: Consider using http://demo.icu-project.org/icu-bin/locexp as basis for localization (as in i18n_loc_set_default())\n\t// *     example 1: setlocale('LC_ALL', 'en_US');\n\t// *     returns 1: 'en_US'\n\tvar categ = '',\n\tcats = [],\n\ti = 0,\n\td = this.window.document;\n \n\t// BEGIN STATIC\n\tvar _copy = function _copy(orig) {\n\t\tif (orig instanceof RegExp) {\n\t\t\treturn new RegExp(orig);\n\t\t} else if (orig instanceof Date) {\n\t\t\treturn new Date(orig);\n\t\t}\n\t\tvar newObj = {};\n\t\tfor (var i in orig) {\n\t\t\tif (typeof orig[i] === 'object') {\n\t\t\t\tnewObj[i] = _copy(orig[i]);\n\t\t\t} else {\n\t\t\t\tnewObj[i] = orig[i];\n\t\t\t}\n\t\t}\n\t\treturn newObj;\n\t};\n \n\t// Function usable by a ngettext implementation (apparently not an accessible part of setlocale(), but locale-specific)\n\t// See http://www.gnu.org/software/gettext/manual/gettext.html#Plural-forms though amended with others from\n\t// https://developer.mozilla.org/En/Localization_and_Plurals (new categories noted with \"MDC\" below, though\n\t// not sure of whether there is a convention for the relative order of these newer groups as far as ngettext)\n\t// The function name indicates the number of plural forms (nplural)\n\t// Need to look into http://cldr.unicode.org/ (maybe future JavaScript); Dojo has some functions (under new BSD),\n\t// including JSON conversions of LDML XML from CLDR: http://bugs.dojotoolkit.org/browser/dojo/trunk/cldr\n\t// and docs at http://api.dojotoolkit.org/jsdoc/HEAD/dojo.cldr\n\tvar _nplurals1 = function (n) { // e.g., Japanese\n\t\treturn 0;\n\t};\n\tvar _nplurals2a = function (n) { // e.g., English\n\t\treturn n !== 1 ? 1 : 0;\n\t};\n\tvar _nplurals2b = function (n) { // e.g., French\n\t\treturn n > 1 ? 1 : 0;\n\t};\n\tvar _nplurals2c = function (n) { // e.g., Icelandic (MDC)\n\t\treturn n % 10 === 1 && n % 100 !== 11 ? 0 : 1;\n\t};\n\tvar _nplurals3a = function (n) { // e.g., Latvian (MDC has a different order from gettext)\n\t\treturn n % 10 === 1 && n % 100 !== 11 ? 0 : n !== 0 ? 1 : 2;\n\t};\n\tvar _nplurals3b = function (n) { // e.g., Scottish Gaelic\n\t\treturn n === 1 ? 0 : n === 2 ? 1 : 2;\n\t};\n\tvar _nplurals3c = function (n) { // e.g., Romanian\n\t\treturn n === 1 ? 0 : (n === 0 || (n % 100 > 0 && n % 100 < 20)) ? 1 : 2;\n\t};\n\tvar _nplurals3d = function (n) { // e.g., Lithuanian (MDC has a different order from gettext)\n\t\treturn n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n\t};\n\tvar _nplurals3e = function (n) { // e.g., Croatian\n\t\treturn n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n\t};\n\tvar _nplurals3f = function (n) { // e.g., Slovak\n\t\treturn n === 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2;\n\t};\n\tvar _nplurals3g = function (n) { // e.g., Polish\n\t\treturn n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2;\n\t};\n\tvar _nplurals3h = function (n) { // e.g., Macedonian (MDC)\n\t\treturn n % 10 === 1 ? 0 : n % 10 === 2 ? 1 : 2;\n\t};\n\tvar _nplurals4a = function (n) { // e.g., Slovenian\n\t\treturn n % 100 === 1 ? 0 : n % 100 === 2 ? 1 : n % 100 === 3 || n % 100 === 4 ? 2 : 3;\n\t};\n\tvar _nplurals4b = function (n) { // e.g., Maltese (MDC)\n\t\treturn n === 1 ? 0 : n === 0 || (n % 100 && n % 100 <= 10) ? 1 : n % 100 >= 11 && n % 100 <= 19 ? 2 : 3;\n\t};\n\tvar _nplurals5 = function (n) { // e.g., Irish Gaeilge (MDC)\n\t\treturn n === 1 ? 0 : n === 2 ? 1 : n >= 3 && n <= 6 ? 2 : n >= 7 && n <= 10 ? 3 : 4;\n\t};\n\tvar _nplurals6 = function (n) { // e.g., Arabic (MDC) - Per MDC puts 0 as last group\n\t\treturn n === 0 ? 5 : n === 1 ? 0 : n === 2 ? 1 : n % 100 >= 3 && n % 100 <= 10 ? 2 : n % 100 >= 11 && n % 100 <= 99 ? 3 : 4;\n\t};\n\t// END STATIC\n\t// BEGIN REDUNDANT\n\tthis.php_js = this.php_js || {};\n \n\tvar phpjs = this.php_js;\n \n\t// Reconcile Windows vs. *nix locale names?\n\t// Allow different priority orders of languages, esp. if implement gettext as in\n\t//     LANGUAGE env. var.? (e.g., show German if French is not available)\n\tif (!phpjs.locales) {\n\t\t// Can add to the locales\n\t\tphpjs.locales = {};\n \n\t\tphpjs.locales.en = {\n\t\t\t'LC_COLLATE': // For strcoll\n \n \n\t\t\tfunction (str1, str2) { // Fix: This one taken from strcmp, but need for other locales; we don't use localeCompare since its locale is not settable\n\t\t\t\treturn (str1 == str2) ? 0 : ((str1 > str2) ? 1 : -1);\n\t\t\t},\n\t\t\t'LC_CTYPE': { // Need to change any of these for English as opposed to C?\n\t\t\t\tan: /^[A-Za-z\\d]+$/g,\n\t\t\t\tal: /^[A-Za-z]+$/g,\n\t\t\t\tct: /^[\\u0000-\\u001F\\u007F]+$/g,\n\t\t\t\tdg: /^[\\d]+$/g,\n\t\t\t\tgr: /^[\\u0021-\\u007E]+$/g,\n\t\t\t\tlw: /^[a-z]+$/g,\n\t\t\t\tpr: /^[\\u0020-\\u007E]+$/g,\n\t\t\t\tpu: /^[\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E]+$/g,\n\t\t\t\tsp: /^[\\f\\n\\r\\t\\v ]+$/g,\n\t\t\t\tup: /^[A-Z]+$/g,\n\t\t\t\txd: /^[A-Fa-f\\d]+$/g,\n\t\t\t\tCODESET: 'UTF-8',\n\t\t\t\t// Used by sql_regcase\n\t\t\t\tlower: 'abcdefghijklmnopqrstuvwxyz',\n\t\t\t\tupper: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\t\t\t},\n\t\t\t'LC_TIME': { // Comments include nl_langinfo() constant equivalents and any changes from Blues' implementation\n\t\t\t\ta: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n\t\t\t\t// ABDAY_\n\t\t\t\tA: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n\t\t\t\t// DAY_\n\t\t\t\tb: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n\t\t\t\t// ABMON_\n\t\t\t\tB: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\t\t\t\t// MON_\n\t\t\t\tc: '%a %d %b %Y %r %Z',\n\t\t\t\t// D_T_FMT // changed %T to %r per results\n\t\t\t\tp: ['AM', 'PM'],\n\t\t\t\t// AM_STR/PM_STR\n\t\t\t\tP: ['am', 'pm'],\n\t\t\t\t// Not available in nl_langinfo()\n\t\t\t\tr: '%I:%M:%S %p',\n\t\t\t\t// T_FMT_AMPM (Fixed for all locales)\n\t\t\t\tx: '%m/%d/%Y',\n\t\t\t\t// D_FMT // switched order of %m and %d; changed %y to %Y (C uses %y)\n\t\t\t\tX: '%r',\n\t\t\t\t// T_FMT // changed from %T to %r  (%T is default for C, not English US)\n\t\t\t\t// Following are from nl_langinfo() or http://www.cptec.inpe.br/sx4/sx4man2/g1ab02e/strftime.4.html\n\t\t\t\talt_digits: '',\n\t\t\t\t// e.g., ordinal\n\t\t\t\tERA: '',\n\t\t\t\tERA_YEAR: '',\n\t\t\t\tERA_D_T_FMT: '',\n\t\t\t\tERA_D_FMT: '',\n\t\t\t\tERA_T_FMT: ''\n\t\t\t},\n\t\t\t// Assuming distinction between numeric and monetary is thus:\n\t\t\t// See below for C locale\n\t\t\t'LC_MONETARY': { // Based on Windows \"english\" (English_United States.1252) locale\n\t\t\t\tint_curr_symbol: 'USD',\n\t\t\t\tcurrency_symbol: '$',\n\t\t\t\tmon_decimal_point: '.',\n\t\t\t\tmon_thousands_sep: ',',\n\t\t\t\tmon_grouping: [3],\n\t\t\t\t// use mon_thousands_sep; \"\" for no grouping; additional array members indicate successive group lengths after first group (e.g., if to be 1,23,456, could be [3, 2])\n\t\t\t\tpositive_sign: '',\n\t\t\t\tnegative_sign: '-',\n\t\t\t\tint_frac_digits: 2,\n\t\t\t\t// Fractional digits only for money defaults?\n\t\t\t\tfrac_digits: 2,\n\t\t\t\tp_cs_precedes: 1,\n\t\t\t\t// positive currency symbol follows value = 0; precedes value = 1\n\t\t\t\tp_sep_by_space: 0,\n\t\t\t\t// 0: no space between curr. symbol and value; 1: space sep. them unless symb. and sign are adjacent then space sep. them from value; 2: space sep. sign and value unless symb. and sign are adjacent then space separates\n\t\t\t\tn_cs_precedes: 1,\n\t\t\t\t// see p_cs_precedes\n\t\t\t\tn_sep_by_space: 0,\n\t\t\t\t// see p_sep_by_space\n\t\t\t\tp_sign_posn: 3,\n\t\t\t\t// 0: parentheses surround quantity and curr. symbol; 1: sign precedes them; 2: sign follows them; 3: sign immed. precedes curr. symbol; 4: sign immed. succeeds curr. symbol\n\t\t\t\tn_sign_posn: 0 // see p_sign_posn\n\t\t\t},\n\t\t\t'LC_NUMERIC': { // Based on Windows \"english\" (English_United States.1252) locale\n\t\t\t\tdecimal_point: '.',\n\t\t\t\tthousands_sep: ',',\n\t\t\t\tgrouping: [3] // see mon_grouping, but for non-monetary values (use thousands_sep)\n\t\t\t},\n\t\t\t'LC_MESSAGES': {\n\t\t\t\tYESEXPR: '^[yY].*',\n\t\t\t\tNOEXPR: '^[nN].*',\n\t\t\t\tYESSTR: '',\n\t\t\t\tNOSTR: ''\n\t\t\t},\n\t\t\tnplurals: _nplurals2a\n\t\t};\n\t\tphpjs.locales.en_US = _copy(phpjs.locales.en);\n\t\tphpjs.locales.en_US.LC_TIME.c = '%a %d %b %Y %r %Z';\n\t\tphpjs.locales.en_US.LC_TIME.x = '%D';\n\t\tphpjs.locales.en_US.LC_TIME.X = '%r';\n\t\t// The following are based on *nix settings\n\t\tphpjs.locales.en_US.LC_MONETARY.int_curr_symbol = 'USD ';\n\t\tphpjs.locales.en_US.LC_MONETARY.p_sign_posn = 1;\n\t\tphpjs.locales.en_US.LC_MONETARY.n_sign_posn = 1;\n\t\tphpjs.locales.en_US.LC_MONETARY.mon_grouping = [3, 3];\n\t\tphpjs.locales.en_US.LC_NUMERIC.thousands_sep = '';\n\t\tphpjs.locales.en_US.LC_NUMERIC.grouping = [];\n \n\t\tphpjs.locales.en_GB = _copy(phpjs.locales.en);\n\t\tphpjs.locales.en_GB.LC_TIME.r = '%l:%M:%S %P %Z';\n \n\t\tphpjs.locales.en_AU = _copy(phpjs.locales.en_GB);\n\t\tphpjs.locales.C = _copy(phpjs.locales.en); // Assume C locale is like English (?) (We need C locale for LC_CTYPE)\n\t\tphpjs.locales.C.LC_CTYPE.CODESET = 'ANSI_X3.4-1968';\n\t\tphpjs.locales.C.LC_MONETARY = {\n\t\t\tint_curr_symbol: '',\n\t\t\tcurrency_symbol: '',\n\t\t\tmon_decimal_point: '',\n\t\t\tmon_thousands_sep: '',\n\t\t\tmon_grouping: [],\n\t\t\tp_cs_precedes: 127,\n\t\t\tp_sep_by_space: 127,\n\t\t\tn_cs_precedes: 127,\n\t\t\tn_sep_by_space: 127,\n\t\t\tp_sign_posn: 127,\n\t\t\tn_sign_posn: 127,\n\t\t\tpositive_sign: '',\n\t\t\tnegative_sign: '',\n\t\t\tint_frac_digits: 127,\n\t\t\tfrac_digits: 127\n\t\t};\n\t\tphpjs.locales.C.LC_NUMERIC = {\n\t\t\tdecimal_point: '.',\n\t\t\tthousands_sep: '',\n\t\t\tgrouping: []\n\t\t};\n\t\tphpjs.locales.C.LC_TIME.c = '%a %b %e %H:%M:%S %Y'; // D_T_FMT\n\t\tphpjs.locales.C.LC_TIME.x = '%m/%d/%y'; // D_FMT\n\t\tphpjs.locales.C.LC_TIME.X = '%H:%M:%S'; // T_FMT\n\t\tphpjs.locales.C.LC_MESSAGES.YESEXPR = '^[yY]';\n\t\tphpjs.locales.C.LC_MESSAGES.NOEXPR = '^[nN]';\n \n\t\tphpjs.locales.fr = _copy(phpjs.locales.en);\n\t\tphpjs.locales.fr.nplurals = _nplurals2b;\n\t\tphpjs.locales.fr.LC_TIME.a = ['dim', 'lun', 'mar', 'mer', 'jeu', 'ven', 'sam'];\n\t\tphpjs.locales.fr.LC_TIME.A = ['dimanche', 'lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'];\n\t\tphpjs.locales.fr.LC_TIME.b = ['jan', 'f\\u00E9v', 'mar', 'avr', 'mai', 'jun', 'jui', 'ao\\u00FB', 'sep', 'oct', 'nov', 'd\\u00E9c'];\n\t\tphpjs.locales.fr.LC_TIME.B = ['janvier', 'f\\u00E9vrier', 'mars', 'avril', 'mai', 'juin', 'juillet', 'ao\\u00FBt', 'septembre', 'octobre', 'novembre', 'd\\u00E9cembre'];\n\t\tphpjs.locales.fr.LC_TIME.c = '%a %d %b %Y %T %Z';\n\t\tphpjs.locales.fr.LC_TIME.p = ['', ''];\n\t\tphpjs.locales.fr.LC_TIME.P = ['', ''];\n\t\tphpjs.locales.fr.LC_TIME.x = '%d.%m.%Y';\n\t\tphpjs.locales.fr.LC_TIME.X = '%T';\n \n\t\tphpjs.locales.fr_CA = _copy(phpjs.locales.fr);\n\t\tphpjs.locales.fr_CA.LC_TIME.x = '%Y-%m-%d';\n\t}\n\tif (!phpjs.locale) {\n\t\tphpjs.locale = 'en_US';\n\t\tvar NS_XHTML = 'http://www.w3.org/1999/xhtml';\n\t\tvar NS_XML = 'http://www.w3.org/XML/1998/namespace';\n\t\tif (d.getElementsByTagNameNS && d.getElementsByTagNameNS(NS_XHTML, 'html')[0]) {\n\t\t\tif (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS && d.getElementsByTagNameNS(NS_XHTML, 'html')[0].getAttributeNS(NS_XML, 'lang')) {\n\t\t\t\tphpjs.locale = d.getElementsByTagName(NS_XHTML, 'html')[0].getAttributeNS(NS_XML, 'lang');\n\t\t\t} else if (d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang) { // XHTML 1.0 only\n\t\t\t\tphpjs.locale = d.getElementsByTagNameNS(NS_XHTML, 'html')[0].lang;\n\t\t\t}\n\t\t} else if (d.getElementsByTagName('html')[0] && d.getElementsByTagName('html')[0].lang) {\n\t\t\tphpjs.locale = d.getElementsByTagName('html')[0].lang;\n\t\t}\n\t}\n\tphpjs.locale = phpjs.locale.replace('-', '_'); // PHP-style\n\t// Fix locale if declared locale hasn't been defined\n\tif (!(phpjs.locale in phpjs.locales)) {\n\t\tif (phpjs.locale.replace(/_[a-zA-Z]+$/, '') in phpjs.locales) {\n\t\t\tphpjs.locale = phpjs.locale.replace(/_[a-zA-Z]+$/, '');\n\t\t}\n\t}\n \n\tif (!phpjs.localeCategories) {\n\t\tphpjs.localeCategories = {\n\t\t\t'LC_COLLATE': phpjs.locale,\n\t\t\t// for string comparison, see strcoll()\n\t\t\t'LC_CTYPE': phpjs.locale,\n\t\t\t// for character classification and conversion, for example strtoupper()\n\t\t\t'LC_MONETARY': phpjs.locale,\n\t\t\t// for localeconv()\n\t\t\t'LC_NUMERIC': phpjs.locale,\n\t\t\t// for decimal separator (See also localeconv())\n\t\t\t'LC_TIME': phpjs.locale,\n\t\t\t// for date and time formatting with strftime()\n\t\t\t'LC_MESSAGES': phpjs.locale // for system responses (available if PHP was compiled with libintl)\n\t\t};\n\t}\n\t// END REDUNDANT\n\tif (locale === null || locale === '') {\n\t\tlocale = this.getenv(category) || this.getenv('LANG');\n\t} else if (Object.prototype.toString.call(locale) === '[object Array]') {\n\t\tfor (i = 0; i < locale.length; i++) {\n\t\t\tif (!(locale[i] in this.php_js.locales)) {\n\t\t\t\tif (i === locale.length - 1) {\n\t\t\t\t\treturn false; // none found\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlocale = locale[i];\n\t\t\tbreak;\n\t\t}\n\t}\n \n\t// Just get the locale\n\tif (locale === '0' || locale === 0) {\n\t\tif (category === 'LC_ALL') {\n\t\t\tfor (categ in this.php_js.localeCategories) {\n\t\t\t\tcats.push(categ + '=' + this.php_js.localeCategories[categ]); // Add \".UTF-8\" or allow \".@latint\", etc. to the end?\n\t\t\t}\n\t\t\treturn cats.join(';');\n\t\t}\n\t\treturn this.php_js.localeCategories[category];\n\t}\n \n\tif (!(locale in this.php_js.locales)) {\n\t\treturn false; // Locale not found\n\t}\n \n\t// Set and get locale\n\tif (category === 'LC_ALL') {\n\t\tfor (categ in this.php_js.localeCategories) {\n\t\t\tthis.php_js.localeCategories[categ] = locale;\n\t\t}\n\t} else {\n\t\tthis.php_js.localeCategories[category] = locale;\n\t}\n\treturn locale;\n}\n\n/**\n * @param {String} fmt format string (C library strftime-style)\n * @param {String} timestamp ISO 8601 formatted time string\n * @returns {String}\n */\nfunction strftime (fmt, timestamp) {\n\t// Format a local time/date according to locale settings  \n\t// \n\t// version: 1107.2516\n\t// discuss at: http://phpjs.org/functions/strftime\n\t// +      original by: Blues (http://tech.bluesmoon.info/)\n\t// + reimplemented by: Brett Zamir (http://brett-zamir.me)\n\t// +   input by: Alex\n\t// +   bugfixed by: Brett Zamir (http://brett-zamir.me)\n\t// +   improved by: Brett Zamir (http://brett-zamir.me)\n\t// -       depends on: setlocale\n\t// %        note 1: Uses global: php_js to store locale info\n\t// *        example 1: strftime(\"%A\", 1062462400); // Return value will depend on date and locale\n\t// *        returns 1: 'Tuesday'\n\t// BEGIN REDUNDANT\n\tthis.php_js = this.php_js || {};\n\tthis.setlocale('LC_ALL', 0); // ensure setup of localization variables takes place\n\t// END REDUNDANT\n\tvar phpjs = this.php_js;\n \n\t// BEGIN STATIC\n\tvar _xPad = function (x, pad, r) {\n\t\tif (typeof r === 'undefined') {\n\t\t\tr = 10;\n\t\t}\n\t\tfor (; parseInt(x, 10) < r && r > 1; r /= 10) {\n\t\t\tx = pad.toString() + x;\n\t\t}\n\t\treturn x.toString();\n\t};\n \n\tvar locale = phpjs.localeCategories.LC_TIME;\n\tvar locales = phpjs.locales;\n\tvar lc_time = locales[locale].LC_TIME;\n \n\tvar _formats = {\n\t\ta: function (d) {\n\t\t\treturn lc_time.a[d.getDay()];\n\t\t},\n\t\tA: function (d) {\n\t\t\treturn lc_time.A[d.getDay()];\n\t\t},\n\t\tb: function (d) {\n\t\t\treturn lc_time.b[d.getMonth()];\n\t\t},\n\t\tB: function (d) {\n\t\t\treturn lc_time.B[d.getMonth()];\n\t\t},\n\t\tC: function (d) {\n\t\t\treturn _xPad(parseInt(d.getFullYear() / 100, 10), 0);\n\t\t},\n\t\td: ['getDate', '0'],\n\t\te: ['getDate', ' '],\n\t\tg: function (d) {\n\t\t\treturn _xPad(parseInt(this.G(d) / 100, 10), 0);\n\t\t},\n\t\tG: function (d) {\n\t\t\tvar y = d.getFullYear();\n\t\t\tvar V = parseInt(_formats.V(d), 10);\n\t\t\tvar W = parseInt(_formats.W(d), 10);\n \n\t\t\tif (W > V) {\n\t\t\t\ty++;\n\t\t\t} else if (W === 0 && V >= 52) {\n\t\t\t\ty--;\n\t\t\t}\n \n\t\t\treturn y;\n\t\t},\n\t\tH: ['getHours', '0'],\n\t\tI: function (d) {\n\t\t\tvar I = d.getHours() % 12;\n\t\t\treturn _xPad(I === 0 ? 12 : I, 0);\n\t\t},\n\t\tj: function (d) {\n\t\t\tvar ms = d - new Date('' + d.getFullYear() + '/1/1 GMT');\n\t\t\tms += d.getTimezoneOffset() * 60000; // Line differs from Yahoo implementation which would be equivalent to replacing it here with:\n\t\t\t// ms = new Date('' + d.getFullYear() + '/' + (d.getMonth()+1) + '/' + d.getDate() + ' GMT') - ms;\n\t\t\tvar doy = parseInt(ms / 60000 / 60 / 24, 10) + 1;\n\t\t\treturn _xPad(doy, 0, 100);\n\t\t},\n\t\tk: ['getHours', '0'],\n\t\t// not in PHP, but implemented here (as in Yahoo)\n\t\tl: function (d) {\n\t\t\tvar l = d.getHours() % 12;\n\t\t\treturn _xPad(l === 0 ? 12 : l, ' ');\n\t\t},\n\t\tm: function (d) {\n\t\t\treturn _xPad(d.getMonth() + 1, 0);\n\t\t},\n\t\tM: ['getMinutes', '0'],\n\t\tp: function (d) {\n\t\t\treturn lc_time.p[d.getHours() >= 12 ? 1 : 0];\n\t\t},\n\t\tP: function (d) {\n\t\t\treturn lc_time.P[d.getHours() >= 12 ? 1 : 0];\n\t\t},\n\t\ts: function (d) { // Yahoo uses return parseInt(d.getTime()/1000, 10);\n\t\t\treturn Date.parse(d) / 1000;\n\t\t},\n\t\tS: ['getSeconds', '0'],\n\t\tu: function (d) {\n\t\t\tvar dow = d.getDay();\n\t\t\treturn ((dow === 0) ? 7 : dow);\n\t\t},\n\t\tU: function (d) {\n\t\t\tvar doy = parseInt(_formats.j(d), 10);\n\t\t\tvar rdow = 6 - d.getDay();\n\t\t\tvar woy = parseInt((doy + rdow) / 7, 10);\n\t\t\treturn _xPad(woy, 0);\n\t\t},\n\t\tV: function (d) {\n\t\t\tvar woy = parseInt(_formats.W(d), 10);\n\t\t\tvar dow1_1 = (new Date('' + d.getFullYear() + '/1/1')).getDay();\n\t\t\t// First week is 01 and not 00 as in the case of %U and %W,\n\t\t\t// so we add 1 to the final result except if day 1 of the year\n\t\t\t// is a Monday (then %W returns 01).\n\t\t\t// We also need to subtract 1 if the day 1 of the year is\n\t\t\t// Friday-Sunday, so the resulting equation becomes:\n\t\t\tvar idow = woy + (dow1_1 > 4 || dow1_1 <= 1 ? 0 : 1);\n\t\t\tif (idow === 53 && (new Date('' + d.getFullYear() + '/12/31')).getDay() < 4) {\n\t\t\t\tidow = 1;\n\t\t\t} else if (idow === 0) {\n\t\t\t\tidow = _formats.V(new Date('' + (d.getFullYear() - 1) + '/12/31'));\n\t\t\t}\n\t\t\treturn _xPad(idow, 0);\n\t\t},\n\t\tw: 'getDay',\n\t\tW: function (d) {\n\t\t\tvar doy = parseInt(_formats.j(d), 10);\n\t\t\tvar rdow = 7 - _formats.u(d);\n\t\t\tvar woy = parseInt((doy + rdow) / 7, 10);\n\t\t\treturn _xPad(woy, 0, 10);\n\t\t},\n\t\ty: function (d) {\n\t\t\treturn _xPad(d.getFullYear() % 100, 0);\n\t\t},\n\t\tY: 'getFullYear',\n\t\tz: function (d) {\n\t\t\tvar o = d.getTimezoneOffset();\n\t\t\tvar H = _xPad(parseInt(Math.abs(o / 60), 10), 0);\n\t\t\tvar M = _xPad(o % 60, 0);\n\t\t\treturn (o > 0 ? '-' : '+') + H + M;\n\t\t},\n\t\tZ: function (d) {\n\t\t\treturn d.toString().replace(/^.*\\(([^)]+)\\)$/, '$1');\n\t\t/*\n            // Yahoo's: Better?\n            var tz = d.toString().replace(/^.*:\\d\\d( GMT[+-]\\d+)? \\(?([A-Za-z ]+)\\)?\\d*$/, '$2').replace(/[a-z ]/g, '');\n            if(tz.length > 4) {\n                tz = Dt.formats.z(d);\n            }\n            return tz;\n            */\n\t\t},\n\t\t'%': function (d) {\n\t\t\treturn '%';\n\t\t}\n\t};\n\t// END STATIC\n\t/* Fix: Locale alternatives are supported though not documented in PHP; see http://linux.die.net/man/3/strptime */\n\n\tvar _date = ((typeof(timestamp) == 'undefined') ? new Date() : // Not provided\n\t\t(typeof(timestamp) == 'object') ? new Date(timestamp) : // Javascript Date()\n\t\tnew Date(timestamp * 1000) // PHP API expects UNIX timestamp (auto-convert to int)\n\t\t);\n\tvar _aggregates = {\n\t\tc: 'locale',\n\t\tD: '%m/%d/%y',\n\t\tF: '%y-%m-%d',\n\t\th: '%b',\n\t\tn: '\\n',\n\t\tr: 'locale',\n\t\tR: '%H:%M',\n\t\tt: '\\t',\n\t\tT: '%H:%M:%S',\n\t\tx: 'locale',\n\t\tX: 'locale'\n\t};\n \n \n\t// First replace aggregates (run in a loop because an agg may be made up of other aggs)\n\twhile (fmt.match(/%[cDFhnrRtTxX]/)) {\n\t\tfmt = fmt.replace(/%([cDFhnrRtTxX])/g, function (m0, m1) {\n\t\t\tvar f = _aggregates[m1];\n\t\t\treturn (f === 'locale' ? lc_time[m1] : f);\n\t\t});\n\t}\n \n\t// Now replace formats - we need a closure so that the date object gets passed through\n\tvar str = fmt.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g, function (m0, m1) {\n\t\tvar f = _formats[m1];\n\t\tif (typeof f === 'string') {\n\t\t\treturn _date[f]();\n\t\t} else if (typeof f === 'function') {\n\t\t\treturn f(_date);\n\t\t} else if (typeof f === 'object' && typeof(f[0]) === 'string') {\n\t\t\treturn _xPad(_date[f[0]](), f[1]);\n\t\t} else { // Shouldn't reach here\n\t\t\treturn m1;\n\t\t}\n\t});\n\treturn str;\n}\n","/*jslint browser:true, indent:2*/\n/*jslint es5:true, nomen:true*/ // __proto__\n\n// https://github.com/es-shims/es5-shim/blob/ad5e68434ea9b08279aec78ab6661c100cb9b04f/es5-sham.js#L160\n\n// ES5 15.2.3.5\n// http://es5.github.com/#x15.2.3.5\nif (!Object.create) {\n\n  Object.create = function create(prototype, properties) {\n    'use strict';\n    var object;\n    function Type() { return this; }  // An empty constructor.\n\n    if (prototype === null) {\n      // BLINK: prevent sham-usage (arguments[0] === null)\n      throw new TypeError(\"Object.create(null) is a sham in this implementation\");\n    } else {\n      if (typeof prototype !== \"object\" && typeof prototype !== \"function\") {\n        // In the native implementation `parent` can be `null`\n        // OR *any* `instanceof Object`  (Object|Function|Array|RegExp|etc)\n        // Use `typeof` tho, b/c in old IE, DOM elements are not `instanceof Object`\n        // like they are in modern browsers. Using `Object.create` on DOM elements\n        // is...err...probably inappropriate, but the native version allows for it.\n        throw new TypeError(\"Object prototype may only be an Object or null\"); // same msg as Chrome\n      }\n      Type.prototype = prototype;\n      object = new Type();\n      // BLINK: don't bother setting object.__proto__ (fixes shim-compatibility with IE8)\n      // BLINK: we just need to make sure that object.prototype.constructor is appropriate where necessary\n    }\n\n    // BLINK: assume that undefined is undefined\n    if (properties !== undefined) {\n      // BLINK: prevent sham-usage (arguments[1] !== null)\n      throw new TypeError(\"Object.create(prototype, properties) is a sham in this implementation\");\n    }\n\n    return object;\n  };\n}\n\n","/**\n * Copyright 2010 Tim Down.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * jshashtable\n *\n * jshashtable is a JavaScript implementation of a hash table. It creates a single constructor function called Hashtable\n * in the global scope.\n *\n * Author: Tim Down <tim@timdown.co.uk>\n * Version: 2.1\n * Build date: 21 March 2010\n * Website: http://www.timdown.co.uk/jshashtable\n */\n\nvar Hashtable = (function() {\n\tvar FUNCTION = \"function\";\n\n\tvar arrayRemoveAt = (typeof Array.prototype.splice == FUNCTION) ?\n\t\tfunction(arr, idx) {\n\t\t\tarr.splice(idx, 1);\n\t\t} :\n\n\t\tfunction(arr, idx) {\n\t\t\tvar itemsAfterDeleted, i, len;\n\t\t\tif (idx === arr.length - 1) {\n\t\t\t\tarr.length = idx;\n\t\t\t} else {\n\t\t\t\titemsAfterDeleted = arr.slice(idx + 1);\n\t\t\t\tarr.length = idx;\n\t\t\t\tfor (i = 0, len = itemsAfterDeleted.length; i < len; ++i) {\n\t\t\t\t\tarr[idx + i] = itemsAfterDeleted[i];\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\tfunction hashObject(obj) {\n\t\tvar hashCode;\n\t\tif (typeof obj == \"string\") {\n\t\t\treturn obj;\n\t\t} else if (typeof obj.hashCode == FUNCTION) {\n\t\t\t// Check the hashCode method really has returned a string\n\t\t\thashCode = obj.hashCode();\n\t\t\treturn (typeof hashCode == \"string\") ? hashCode : hashObject(hashCode);\n\t\t} else if (typeof obj.toString == FUNCTION) {\n\t\t\treturn obj.toString();\n\t\t} else {\n\t\t\ttry {\n\t\t\t\treturn String(obj);\n\t\t\t} catch (ex) {\n\t\t\t\t// For host objects (such as ActiveObjects in IE) that have no toString() method and throw an error when\n\t\t\t\t// passed to String()\n\t\t\t\treturn Object.prototype.toString.call(obj);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction equals_fixedValueHasEquals(fixedValue, variableValue) {\n\t\treturn fixedValue.equals(variableValue);\n\t}\n\n\tfunction equals_fixedValueNoEquals(fixedValue, variableValue) {\n\t\treturn (typeof variableValue.equals == FUNCTION) ?\n\t\t\t   variableValue.equals(fixedValue) : (fixedValue === variableValue);\n\t}\n\n\tfunction createKeyValCheck(kvStr) {\n\t\treturn function(kv) {\n\t\t\tif (kv === null) {\n\t\t\t\tthrow new Error(\"null is not a valid \" + kvStr);\n\t\t\t} else if (typeof kv == \"undefined\") {\n\t\t\t\tthrow new Error(kvStr + \" must not be undefined\");\n\t\t\t}\n\t\t};\n\t}\n\n\tvar checkKey = createKeyValCheck(\"key\"), checkValue = createKeyValCheck(\"value\");\n\n\t/*----------------------------------------------------------------------------------------------------------------*/\n\n\tfunction Bucket(hash, firstKey, firstValue, equalityFunction) {\n        this[0] = hash;\n\t\tthis.entries = [];\n\t\tthis.addEntry(firstKey, firstValue);\n\n\t\tif (equalityFunction !== null) {\n\t\t\tthis.getEqualityFunction = function() {\n\t\t\t\treturn equalityFunction;\n\t\t\t};\n\t\t}\n\t}\n\n\tvar EXISTENCE = 0, ENTRY = 1, ENTRY_INDEX_AND_VALUE = 2;\n\n\tfunction createBucketSearcher(mode) {\n\t\treturn function(key) {\n\t\t\tvar i = this.entries.length, entry, equals = this.getEqualityFunction(key);\n\t\t\twhile (i--) {\n\t\t\t\tentry = this.entries[i];\n\t\t\t\tif ( equals(key, entry[0]) ) {\n\t\t\t\t\tswitch (mode) {\n\t\t\t\t\t\tcase EXISTENCE:\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\tcase ENTRY:\n\t\t\t\t\t\t\treturn entry;\n\t\t\t\t\t\tcase ENTRY_INDEX_AND_VALUE:\n\t\t\t\t\t\t\treturn [ i, entry[1] ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\n\tfunction createBucketLister(entryProperty) {\n\t\treturn function(aggregatedArr) {\n\t\t\tvar startIndex = aggregatedArr.length;\n\t\t\tfor (var i = 0, len = this.entries.length; i < len; ++i) {\n\t\t\t\taggregatedArr[startIndex + i] = this.entries[i][entryProperty];\n\t\t\t}\n\t\t};\n\t}\n\n\tBucket.prototype = {\n\t\tgetEqualityFunction: function(searchValue) {\n\t\t\treturn (typeof searchValue.equals == FUNCTION) ? equals_fixedValueHasEquals : equals_fixedValueNoEquals;\n\t\t},\n\n\t\tgetEntryForKey: createBucketSearcher(ENTRY),\n\n\t\tgetEntryAndIndexForKey: createBucketSearcher(ENTRY_INDEX_AND_VALUE),\n\n\t\tremoveEntryForKey: function(key) {\n\t\t\tvar result = this.getEntryAndIndexForKey(key);\n\t\t\tif (result) {\n\t\t\t\tarrayRemoveAt(this.entries, result[0]);\n\t\t\t\treturn result[1];\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\n\t\taddEntry: function(key, value) {\n\t\t\tthis.entries[this.entries.length] = [key, value];\n\t\t},\n\n\t\tkeys: createBucketLister(0),\n\n\t\tvalues: createBucketLister(1),\n\n\t\tgetEntries: function(entries) {\n\t\t\tvar startIndex = entries.length;\n\t\t\tfor (var i = 0, len = this.entries.length; i < len; ++i) {\n\t\t\t\t// Clone the entry stored in the bucket before adding to array\n\t\t\t\tentries[startIndex + i] = this.entries[i].slice(0);\n\t\t\t}\n\t\t},\n\n\t\tcontainsKey: createBucketSearcher(EXISTENCE),\n\n\t\tcontainsValue: function(value) {\n\t\t\tvar i = this.entries.length;\n\t\t\twhile (i--) {\n\t\t\t\tif ( value === this.entries[i][1] ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/*----------------------------------------------------------------------------------------------------------------*/\n\n\t// Supporting functions for searching hashtable buckets\n\n\tfunction searchBuckets(buckets, hash) {\n\t\tvar i = buckets.length, bucket;\n\t\twhile (i--) {\n\t\t\tbucket = buckets[i];\n\t\t\tif (hash === bucket[0]) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tfunction getBucketForHash(bucketsByHash, hash) {\n\t\tvar bucket = bucketsByHash[hash];\n\n\t\t// Check that this is a genuine bucket and not something inherited from the bucketsByHash's prototype\n\t\treturn ( bucket && (bucket instanceof Bucket) ) ? bucket : null;\n\t}\n\n\t/*----------------------------------------------------------------------------------------------------------------*/\n\n\tfunction Hashtable(hashingFunctionParam, equalityFunctionParam) {\n\t\tvar that = this;\n\t\tvar buckets = [];\n\t\tvar bucketsByHash = {};\n\n\t\tvar hashingFunction = (typeof hashingFunctionParam == FUNCTION) ? hashingFunctionParam : hashObject;\n\t\tvar equalityFunction = (typeof equalityFunctionParam == FUNCTION) ? equalityFunctionParam : null;\n\n\t\tthis.put = function(key, value) {\n\t\t\tcheckKey(key);\n\t\t\tcheckValue(value);\n\t\t\tvar hash = hashingFunction(key), bucket, bucketEntry, oldValue = null;\n\n\t\t\t// Check if a bucket exists for the bucket key\n\t\t\tbucket = getBucketForHash(bucketsByHash, hash);\n\t\t\tif (bucket) {\n\t\t\t\t// Check this bucket to see if it already contains this key\n\t\t\t\tbucketEntry = bucket.getEntryForKey(key);\n\t\t\t\tif (bucketEntry) {\n\t\t\t\t\t// This bucket entry is the current mapping of key to value, so replace old value and we're done.\n\t\t\t\t\toldValue = bucketEntry[1];\n\t\t\t\t\tbucketEntry[1] = value;\n\t\t\t\t} else {\n\t\t\t\t\t// The bucket does not contain an entry for this key, so add one\n\t\t\t\t\tbucket.addEntry(key, value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// No bucket exists for the key, so create one and put our key/value mapping in\n\t\t\t\tbucket = new Bucket(hash, key, value, equalityFunction);\n\t\t\t\tbuckets[buckets.length] = bucket;\n\t\t\t\tbucketsByHash[hash] = bucket;\n\t\t\t}\n\t\t\treturn oldValue;\n\t\t};\n\n\t\tthis.get = function(key) {\n\t\t\tcheckKey(key);\n\n\t\t\tvar hash = hashingFunction(key);\n\n\t\t\t// Check if a bucket exists for the bucket key\n\t\t\tvar bucket = getBucketForHash(bucketsByHash, hash);\n\t\t\tif (bucket) {\n\t\t\t\t// Check this bucket to see if it contains this key\n\t\t\t\tvar bucketEntry = bucket.getEntryForKey(key);\n\t\t\t\tif (bucketEntry) {\n\t\t\t\t\t// This bucket entry is the current mapping of key to value, so return the value.\n\t\t\t\t\treturn bucketEntry[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.containsKey = function(key) {\n\t\t\tcheckKey(key);\n\t\t\tvar bucketKey = hashingFunction(key);\n\n\t\t\t// Check if a bucket exists for the bucket key\n\t\t\tvar bucket = getBucketForHash(bucketsByHash, bucketKey);\n\n\t\t\treturn bucket ? bucket.containsKey(key) : false;\n\t\t};\n\n\t\tthis.containsValue = function(value) {\n\t\t\tcheckValue(value);\n\t\t\tvar i = buckets.length;\n\t\t\twhile (i--) {\n\t\t\t\tif (buckets[i].containsValue(value)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.clear = function() {\n\t\t\tbuckets.length = 0;\n\t\t\tbucketsByHash = {};\n\t\t};\n\n\t\tthis.isEmpty = function() {\n\t\t\treturn !buckets.length;\n\t\t};\n\n\t\tvar createBucketAggregator = function(bucketFuncName) {\n\t\t\treturn function() {\n\t\t\t\tvar aggregated = [], i = buckets.length;\n\t\t\t\twhile (i--) {\n\t\t\t\t\tbuckets[i][bucketFuncName](aggregated);\n\t\t\t\t}\n\t\t\t\treturn aggregated;\n\t\t\t};\n\t\t};\n\n\t\tthis.keys = createBucketAggregator(\"keys\");\n\t\tthis.values = createBucketAggregator(\"values\");\n\t\tthis.entries = createBucketAggregator(\"getEntries\");\n\n\t\tthis.remove = function(key) {\n\t\t\tcheckKey(key);\n\n\t\t\tvar hash = hashingFunction(key), bucketIndex, oldValue = null;\n\n\t\t\t// Check if a bucket exists for the bucket key\n\t\t\tvar bucket = getBucketForHash(bucketsByHash, hash);\n\n\t\t\tif (bucket) {\n\t\t\t\t// Remove entry from this bucket for this key\n\t\t\t\toldValue = bucket.removeEntryForKey(key);\n\t\t\t\tif (oldValue !== null) {\n\t\t\t\t\t// Entry was removed, so check if bucket is empty\n\t\t\t\t\tif (!bucket.entries.length) {\n\t\t\t\t\t\t// Bucket is empty, so remove it from the bucket collections\n\t\t\t\t\t\tbucketIndex = searchBuckets(buckets, hash);\n\t\t\t\t\t\tarrayRemoveAt(buckets, bucketIndex);\n\t\t\t\t\t\tdelete bucketsByHash[hash];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn oldValue;\n\t\t};\n\n\t\tthis.size = function() {\n\t\t\tvar total = 0, i = buckets.length;\n\t\t\twhile (i--) {\n\t\t\t\ttotal += buckets[i].entries.length;\n\t\t\t}\n\t\t\treturn total;\n\t\t};\n\n\t\tthis.each = function(callback) {\n\t\t\tvar entries = that.entries(), i = entries.length, entry;\n\t\t\twhile (i--) {\n\t\t\t\tentry = entries[i];\n\t\t\t\tcallback(entry[0], entry[1]);\n\t\t\t}\n\t\t};\n\n\t\tthis.putAll = function(hashtable, conflictCallback) {\n\t\t\tvar entries = hashtable.entries();\n\t\t\tvar entry, key, value, thisValue, i = entries.length;\n\t\t\tvar hasConflictCallback = (typeof conflictCallback == FUNCTION);\n\t\t\twhile (i--) {\n\t\t\t\tentry = entries[i];\n\t\t\t\tkey = entry[0];\n\t\t\t\tvalue = entry[1];\n\n\t\t\t\t// Check for a conflict. The default behaviour is to overwrite the value for an existing key\n\t\t\t\tif ( hasConflictCallback && (thisValue = that.get(key)) ) {\n\t\t\t\t\tvalue = conflictCallback(key, thisValue, value);\n\t\t\t\t}\n\t\t\t\tthat.put(key, value);\n\t\t\t}\n\t\t};\n\n\t\tthis.clone = function() {\n\t\t\tvar clone = new Hashtable(hashingFunctionParam, equalityFunctionParam);\n\t\t\tclone.putAll(that);\n\t\t\treturn clone;\n\t\t};\n\t}\n\n\treturn Hashtable;\n})();\n","//     Underscore.js 1.5.2\n//     http://underscorejs.org\n//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `exports` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var\n    push             = ArrayProto.push,\n    slice            = ArrayProto.slice,\n    concat           = ArrayProto.concat,\n    toString         = ObjProto.toString,\n    hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.5.2';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, length = obj.length; i < length; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      var keys = _.keys(obj);\n      for (var i = 0, length = keys.length; i < length; i++) {\n        if (iterator.call(context, obj[keys[i]], keys[i], obj) === breaker) return;\n      }\n    }\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results.push(iterator.call(context, value, index, list));\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, iterator, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (iterator.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n    each(obj, function(value, index, list) {\n      if (iterator.call(context, value, index, list)) results.push(value);\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, iterator, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !iterator.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, iterator, context) {\n    iterator || (iterator = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && iterator.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, iterator, context) {\n    iterator || (iterator = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = iterator.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, function(value){ return value[key]; });\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs, first) {\n    if (_.isEmpty(attrs)) return first ? void 0 : [];\n    return _[first ? 'find' : 'filter'](obj, function(value) {\n      for (var key in attrs) {\n        if (attrs[key] !== value[key]) return false;\n      }\n      return true;\n    });\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.where(obj, attrs, true);\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See [WebKit Bug 80797](https://bugs.webkit.org/show_bug.cgi?id=80797)\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    if (!iterator && _.isEmpty(obj)) return -Infinity;\n    var result = {computed : -Infinity, value: -Infinity};\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      computed > result.computed && (result = {value : value, computed : computed});\n    });\n    return result.value;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    if (!iterator && _.isEmpty(obj)) return Infinity;\n    var result = {computed : Infinity, value: Infinity};\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      computed < result.computed && (result = {value : value, computed : computed});\n    });\n    return result.value;\n  };\n\n  // Shuffle an array, using the modern version of the \n  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // Sample **n** random values from an array.\n  // If **n** is not specified, returns a single random element from the array.\n  // The internal `guard` argument allows it to work with `map`.\n  _.sample = function(obj, n, guard) {\n    if (arguments.length < 2 || guard) {\n      return obj[_.random(obj.length - 1)];\n    }\n    return _.shuffle(obj).slice(0, Math.max(0, n));\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    return _.isFunction(value) ? value : function(obj){ return obj[value]; };\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, value, context) {\n    var iterator = lookupIterator(value);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value: value,\n        index: index,\n        criteria: iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index - right.index;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(behavior) {\n    return function(obj, value, context) {\n      var result = {};\n      var iterator = value == null ? _.identity : lookupIterator(value);\n      each(obj, function(value, index) {\n        var key = iterator.call(context, value, index, obj);\n        behavior(result, key, value);\n      });\n      return result;\n    };\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = group(function(result, key, value) {\n    (_.has(result, key) ? result[key] : (result[key] = [])).push(value);\n  });\n\n  // Indexes the object's values by a criterion, similar to `groupBy`, but for\n  // when you know that your index values will be unique.\n  _.indexBy = group(function(result, key, value) {\n    result[key] = value;\n  });\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = group(function(result, key) {\n    _.has(result, key) ? result[key]++ : result[key] = 1;\n  });\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = iterator == null ? _.identity : lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely create a real, live array from anything iterable.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    return (n == null) || guard ? array[0] : slice.call(array, 0, n);\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n == null) || guard) {\n      return array[array.length - 1];\n    } else {\n      return slice.call(array, Math.max(array.length - n, 0));\n    }\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    if (shallow && _.every(input, _.isArray)) {\n      return concat.apply(output, input);\n    }\n    each(input, function(value) {\n      if (_.isArray(value) || _.isArguments(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Flatten out an array, either recursively (by default), or just one level.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(_.flatten(arguments, true));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.indexOf(other, item) >= 0;\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var length = _.max(_.pluck(arguments, \"length\").concat(0));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(arguments, '' + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, length = list.length; i < length; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, length = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, length + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < length; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var length = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(length);\n\n    while(idx < length) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Reusable constructor function for prototype setting.\n  var ctor = function(){};\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    if (!_.isFunction(func)) throw new TypeError;\n    args = slice.call(arguments, 2);\n    return bound = function() {\n      if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));\n      ctor.prototype = func.prototype;\n      var self = new ctor;\n      ctor.prototype = null;\n      var result = func.apply(self, args.concat(slice.call(arguments)));\n      if (Object(result) === result) return result;\n      return self;\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context.\n  _.partial = function(func) {\n    var args = slice.call(arguments, 1);\n    return function() {\n      return func.apply(this, args.concat(slice.call(arguments)));\n    };\n  };\n\n  // Bind all of an object's methods to that object. Useful for ensuring that\n  // all callbacks defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) throw new Error(\"bindAll must be passed function names\");\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  _.throttle = function(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    options || (options = {});\n    var later = function() {\n      previous = options.leading === false ? 0 : new Date;\n      timeout = null;\n      result = func.apply(context, args);\n    };\n    return function() {\n      var now = new Date;\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, args, context, timestamp, result;\n    return function() {\n      context = this;\n      args = arguments;\n      timestamp = new Date();\n      var later = function() {\n        var last = (new Date()) - timestamp;\n        if (last < wait) {\n          timeout = setTimeout(later, wait - last);\n        } else {\n          timeout = null;\n          if (!immediate) result = func.apply(context, args);\n        }\n      };\n      var callNow = immediate && !timeout;\n      if (!timeout) {\n        timeout = setTimeout(later, wait);\n      }\n      if (callNow) result = func.apply(context, args);\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return function() {\n      var args = [func];\n      push.apply(args, arguments);\n      return wrapper.apply(this, args);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = nativeKeys || function(obj) {\n    if (obj !== Object(obj)) throw new TypeError('Invalid object');\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys.push(key);\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var values = new Array(length);\n    for (var i = 0; i < length; i++) {\n      values[i] = obj[keys[i]];\n    }\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var keys = _.keys(obj);\n    var length = keys.length;\n    var pairs = new Array(length);\n    for (var i = 0; i < length; i++) {\n      pairs[i] = [keys[i], obj[keys[i]]];\n    }\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    var keys = _.keys(obj);\n    for (var i = 0, length = keys.length; i < length; i++) {\n      result[obj[keys[i]]] = keys[i];\n    }\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] === void 0) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Objects with different constructors are not equivalent, but `Object`s\n    // from different frames are.\n    var aCtor = a.constructor, bCtor = b.constructor;\n    if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                             _.isFunction(bCtor) && (bCtor instanceof bCtor))) {\n      return false;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(Math.max(0, n));\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named `property` is a function then invoke it with the\n  // `object` as context; otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return void 0;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name) {\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n}).call(this);\n","/*!\n * https://github.com/es-shims/es5-shim\n * @license es5-shim Copyright 2009-2014 by contributors, MIT License\n * see https://github.com/es-shims/es5-shim/blob/master/LICENSE\n */\n\n// vim: ts=4 sts=4 sw=4 expandtab\n\n//Add semicolon to prevent IIFE from being passed as argument to concated code.\n;\n\n// UMD (Universal Module Definition)\n// see https://github.com/umdjs/umd/blob/master/returnExports.js\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory();\n    }\n}(this, function () {\n\n/**\n * Brings an environment as close to ECMAScript 5 compliance\n * as is possible with the facilities of erstwhile engines.\n *\n * Annotated ES5: http://es5.github.com/ (specific links below)\n * ES5 Spec: http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf\n * Required reading: http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/\n */\n\n// Shortcut to an often accessed properties, in order to avoid multiple\n// dereference that costs universally.\nvar call = Function.prototype.call;\nvar prototypeOfArray = Array.prototype;\nvar prototypeOfObject = Object.prototype;\nvar _Array_slice_ = prototypeOfArray.slice;\nvar array_splice = Array.prototype.splice;\nvar array_push = Array.prototype.push;\nvar array_unshift = Array.prototype.unshift;\n\n// Having a toString local variable name breaks in Opera so use _toString.\nvar _toString = prototypeOfObject.toString;\n\nvar isFunction = function (val) {\n    return prototypeOfObject.toString.call(val) === '[object Function]';\n};\nvar isRegex = function (val) {\n    return prototypeOfObject.toString.call(val) === '[object RegExp]';\n};\nvar isArray = function isArray(obj) {\n    return _toString.call(obj) === \"[object Array]\";\n};\nvar isArguments = function isArguments(value) {\n    var str = _toString.call(value);\n    var isArgs = str === '[object Arguments]';\n    if (!isArgs) {\n        isArgs = !isArray(str)\n            && value !== null\n            && typeof value === 'object'\n            && typeof value.length === 'number'\n            && value.length >= 0\n            && isFunction(value.callee);\n    }\n    return isArgs;\n};\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nfunction Empty() {}\n\nif (!Function.prototype.bind) {\n    Function.prototype.bind = function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isFunction(target)) {\n            throw new TypeError(\"Function.prototype.bind called on incompatible \" + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = _Array_slice_.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    args.concat(_Array_slice_.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    args.concat(_Array_slice_.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = Math.max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            boundArgs.push(\"$\" + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        var bound = Function(\"binder\", \"return function (\" + boundArgs.join(\",\") + \"){return binder.apply(this,arguments)}\")(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    };\n}\n\n// _Please note: Shortcuts are defined after `Function.prototype.bind` as we\n// us it in defining shortcuts.\nvar owns = call.bind(prototypeOfObject.hasOwnProperty);\n\n// If JS engine supports accessors creating shortcuts.\nvar defineGetter;\nvar defineSetter;\nvar lookupGetter;\nvar lookupSetter;\nvar supportsAccessors;\nif ((supportsAccessors = owns(prototypeOfObject, \"__defineGetter__\"))) {\n    defineGetter = call.bind(prototypeOfObject.__defineGetter__);\n    defineSetter = call.bind(prototypeOfObject.__defineSetter__);\n    lookupGetter = call.bind(prototypeOfObject.__lookupGetter__);\n    lookupSetter = call.bind(prototypeOfObject.__lookupSetter__);\n}\n\n//\n// Array\n// =====\n//\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.12\nvar spliceWorksWithEmptyObject = (function () {\n    var obj = {};\n    Array.prototype.splice.call(obj, 0, 0, 1);\n    return obj.length === 1;\n}());\nvar omittingSecondSpliceArgIsNoop = [1].splice(0).length === 0;\nvar spliceNoopReturnsEmptyArray = (function () {\n    var a = [1, 2];\n    var result = a.splice();\n    return a.length === 2 && isArray(result) && result.length === 0;\n}());\nif (spliceNoopReturnsEmptyArray) {\n    // Safari 5.0 bug where .split() returns undefined\n    Array.prototype.splice = function splice(start, deleteCount) {\n        if (arguments.length === 0) { return []; }\n        else { return array_splice.apply(this, arguments); }\n    };\n}\nif (!omittingSecondSpliceArgIsNoop || !spliceWorksWithEmptyObject) {\n    Array.prototype.splice = function splice(start, deleteCount) {\n        if (arguments.length === 0) { return []; }\n        var args = arguments;\n        this.length = Math.max(toInteger(this.length), 0);\n        if (arguments.length > 0 && typeof deleteCount !== 'number') {\n            args = _Array_slice_.call(arguments);\n            if (args.length < 2) { args.push(toInteger(deleteCount)); }\n            else { args[1] = toInteger(deleteCount); }\n        }\n        return array_splice.apply(this, args);\n    };\n}\n\n// ES5 15.4.4.12\n// http://es5.github.com/#x15.4.4.13\n// Return len+argCount.\n// [bugfix, ielt8]\n// IE < 8 bug: [].unshift(0) === undefined but should be \"1\"\nif ([].unshift(0) !== 1) {\n    Array.prototype.unshift = function () {\n        array_unshift.apply(this, arguments);\n        return this.length;\n    };\n}\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\nif (!Array.isArray) {\n    Array.isArray = isArray;\n}\n\n// The IsCallable() check in the Array functions\n// has been replaced with a strict check on the\n// internal class of the object to trap cases where\n// the provided function was actually a regular\n// expression literal, which in V8 and\n// JavaScriptCore is a typeof \"function\".  Only in\n// V8 are regular expression literals permitted as\n// reduce parameters, so it is desirable in the\n// general case for the shim to match the more\n// strict and common behavior of rejecting regular\n// expressions.\n\n// ES5 15.4.4.18\n// http://es5.github.com/#x15.4.4.18\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/array/forEach\n\n// Check failure of by-index access of string characters (IE < 9)\n// and failure of `0 in boxedString` (Rhino)\nvar boxedString = Object(\"a\");\nvar splitString = boxedString[0] !== \"a\" || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\nif (!Array.prototype.forEach || !properlyBoxesContext(Array.prototype.forEach)) {\n    Array.prototype.forEach = function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                // context\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    };\n}\n\n// ES5 15.4.4.19\n// http://es5.github.com/#x15.4.4.19\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/map\nif (!Array.prototype.map || !properlyBoxesContext(Array.prototype.map)) {\n    Array.prototype.map = function map(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            result = Array(length),\n            thisp = arguments[1];\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                result[i] = fun.call(thisp, self[i], i, object);\n            }\n        }\n        return result;\n    };\n}\n\n// ES5 15.4.4.20\n// http://es5.github.com/#x15.4.4.20\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/filter\nif (!Array.prototype.filter || !properlyBoxesContext(Array.prototype.filter)) {\n    Array.prototype.filter = function filter(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                    object,\n            length = self.length >>> 0,\n            result = [],\n            value,\n            thisp = arguments[1];\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self) {\n                value = self[i];\n                if (fun.call(thisp, value, i, object)) {\n                    result.push(value);\n                }\n            }\n        }\n        return result;\n    };\n}\n\n// ES5 15.4.4.16\n// http://es5.github.com/#x15.4.4.16\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every\nif (!Array.prototype.every || !properlyBoxesContext(Array.prototype.every)) {\n    Array.prototype.every = function every(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && !fun.call(thisp, self[i], i, object)) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\n\n// ES5 15.4.4.17\n// http://es5.github.com/#x15.4.4.17\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some\nif (!Array.prototype.some || !properlyBoxesContext(Array.prototype.some)) {\n    Array.prototype.some = function some(fun /*, thisp */) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0,\n            thisp = arguments[1];\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        for (var i = 0; i < length; i++) {\n            if (i in self && fun.call(thisp, self[i], i, object)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\n// ES5 15.4.4.21\n// http://es5.github.com/#x15.4.4.21\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce\nvar reduceCoercesToObject = false;\nif (Array.prototype.reduce) {\n    reduceCoercesToObject = typeof Array.prototype.reduce.call('es5', function (_, __, ___, list) { return list; }) === 'object';\n}\nif (!Array.prototype.reduce || !reduceCoercesToObject) {\n    Array.prototype.reduce = function reduce(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        // no value to return if no initial value and an empty array\n        if (!length && arguments.length === 1) {\n            throw new TypeError(\"reduce of empty array with no initial value\");\n        }\n\n        var i = 0;\n        var result;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i++];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (++i >= length) {\n                    throw new TypeError(\"reduce of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        for (; i < length; i++) {\n            if (i in self) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        }\n\n        return result;\n    };\n}\n\n// ES5 15.4.4.22\n// http://es5.github.com/#x15.4.4.22\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduceRight\nvar reduceRightCoercesToObject = false;\nif (Array.prototype.reduceRight) {\n    reduceRightCoercesToObject = typeof Array.prototype.reduceRight.call('es5', function (_, __, ___, list) { return list; }) === 'object';\n}\nif (!Array.prototype.reduceRight || !reduceRightCoercesToObject) {\n    Array.prototype.reduceRight = function reduceRight(fun /*, initial*/) {\n        var object = toObject(this),\n            self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                object,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(fun + \" is not a function\");\n        }\n\n        // no value to return if no initial value, empty array\n        if (!length && arguments.length === 1) {\n            throw new TypeError(\"reduceRight of empty array with no initial value\");\n        }\n\n        var result, i = length - 1;\n        if (arguments.length >= 2) {\n            result = arguments[1];\n        } else {\n            do {\n                if (i in self) {\n                    result = self[i--];\n                    break;\n                }\n\n                // if array contains no values, no initial value to return\n                if (--i < 0) {\n                    throw new TypeError(\"reduceRight of empty array with no initial value\");\n                }\n            } while (true);\n        }\n\n        if (i < 0) {\n            return result;\n        }\n\n        do {\n            if (i in self) {\n                result = fun.call(void 0, result, self[i], i, object);\n            }\n        } while (i--);\n\n        return result;\n    };\n}\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nif (!Array.prototype.indexOf || ([0, 1].indexOf(1, 2) !== -1)) {\n    Array.prototype.indexOf = function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\n// ES5 15.4.4.15\n// http://es5.github.com/#x15.4.4.15\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/lastIndexOf\nif (!Array.prototype.lastIndexOf || ([0, 1].lastIndexOf(0, -3) !== -1)) {\n    Array.prototype.lastIndexOf = function lastIndexOf(sought /*, fromIndex */) {\n        var self = splitString && _toString.call(this) === \"[object String]\" ?\n                this.split(\"\") :\n                toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n        var i = length - 1;\n        if (arguments.length > 1) {\n            i = Math.min(i, toInteger(arguments[1]));\n        }\n        // handle negative indices\n        i = i >= 0 ? i : length - Math.abs(i);\n        for (; i >= 0; i--) {\n            if (i in self && sought === self[i]) {\n                return i;\n            }\n        }\n        return -1;\n    };\n}\n\n//\n// Object\n// ======\n//\n\n// ES5 15.2.3.14\n// http://es5.github.com/#x15.2.3.14\nvar keysWorksWithArguments = Object.keys && (function () {\n    return Object.keys(arguments).length === 2;\n}(1, 2));\nif (!Object.keys) {\n    // http://whattheheadsaid.com/2010/10/a-safer-object-keys-compatibility-implementation\n    var hasDontEnumBug = !({'toString': null}).propertyIsEnumerable('toString'),\n        hasProtoEnumBug = (function () {}).propertyIsEnumerable('prototype'),\n        dontEnums = [\n            \"toString\",\n            \"toLocaleString\",\n            \"valueOf\",\n            \"hasOwnProperty\",\n            \"isPrototypeOf\",\n            \"propertyIsEnumerable\",\n            \"constructor\"\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    Object.keys = function keys(object) {\n        var isFn = isFunction(object),\n            isArgs = isArguments(object),\n            isObject = object !== null && typeof object === 'object',\n            isString = isObject && _toString.call(object) === '[object String]';\n\n        if (!isObject && !isFn && !isArgs) {\n            throw new TypeError(\"Object.keys called on a non-object\");\n        }\n\n        var theKeys = [];\n        var skipProto = hasProtoEnumBug && isFn;\n        if (isString || isArgs) {\n            for (var i = 0; i < object.length; ++i) {\n                theKeys.push(String(i));\n            }\n        } else {\n            for (var name in object) {\n                if (!(skipProto && name === 'prototype') && owns(object, name)) {\n                    theKeys.push(String(name));\n                }\n            }\n        }\n\n        if (hasDontEnumBug) {\n            var ctor = object.constructor,\n                skipConstructor = ctor && ctor.prototype === object;\n            for (var j = 0; j < dontEnumsLength; j++) {\n                var dontEnum = dontEnums[j];\n                if (!(skipConstructor && dontEnum === 'constructor') && owns(object, dontEnum)) {\n                    theKeys.push(dontEnum);\n                }\n            }\n        }\n        return theKeys;\n    };\n} else if (!keysWorksWithArguments) {\n    // Safari 5.0 bug\n    var originalKeys = Object.keys;\n    Object.keys = function keys(object) {\n        if (isArguments(object)) {\n            return originalKeys(Array.prototype.slice.call(object));\n        } else {\n            return originalKeys(object);\n        }\n    };\n}\n\n//\n// Date\n// ====\n//\n\n// ES5 15.9.5.43\n// http://es5.github.com/#x15.9.5.43\n// This function returns a String value represent the instance in time\n// represented by this Date object. The format of the String is the Date Time\n// string format defined in 15.9.1.15. All fields are present in the String.\n// The time zone is always UTC, denoted by the suffix Z. If the time value of\n// this object is not a finite Number a RangeError exception is thrown.\nvar negativeDate = -62198755200000,\n    negativeYearString = \"-000001\";\nif (\n    !Date.prototype.toISOString ||\n    (new Date(negativeDate).toISOString().indexOf(negativeYearString) === -1)\n) {\n    Date.prototype.toISOString = function toISOString() {\n        var result, length, value, year, month;\n        if (!isFinite(this)) {\n            throw new RangeError(\"Date.prototype.toISOString called on non-finite value.\");\n        }\n\n        year = this.getUTCFullYear();\n\n        month = this.getUTCMonth();\n        // see https://github.com/es-shims/es5-shim/issues/111\n        year += Math.floor(month / 12);\n        month = (month % 12 + 12) % 12;\n\n        // the date time string format is specified in 15.9.1.15.\n        result = [month + 1, this.getUTCDate(), this.getUTCHours(), this.getUTCMinutes(), this.getUTCSeconds()];\n        year = (\n            (year < 0 ? \"-\" : (year > 9999 ? \"+\" : \"\")) +\n            (\"00000\" + Math.abs(year)).slice(0 <= year && year <= 9999 ? -4 : -6)\n        );\n\n        length = result.length;\n        while (length--) {\n            value = result[length];\n            // pad months, days, hours, minutes, and seconds to have two\n            // digits.\n            if (value < 10) {\n                result[length] = \"0\" + value;\n            }\n        }\n        // pad milliseconds to have three digits.\n        return (\n            year + \"-\" + result.slice(0, 2).join(\"-\") +\n            \"T\" + result.slice(2).join(\":\") + \".\" +\n            (\"000\" + this.getUTCMilliseconds()).slice(-3) + \"Z\"\n        );\n    };\n}\n\n\n// ES5 15.9.5.44\n// http://es5.github.com/#x15.9.5.44\n// This function provides a String representation of a Date object for use by\n// JSON.stringify (15.12.3).\nvar dateToJSONIsSupported = false;\ntry {\n    dateToJSONIsSupported = (\n        Date.prototype.toJSON &&\n        new Date(NaN).toJSON() === null &&\n        new Date(negativeDate).toJSON().indexOf(negativeYearString) !== -1 &&\n        Date.prototype.toJSON.call({ // generic\n            toISOString: function () {\n                return true;\n            }\n        })\n    );\n} catch (e) {\n}\nif (!dateToJSONIsSupported) {\n    Date.prototype.toJSON = function toJSON(key) {\n        // When the toJSON method is called with argument key, the following\n        // steps are taken:\n\n        // 1.  Let O be the result of calling ToObject, giving it the this\n        // value as its argument.\n        // 2. Let tv be toPrimitive(O, hint Number).\n        var o = Object(this),\n            tv = toPrimitive(o),\n            toISO;\n        // 3. If tv is a Number and is not finite, return null.\n        if (typeof tv === \"number\" && !isFinite(tv)) {\n            return null;\n        }\n        // 4. Let toISO be the result of calling the [[Get]] internal method of\n        // O with argument \"toISOString\".\n        toISO = o.toISOString;\n        // 5. If IsCallable(toISO) is false, throw a TypeError exception.\n        if (typeof toISO !== \"function\") {\n            throw new TypeError(\"toISOString property is not callable\");\n        }\n        // 6. Return the result of calling the [[Call]] internal method of\n        //  toISO with O as the this value and an empty argument list.\n        return toISO.call(o);\n\n        // NOTE 1 The argument is ignored.\n\n        // NOTE 2 The toJSON function is intentionally generic; it does not\n        // require that its this value be a Date object. Therefore, it can be\n        // transferred to other kinds of objects for use as a method. However,\n        // it does require that any such object have a toISOString method. An\n        // object is free to use the argument key to filter its\n        // stringification.\n    };\n}\n\n// ES5 15.9.4.2\n// http://es5.github.com/#x15.9.4.2\n// based on work shared by Daniel Friesen (dantman)\n// http://gist.github.com/303249\nvar supportsExtendedYears = Date.parse('+033658-09-27T01:46:40.000Z') === 1e15;\nvar acceptsInvalidDates = !isNaN(Date.parse('2012-04-04T24:00:00.500Z')) || !isNaN(Date.parse('2012-11-31T23:59:59.000Z'));\nvar doesNotParseY2KNewYear = isNaN(Date.parse(\"2000-01-01T00:00:00.000Z\"));\nif (!Date.parse || doesNotParseY2KNewYear || acceptsInvalidDates || !supportsExtendedYears) {\n    // XXX global assignment won't work in embeddings that use\n    // an alternate object for the context.\n    Date = (function (NativeDate) {\n\n        // Date.length === 7\n        function Date(Y, M, D, h, m, s, ms) {\n            var length = arguments.length;\n            if (this instanceof NativeDate) {\n                var date = length === 1 && String(Y) === Y ? // isString(Y)\n                    // We explicitly pass it through parse:\n                    new NativeDate(Date.parse(Y)) :\n                    // We have to manually make calls depending on argument\n                    // length here\n                    length >= 7 ? new NativeDate(Y, M, D, h, m, s, ms) :\n                    length >= 6 ? new NativeDate(Y, M, D, h, m, s) :\n                    length >= 5 ? new NativeDate(Y, M, D, h, m) :\n                    length >= 4 ? new NativeDate(Y, M, D, h) :\n                    length >= 3 ? new NativeDate(Y, M, D) :\n                    length >= 2 ? new NativeDate(Y, M) :\n                    length >= 1 ? new NativeDate(Y) :\n                                  new NativeDate();\n                // Prevent mixups with unfixed Date object\n                date.constructor = Date;\n                return date;\n            }\n            return NativeDate.apply(this, arguments);\n        }\n\n        // 15.9.1.15 Date Time String Format.\n        var isoDateExpression = new RegExp(\"^\" +\n            \"(\\\\d{4}|[\\+\\-]\\\\d{6})\" + // four-digit year capture or sign +\n                                      // 6-digit extended year\n            \"(?:-(\\\\d{2})\" + // optional month capture\n            \"(?:-(\\\\d{2})\" + // optional day capture\n            \"(?:\" + // capture hours:minutes:seconds.milliseconds\n                \"T(\\\\d{2})\" + // hours capture\n                \":(\\\\d{2})\" + // minutes capture\n                \"(?:\" + // optional :seconds.milliseconds\n                    \":(\\\\d{2})\" + // seconds capture\n                    \"(?:(\\\\.\\\\d{1,}))?\" + // milliseconds capture\n                \")?\" +\n            \"(\" + // capture UTC offset component\n                \"Z|\" + // UTC capture\n                \"(?:\" + // offset specifier +/-hours:minutes\n                    \"([-+])\" + // sign capture\n                    \"(\\\\d{2})\" + // hours offset capture\n                    \":(\\\\d{2})\" + // minutes offset capture\n                \")\" +\n            \")?)?)?)?\" +\n        \"$\");\n\n        var months = [\n            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365\n        ];\n\n        function dayFromMonth(year, month) {\n            var t = month > 1 ? 1 : 0;\n            return (\n                months[month] +\n                Math.floor((year - 1969 + t) / 4) -\n                Math.floor((year - 1901 + t) / 100) +\n                Math.floor((year - 1601 + t) / 400) +\n                365 * (year - 1970)\n            );\n        }\n\n        function toUTC(t) {\n            return Number(new NativeDate(1970, 0, 1, 0, 0, 0, t));\n        }\n\n        // Copy any custom methods a 3rd party library may have added\n        for (var key in NativeDate) {\n            Date[key] = NativeDate[key];\n        }\n\n        // Copy \"native\" methods explicitly; they may be non-enumerable\n        Date.now = NativeDate.now;\n        Date.UTC = NativeDate.UTC;\n        Date.prototype = NativeDate.prototype;\n        Date.prototype.constructor = Date;\n\n        // Upgrade Date.parse to handle simplified ISO 8601 strings\n        Date.parse = function parse(string) {\n            var match = isoDateExpression.exec(string);\n            if (match) {\n                // parse months, days, hours, minutes, seconds, and milliseconds\n                // provide default values if necessary\n                // parse the UTC offset component\n                var year = Number(match[1]),\n                    month = Number(match[2] || 1) - 1,\n                    day = Number(match[3] || 1) - 1,\n                    hour = Number(match[4] || 0),\n                    minute = Number(match[5] || 0),\n                    second = Number(match[6] || 0),\n                    millisecond = Math.floor(Number(match[7] || 0) * 1000),\n                    // When time zone is missed, local offset should be used\n                    // (ES 5.1 bug)\n                    // see https://bugs.ecmascript.org/show_bug.cgi?id=112\n                    isLocalTime = Boolean(match[4] && !match[8]),\n                    signOffset = match[9] === \"-\" ? 1 : -1,\n                    hourOffset = Number(match[10] || 0),\n                    minuteOffset = Number(match[11] || 0),\n                    result;\n                if (\n                    hour < (\n                        minute > 0 || second > 0 || millisecond > 0 ?\n                        24 : 25\n                    ) &&\n                    minute < 60 && second < 60 && millisecond < 1000 &&\n                    month > -1 && month < 12 && hourOffset < 24 &&\n                    minuteOffset < 60 && // detect invalid offsets\n                    day > -1 &&\n                    day < (\n                        dayFromMonth(year, month + 1) -\n                        dayFromMonth(year, month)\n                    )\n                ) {\n                    result = (\n                        (dayFromMonth(year, month) + day) * 24 +\n                        hour +\n                        hourOffset * signOffset\n                    ) * 60;\n                    result = (\n                        (result + minute + minuteOffset * signOffset) * 60 +\n                        second\n                    ) * 1000 + millisecond;\n                    if (isLocalTime) {\n                        result = toUTC(result);\n                    }\n                    if (-8.64e15 <= result && result <= 8.64e15) {\n                        return result;\n                    }\n                }\n                return NaN;\n            }\n            return NativeDate.parse.apply(this, arguments);\n        };\n\n        return Date;\n    })(Date);\n}\n\n// ES5 15.9.4.4\n// http://es5.github.com/#x15.9.4.4\nif (!Date.now) {\n    Date.now = function now() {\n        return new Date().getTime();\n    };\n}\n\n\n//\n// Number\n// ======\n//\n\n// ES5.1 15.7.4.5\n// http://es5.github.com/#x15.7.4.5\nif (!Number.prototype.toFixed || (0.00008).toFixed(3) !== '0.000' || (0.9).toFixed(0) === '0' || (1.255).toFixed(2) !== '1.25' || (1000000000000000128).toFixed(0) !== \"1000000000000000128\") {\n    // Hide these variables and functions\n    (function () {\n        var base, size, data, i;\n\n        base = 1e7;\n        size = 6;\n        data = [0, 0, 0, 0, 0, 0];\n\n        function multiply(n, c) {\n            var i = -1;\n            while (++i < size) {\n                c += n * data[i];\n                data[i] = c % base;\n                c = Math.floor(c / base);\n            }\n        }\n\n        function divide(n) {\n            var i = size, c = 0;\n            while (--i >= 0) {\n                c += data[i];\n                data[i] = Math.floor(c / n);\n                c = (c % n) * base;\n            }\n        }\n\n        function numToString() {\n            var i = size;\n            var s = '';\n            while (--i >= 0) {\n                if (s !== '' || i === 0 || data[i] !== 0) {\n                    var t = String(data[i]);\n                    if (s === '') {\n                        s = t;\n                    } else {\n                        s += '0000000'.slice(0, 7 - t.length) + t;\n                    }\n                }\n            }\n            return s;\n        }\n\n        function pow(x, n, acc) {\n            return (n === 0 ? acc : (n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc)));\n        }\n\n        function log(x) {\n            var n = 0;\n            while (x >= 4096) {\n                n += 12;\n                x /= 4096;\n            }\n            while (x >= 2) {\n                n += 1;\n                x /= 2;\n            }\n            return n;\n        }\n\n        Number.prototype.toFixed = function toFixed(fractionDigits) {\n            var f, x, s, m, e, z, j, k;\n\n            // Test for NaN and round fractionDigits down\n            f = Number(fractionDigits);\n            f = f !== f ? 0 : Math.floor(f);\n\n            if (f < 0 || f > 20) {\n                throw new RangeError(\"Number.toFixed called with invalid number of decimals\");\n            }\n\n            x = Number(this);\n\n            // Test for NaN\n            if (x !== x) {\n                return \"NaN\";\n            }\n\n            // If it is too big or small, return the string value of the number\n            if (x <= -1e21 || x >= 1e21) {\n                return String(x);\n            }\n\n            s = \"\";\n\n            if (x < 0) {\n                s = \"-\";\n                x = -x;\n            }\n\n            m = \"0\";\n\n            if (x > 1e-21) {\n                // 1e-21 < x < 1e21\n                // -70 < log2(x) < 70\n                e = log(x * pow(2, 69, 1)) - 69;\n                z = (e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1));\n                z *= 0x10000000000000; // Math.pow(2, 52);\n                e = 52 - e;\n\n                // -18 < e < 122\n                // x = z / 2 ^ e\n                if (e > 0) {\n                    multiply(0, z);\n                    j = f;\n\n                    while (j >= 7) {\n                        multiply(1e7, 0);\n                        j -= 7;\n                    }\n\n                    multiply(pow(10, j, 1), 0);\n                    j = e - 1;\n\n                    while (j >= 23) {\n                        divide(1 << 23);\n                        j -= 23;\n                    }\n\n                    divide(1 << j);\n                    multiply(1, 1);\n                    divide(2);\n                    m = numToString();\n                } else {\n                    multiply(0, z);\n                    multiply(1 << (-e), 0);\n                    m = numToString() + '0.00000000000000000000'.slice(2, 2 + f);\n                }\n            }\n\n            if (f > 0) {\n                k = m.length;\n\n                if (k <= f) {\n                    m = s + '0.0000000000000000000'.slice(0, f - k + 2) + m;\n                } else {\n                    m = s + m.slice(0, k - f) + '.' + m.slice(k - f);\n                }\n            } else {\n                m = s + m;\n            }\n\n            return m;\n        };\n    }());\n}\n\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = String.prototype.split;\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === \"t\" ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = /()??/.exec(\"\")[1] === void 0; // NPCG: nonparticipating capturing group\n\n        String.prototype.split = function (separator, limit) {\n            var string = this;\n            if (separator === void 0 && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (_toString.call(separator) !== \"[object RegExp]\") {\n                return string_split.call(this, separator, limit);\n            }\n\n            var output = [],\n                flags = (separator.ignoreCase ? \"i\" : \"\") +\n                        (separator.multiline  ? \"m\" : \"\") +\n                        (separator.extended   ? \"x\" : \"\") + // Proposed for ES6\n                        (separator.sticky     ? \"y\" : \"\"), // Firefox 3+\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + \"g\");\n            string += \"\"; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            limit = limit === void 0 ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ToUint32(limit);\n            while (match = separator.exec(string)) {\n                // `separator.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    output.push(string.slice(lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (arguments[i] === void 0) {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        Array.prototype.push.apply(output, match.slice(1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= limit) {\n                        break;\n                    }\n                }\n                if (separator.lastIndex === match.index) {\n                    separator.lastIndex++; // Avoid an infinite loop\n                }\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separator.test(\"\")) {\n                    output.push(\"\");\n                }\n            } else {\n                output.push(string.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if (\"0\".split(void 0, 0).length) {\n    String.prototype.split = function split(separator, limit) {\n        if (separator === void 0 && limit === 0) { return []; }\n        return string_split.call(this, separator, limit);\n    };\n}\n\nvar str_replace = String.prototype.replace;\nvar replaceReportsGroupsCorrectly = (function () {\n    var groups = [];\n    'x'.replace(/x(.)?/g, function (match, group) {\n        groups.push(group);\n    });\n    return groups.length === 1 && typeof groups[0] === 'undefined';\n}());\n\nif (!replaceReportsGroupsCorrectly) {\n    String.prototype.replace = function replace(searchValue, replaceValue) {\n        var isFn = isFunction(replaceValue);\n        var hasCapturingGroups = isRegex(searchValue) && (/\\)[*?]/).test(searchValue.source);\n        if (!isFn || !hasCapturingGroups) {\n            return str_replace.call(this, searchValue, replaceValue);\n        } else {\n            var wrappedReplaceValue = function (match) {\n                var length = arguments.length;\n                var originalLastIndex = searchValue.lastIndex;\n                searchValue.lastIndex = 0;\n                var args = searchValue.exec(match);\n                searchValue.lastIndex = originalLastIndex;\n                args.push(arguments[length - 2], arguments[length - 1]);\n                return replaceValue.apply(this, args);\n            };\n            return str_replace.call(this, searchValue, wrappedReplaceValue);\n        }\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nif (\"\".substr && \"0b\".substr(-1) !== \"b\") {\n    var string_substr = String.prototype.substr;\n    /**\n     *  Get the substring of a string\n     *  @param  {integer}  start   where to start the substring\n     *  @param  {integer}  length  how many characters to return\n     *  @return {string}\n     */\n    String.prototype.substr = function substr(start, length) {\n        return string_substr.call(\n            this,\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\n            length\n        );\n    };\n}\n\n// ES5 15.5.4.20\n// whitespace from: http://es5.github.io/#x15.5.4.20\nvar ws = \"\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\" +\n    \"\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\" +\n    \"\\u2029\\uFEFF\";\nvar zeroWidth = '\\u200b';\nif (!String.prototype.trim || ws.trim() || !zeroWidth.trim()) {\n    // http://blog.stevenlevithan.com/archives/faster-trim-javascript\n    // http://perfectionkills.com/whitespace-deviations/\n    ws = \"[\" + ws + \"]\";\n    var trimBeginRegexp = new RegExp(\"^\" + ws + ws + \"*\"),\n        trimEndRegexp = new RegExp(ws + ws + \"*$\");\n    String.prototype.trim = function trim() {\n        if (this === void 0 || this === null) {\n            throw new TypeError(\"can't convert \" + this + \" to object\");\n        }\n        return String(this)\n            .replace(trimBeginRegexp, \"\")\n            .replace(trimEndRegexp, \"\");\n    };\n}\n\n// ES-5 15.1.2.2\nif (parseInt(ws + '08') !== 8 || parseInt(ws + '0x16') !== 22) {\n    parseInt = (function (origParseInt) {\n        var hexRegex = /^0[xX]/;\n        return function parseIntES5(str, radix) {\n            str = String(str).trim();\n            if (!Number(radix)) {\n                radix = hexRegex.test(str) ? 16 : 10;\n            }\n            return origParseInt(str, radix);\n        };\n    }(parseInt));\n}\n\n//\n// Util\n// ======\n//\n\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\nfunction toInteger(n) {\n    n = +n;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction isPrimitive(input) {\n    var type = typeof input;\n    return (\n        input === null ||\n        type === \"undefined\" ||\n        type === \"boolean\" ||\n        type === \"number\" ||\n        type === \"string\"\n    );\n}\n\nfunction toPrimitive(input) {\n    var val, valueOf, toStr;\n    if (isPrimitive(input)) {\n        return input;\n    }\n    valueOf = input.valueOf;\n    if (isFunction(valueOf)) {\n        val = valueOf.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    toStr = input.toString;\n    if (isFunction(toStr)) {\n        val = toStr.call(input);\n        if (isPrimitive(val)) {\n            return val;\n        }\n    }\n    throw new TypeError();\n}\n\n// ES5 9.9\n// http://es5.github.com/#x9.9\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \" + o + \" to object\");\n    }\n    return Object(o);\n};\n\nvar ToUint32 = function ToUint32(x) {\n    return x >>> 0;\n};\n\n}));\n","/*!\r\n * jQuery Migrate - v1.2.1 - 2013-05-08\r\n * https://github.com/jquery/jquery-migrate\r\n * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT\r\n */\r\n(function( jQuery, window, undefined ) {\r\n// See http://bugs.jquery.com/ticket/13335\r\n// \"use strict\";\r\n\r\n\r\nvar warnedAbout = {};\r\n\r\n// List of warnings already given; public read only\r\njQuery.migrateWarnings = [];\r\n\r\n// Set to true to prevent console output; migrateWarnings still maintained\r\n// jQuery.migrateMute = false;\r\n\r\n// Show a message on the console so devs know we're active\r\nif ( !jQuery.migrateMute && window.console && window.console.log ) {\r\n\twindow.console.log(\"JQMIGRATE: Logging is active\");\r\n}\r\n\r\n// Set to false to disable traces that appear with warnings\r\nif ( jQuery.migrateTrace === undefined ) {\r\n\tjQuery.migrateTrace = true;\r\n}\r\n\r\n// Forget any warnings we've already given; public\r\njQuery.migrateReset = function() {\r\n\twarnedAbout = {};\r\n\tjQuery.migrateWarnings.length = 0;\r\n};\r\n\r\nfunction migrateWarn( msg) {\r\n\tvar console = window.console;\r\n\tif ( !warnedAbout[ msg ] ) {\r\n\t\twarnedAbout[ msg ] = true;\r\n\t\tjQuery.migrateWarnings.push( msg );\r\n\t\tif ( console && console.warn && !jQuery.migrateMute ) {\r\n\t\t\tconsole.warn( \"JQMIGRATE: \" + msg );\r\n\t\t\tif ( jQuery.migrateTrace && console.trace ) {\r\n\t\t\t\tconsole.trace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction migrateWarnProp( obj, prop, value, msg ) {\r\n\tif ( Object.defineProperty ) {\r\n\t\t// On ES5 browsers (non-oldIE), warn if the code tries to get prop;\r\n\t\t// allow property to be overwritten in case some other plugin wants it\r\n\t\ttry {\r\n\t\t\tObject.defineProperty( obj, prop, {\r\n\t\t\t\tconfigurable: true,\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tget: function() {\r\n\t\t\t\t\tmigrateWarn( msg );\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t},\r\n\t\t\t\tset: function( newValue ) {\r\n\t\t\t\t\tmigrateWarn( msg );\r\n\t\t\t\t\tvalue = newValue;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t} catch( err ) {\r\n\t\t\t// IE8 is a dope about Object.defineProperty, can't warn there\r\n\t\t}\r\n\t}\r\n\r\n\t// Non-ES5 (or broken) browser; just set the property\r\n\tjQuery._definePropertyBroken = true;\r\n\tobj[ prop ] = value;\r\n}\r\n\r\nif ( document.compatMode === \"BackCompat\" ) {\r\n\t// jQuery has never supported or tested Quirks Mode\r\n\tmigrateWarn( \"jQuery is not compatible with Quirks Mode\" );\r\n}\r\n\r\n\r\nvar attrFn = jQuery( \"<input/>\", { size: 1 } ).attr(\"size\") && jQuery.attrFn,\r\n\toldAttr = jQuery.attr,\r\n\tvalueAttrGet = jQuery.attrHooks.value && jQuery.attrHooks.value.get ||\r\n\t\tfunction() { return null; },\r\n\tvalueAttrSet = jQuery.attrHooks.value && jQuery.attrHooks.value.set ||\r\n\t\tfunction() { return undefined; },\r\n\trnoType = /^(?:input|button)$/i,\r\n\trnoAttrNodeType = /^[238]$/,\r\n\trboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,\r\n\truseDefault = /^(?:checked|selected)$/i;\r\n\r\n// jQuery.attrFn\r\nmigrateWarnProp( jQuery, \"attrFn\", attrFn || {}, \"jQuery.attrFn is deprecated\" );\r\n\r\njQuery.attr = function( elem, name, value, pass ) {\r\n\tvar lowerName = name.toLowerCase(),\r\n\t\tnType = elem && elem.nodeType;\r\n\r\n\tif ( pass ) {\r\n\t\t// Since pass is used internally, we only warn for new jQuery\r\n\t\t// versions where there isn't a pass arg in the formal params\r\n\t\tif ( oldAttr.length < 4 ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr( props, pass ) is deprecated\");\r\n\t\t}\r\n\t\tif ( elem && !rnoAttrNodeType.test( nType ) &&\r\n\t\t\t(attrFn ? name in attrFn : jQuery.isFunction(jQuery.fn[name])) ) {\r\n\t\t\treturn jQuery( elem )[ name ]( value );\r\n\t\t}\r\n\t}\r\n\r\n\t// Warn if user tries to set `type`, since it breaks on IE 6/7/8; by checking\r\n\t// for disconnected elements we don't warn on $( \"<button>\", { type: \"button\" } ).\r\n\tif ( name === \"type\" && value !== undefined && rnoType.test( elem.nodeName ) && elem.parentNode ) {\r\n\t\tmigrateWarn(\"Can't change the 'type' of an input or button in IE 6/7/8\");\r\n\t}\r\n\r\n\t// Restore boolHook for boolean property/attribute synchronization\r\n\tif ( !jQuery.attrHooks[ lowerName ] && rboolean.test( lowerName ) ) {\r\n\t\tjQuery.attrHooks[ lowerName ] = {\r\n\t\t\tget: function( elem, name ) {\r\n\t\t\t\t// Align boolean attributes with corresponding properties\r\n\t\t\t\t// Fall back to attribute presence where some booleans are not supported\r\n\t\t\t\tvar attrNode,\r\n\t\t\t\t\tproperty = jQuery.prop( elem, name );\r\n\t\t\t\treturn property === true || typeof property !== \"boolean\" &&\r\n\t\t\t\t\t( attrNode = elem.getAttributeNode(name) ) && attrNode.nodeValue !== false ?\r\n\r\n\t\t\t\t\tname.toLowerCase() :\r\n\t\t\t\t\tundefined;\r\n\t\t\t},\r\n\t\t\tset: function( elem, value, name ) {\r\n\t\t\t\tvar propName;\r\n\t\t\t\tif ( value === false ) {\r\n\t\t\t\t\t// Remove boolean attributes when set to false\r\n\t\t\t\t\tjQuery.removeAttr( elem, name );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// value is true since we know at this point it's type boolean and not false\r\n\t\t\t\t\t// Set boolean attributes to the same name and set the DOM property\r\n\t\t\t\t\tpropName = jQuery.propFix[ name ] || name;\r\n\t\t\t\t\tif ( propName in elem ) {\r\n\t\t\t\t\t\t// Only set the IDL specifically if it already exists on the element\r\n\t\t\t\t\t\telem[ propName ] = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telem.setAttribute( name, name.toLowerCase() );\r\n\t\t\t\t}\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Warn only for attributes that can remain distinct from their properties post-1.9\r\n\t\tif ( ruseDefault.test( lowerName ) ) {\r\n\t\t\tmigrateWarn( \"jQuery.fn.attr('\" + lowerName + \"') may use property instead of attribute\" );\r\n\t\t}\r\n\t}\r\n\r\n\treturn oldAttr.call( jQuery, elem, name, value );\r\n};\r\n\r\n// attrHooks: value\r\njQuery.attrHooks.value = {\r\n\tget: function( elem, name ) {\r\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\r\n\t\tif ( nodeName === \"button\" ) {\r\n\t\t\treturn valueAttrGet.apply( this, arguments );\r\n\t\t}\r\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value') no longer gets properties\");\r\n\t\t}\r\n\t\treturn name in elem ?\r\n\t\t\telem.value :\r\n\t\t\tnull;\r\n\t},\r\n\tset: function( elem, value ) {\r\n\t\tvar nodeName = ( elem.nodeName || \"\" ).toLowerCase();\r\n\t\tif ( nodeName === \"button\" ) {\r\n\t\t\treturn valueAttrSet.apply( this, arguments );\r\n\t\t}\r\n\t\tif ( nodeName !== \"input\" && nodeName !== \"option\" ) {\r\n\t\t\tmigrateWarn(\"jQuery.fn.attr('value', val) no longer sets properties\");\r\n\t\t}\r\n\t\t// Does not return so that setAttribute is also used\r\n\t\telem.value = value;\r\n\t}\r\n};\r\n\r\n\r\nvar matched, browser,\r\n\toldInit = jQuery.fn.init,\r\n\toldParseJSON = jQuery.parseJSON,\r\n\t// Note: XSS check is done below after string is trimmed\r\n\trquickExpr = /^([^<]*)(<[\\w\\W]+>)([^>]*)$/;\r\n\r\n// $(html) \"looks like html\" rule change\r\njQuery.fn.init = function( selector, context, rootjQuery ) {\r\n\tvar match;\r\n\r\n\tif ( selector && typeof selector === \"string\" && !jQuery.isPlainObject( context ) &&\r\n\t\t\t(match = rquickExpr.exec( jQuery.trim( selector ) )) && match[ 0 ] ) {\r\n\t\t// This is an HTML string according to the \"old\" rules; is it still?\r\n\t\tif ( selector.charAt( 0 ) !== \"<\" ) {\r\n\t\t\tmigrateWarn(\"$(html) HTML strings must start with '<' character\");\r\n\t\t}\r\n\t\tif ( match[ 3 ] ) {\r\n\t\t\tmigrateWarn(\"$(html) HTML text after last tag is ignored\");\r\n\t\t}\r\n\t\t// Consistently reject any HTML-like string starting with a hash (#9521)\r\n\t\t// Note that this may break jQuery 1.6.x code that otherwise would work.\r\n\t\tif ( match[ 0 ].charAt( 0 ) === \"#\" ) {\r\n\t\t\tmigrateWarn(\"HTML string cannot start with a '#' character\");\r\n\t\t\tjQuery.error(\"JQMIGRATE: Invalid selector string (XSS)\");\r\n\t\t}\r\n\t\t// Now process using loose rules; let pre-1.8 play too\r\n\t\tif ( context && context.context ) {\r\n\t\t\t// jQuery object as context; parseHTML expects a DOM object\r\n\t\t\tcontext = context.context;\r\n\t\t}\r\n\t\tif ( jQuery.parseHTML ) {\r\n\t\t\treturn oldInit.call( this, jQuery.parseHTML( match[ 2 ], context, true ),\r\n\t\t\t\t\tcontext, rootjQuery );\r\n\t\t}\r\n\t}\r\n\treturn oldInit.apply( this, arguments );\r\n};\r\njQuery.fn.init.prototype = jQuery.fn;\r\n\r\n// Let $.parseJSON(falsy_value) return null\r\njQuery.parseJSON = function( json ) {\r\n\tif ( !json && json !== null ) {\r\n\t\tmigrateWarn(\"jQuery.parseJSON requires a valid JSON string\");\r\n\t\treturn null;\r\n\t}\r\n\treturn oldParseJSON.apply( this, arguments );\r\n};\r\n\r\njQuery.uaMatch = function( ua ) {\r\n\tua = ua.toLowerCase();\r\n\r\n\tvar match = /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n\t\t/(msie) ([\\w.]+)/.exec( ua ) ||\r\n\t\tua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\r\n\t\t[];\r\n\r\n\treturn {\r\n\t\tbrowser: match[ 1 ] || \"\",\r\n\t\tversion: match[ 2 ] || \"0\"\r\n\t};\r\n};\r\n\r\n// Don't clobber any existing jQuery.browser in case it's different\r\nif ( !jQuery.browser ) {\r\n\tmatched = jQuery.uaMatch( navigator.userAgent );\r\n\tbrowser = {};\r\n\r\n\tif ( matched.browser ) {\r\n\t\tbrowser[ matched.browser ] = true;\r\n\t\tbrowser.version = matched.version;\r\n\t}\r\n\r\n\t// Chrome is Webkit, but Webkit is also Safari.\r\n\tif ( browser.chrome ) {\r\n\t\tbrowser.webkit = true;\r\n\t} else if ( browser.webkit ) {\r\n\t\tbrowser.safari = true;\r\n\t}\r\n\r\n\tjQuery.browser = browser;\r\n}\r\n\r\n// Warn if the code tries to get jQuery.browser\r\nmigrateWarnProp( jQuery, \"browser\", jQuery.browser, \"jQuery.browser is deprecated\" );\r\n\r\njQuery.sub = function() {\r\n\tfunction jQuerySub( selector, context ) {\r\n\t\treturn new jQuerySub.fn.init( selector, context );\r\n\t}\r\n\tjQuery.extend( true, jQuerySub, this );\r\n\tjQuerySub.superclass = this;\r\n\tjQuerySub.fn = jQuerySub.prototype = this();\r\n\tjQuerySub.fn.constructor = jQuerySub;\r\n\tjQuerySub.sub = this.sub;\r\n\tjQuerySub.fn.init = function init( selector, context ) {\r\n\t\tif ( context && context instanceof jQuery && !(context instanceof jQuerySub) ) {\r\n\t\t\tcontext = jQuerySub( context );\r\n\t\t}\r\n\r\n\t\treturn jQuery.fn.init.call( this, selector, context, rootjQuerySub );\r\n\t};\r\n\tjQuerySub.fn.init.prototype = jQuerySub.fn;\r\n\tvar rootjQuerySub = jQuerySub(document);\r\n\tmigrateWarn( \"jQuery.sub() is deprecated\" );\r\n\treturn jQuerySub;\r\n};\r\n\r\n\r\n// Ensure that $.ajax gets the new parseJSON defined in core.js\r\njQuery.ajaxSetup({\r\n\tconverters: {\r\n\t\t\"text json\": jQuery.parseJSON\r\n\t}\r\n});\r\n\r\n\r\nvar oldFnData = jQuery.fn.data;\r\n\r\njQuery.fn.data = function( name ) {\r\n\tvar ret, evt,\r\n\t\telem = this[0];\r\n\r\n\t// Handles 1.7 which has this behavior and 1.8 which doesn't\r\n\tif ( elem && name === \"events\" && arguments.length === 1 ) {\r\n\t\tret = jQuery.data( elem, name );\r\n\t\tevt = jQuery._data( elem, name );\r\n\t\tif ( ( ret === undefined || ret === evt ) && evt !== undefined ) {\r\n\t\t\tmigrateWarn(\"Use of jQuery.fn.data('events') is deprecated\");\r\n\t\t\treturn evt;\r\n\t\t}\r\n\t}\r\n\treturn oldFnData.apply( this, arguments );\r\n};\r\n\r\n\r\nvar rscriptType = /\\/(java|ecma)script/i,\r\n\toldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\r\n\r\njQuery.fn.andSelf = function() {\r\n\tmigrateWarn(\"jQuery.fn.andSelf() replaced by jQuery.fn.addBack()\");\r\n\treturn oldSelf.apply( this, arguments );\r\n};\r\n\r\n// Since jQuery.clean is used internally on older versions, we only shim if it's missing\r\nif ( !jQuery.clean ) {\r\n\tjQuery.clean = function( elems, context, fragment, scripts ) {\r\n\t\t// Set context per 1.8 logic\r\n\t\tcontext = context || document;\r\n\t\tcontext = !context.nodeType && context[0] || context;\r\n\t\tcontext = context.ownerDocument || context;\r\n\r\n\t\tmigrateWarn(\"jQuery.clean() is deprecated\");\r\n\r\n\t\tvar i, elem, handleScript, jsTags,\r\n\t\t\tret = [];\r\n\r\n\t\tjQuery.merge( ret, jQuery.buildFragment( elems, context ).childNodes );\r\n\r\n\t\t// Complex logic lifted directly from jQuery 1.8\r\n\t\tif ( fragment ) {\r\n\t\t\t// Special handling of each script element\r\n\t\t\thandleScript = function( elem ) {\r\n\t\t\t\t// Check if we consider it executable\r\n\t\t\t\tif ( !elem.type || rscriptType.test( elem.type ) ) {\r\n\t\t\t\t\t// Detach the script and store it in the scripts array (if provided) or the fragment\r\n\t\t\t\t\t// Return truthy to indicate that it has been handled\r\n\t\t\t\t\treturn scripts ?\r\n\t\t\t\t\t\tscripts.push( elem.parentNode ? elem.parentNode.removeChild( elem ) : elem ) :\r\n\t\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tfor ( i = 0; (elem = ret[i]) != null; i++ ) {\r\n\t\t\t\t// Check if we're done after handling an executable script\r\n\t\t\t\tif ( !( jQuery.nodeName( elem, \"script\" ) && handleScript( elem ) ) ) {\r\n\t\t\t\t\t// Append to fragment and handle embedded scripts\r\n\t\t\t\t\tfragment.appendChild( elem );\r\n\t\t\t\t\tif ( typeof elem.getElementsByTagName !== \"undefined\" ) {\r\n\t\t\t\t\t\t// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration\r\n\t\t\t\t\t\tjsTags = jQuery.grep( jQuery.merge( [], elem.getElementsByTagName(\"script\") ), handleScript );\r\n\r\n\t\t\t\t\t\t// Splice the scripts into ret after their former ancestor and advance our index beyond them\r\n\t\t\t\t\t\tret.splice.apply( ret, [i + 1, 0].concat( jsTags ) );\r\n\t\t\t\t\t\ti += jsTags.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn ret;\r\n\t};\r\n}\r\n\r\nvar eventAdd = jQuery.event.add,\r\n\teventRemove = jQuery.event.remove,\r\n\teventTrigger = jQuery.event.trigger,\r\n\toldToggle = jQuery.fn.toggle,\r\n\toldLive = jQuery.fn.live,\r\n\toldDie = jQuery.fn.die,\r\n\tajaxEvents = \"ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess\",\r\n\trajaxEvent = new RegExp( \"\\\\b(?:\" + ajaxEvents + \")\\\\b\" ),\r\n\trhoverHack = /(?:^|\\s)hover(\\.\\S+|)\\b/,\r\n\thoverHack = function( events ) {\r\n\t\tif ( typeof( events ) !== \"string\" || jQuery.event.special.hover ) {\r\n\t\t\treturn events;\r\n\t\t}\r\n\t\tif ( rhoverHack.test( events ) ) {\r\n\t\t\tmigrateWarn(\"'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'\");\r\n\t\t}\r\n\t\treturn events && events.replace( rhoverHack, \"mouseenter$1 mouseleave$1\" );\r\n\t};\r\n\r\n// Event props removed in 1.9, put them back if needed; no practical way to warn them\r\nif ( jQuery.event.props && jQuery.event.props[ 0 ] !== \"attrChange\" ) {\r\n\tjQuery.event.props.unshift( \"attrChange\", \"attrName\", \"relatedNode\", \"srcElement\" );\r\n}\r\n\r\n// Undocumented jQuery.event.handle was \"deprecated\" in jQuery 1.7\r\nif ( jQuery.event.dispatch ) {\r\n\tmigrateWarnProp( jQuery.event, \"handle\", jQuery.event.dispatch, \"jQuery.event.handle is undocumented and deprecated\" );\r\n}\r\n\r\n// Support for 'hover' pseudo-event and ajax event warnings\r\njQuery.event.add = function( elem, types, handler, data, selector ){\r\n\tif ( elem !== document && rajaxEvent.test( types ) ) {\r\n\t\tmigrateWarn( \"AJAX events should be attached to document: \" + types );\r\n\t}\r\n\teventAdd.call( this, elem, hoverHack( types || \"\" ), handler, data, selector );\r\n};\r\njQuery.event.remove = function( elem, types, handler, selector, mappedTypes ){\r\n\teventRemove.call( this, elem, hoverHack( types ) || \"\", handler, selector, mappedTypes );\r\n};\r\n\r\njQuery.fn.error = function() {\r\n\tvar args = Array.prototype.slice.call( arguments, 0);\r\n\tmigrateWarn(\"jQuery.fn.error() is deprecated\");\r\n\targs.splice( 0, 0, \"error\" );\r\n\tif ( arguments.length ) {\r\n\t\treturn this.bind.apply( this, args );\r\n\t}\r\n\t// error event should not bubble to window, although it does pre-1.7\r\n\tthis.triggerHandler.apply( this, args );\r\n\treturn this;\r\n};\r\n\r\njQuery.fn.toggle = function( fn, fn2 ) {\r\n\r\n\t// Don't mess with animation or css toggles\r\n\tif ( !jQuery.isFunction( fn ) || !jQuery.isFunction( fn2 ) ) {\r\n\t\treturn oldToggle.apply( this, arguments );\r\n\t}\r\n\tmigrateWarn(\"jQuery.fn.toggle(handler, handler...) is deprecated\");\r\n\r\n\t// Save reference to arguments for access in closure\r\n\tvar args = arguments,\r\n\t\tguid = fn.guid || jQuery.guid++,\r\n\t\ti = 0,\r\n\t\ttoggler = function( event ) {\r\n\t\t\t// Figure out which function to execute\r\n\t\t\tvar lastToggle = ( jQuery._data( this, \"lastToggle\" + fn.guid ) || 0 ) % i;\r\n\t\t\tjQuery._data( this, \"lastToggle\" + fn.guid, lastToggle + 1 );\r\n\r\n\t\t\t// Make sure that clicks stop\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\t// and execute the function\r\n\t\t\treturn args[ lastToggle ].apply( this, arguments ) || false;\r\n\t\t};\r\n\r\n\t// link all the functions, so any of them can unbind this click handler\r\n\ttoggler.guid = guid;\r\n\twhile ( i < args.length ) {\r\n\t\targs[ i++ ].guid = guid;\r\n\t}\r\n\r\n\treturn this.click( toggler );\r\n};\r\n\r\njQuery.fn.live = function( types, data, fn ) {\r\n\tmigrateWarn(\"jQuery.fn.live() is deprecated\");\r\n\tif ( oldLive ) {\r\n\t\treturn oldLive.apply( this, arguments );\r\n\t}\r\n\tjQuery( this.context ).on( types, this.selector, data, fn );\r\n\treturn this;\r\n};\r\n\r\njQuery.fn.die = function( types, fn ) {\r\n\tmigrateWarn(\"jQuery.fn.die() is deprecated\");\r\n\tif ( oldDie ) {\r\n\t\treturn oldDie.apply( this, arguments );\r\n\t}\r\n\tjQuery( this.context ).off( types, this.selector || \"**\", fn );\r\n\treturn this;\r\n};\r\n\r\n// Turn global events into document-triggered events\r\njQuery.event.trigger = function( event, data, elem, onlyHandlers  ){\r\n\tif ( !elem && !rajaxEvent.test( event ) ) {\r\n\t\tmigrateWarn( \"Global events are undocumented and deprecated\" );\r\n\t}\r\n\treturn eventTrigger.call( this,  event, data, elem || document, onlyHandlers  );\r\n};\r\njQuery.each( ajaxEvents.split(\"|\"),\r\n\tfunction( _, name ) {\r\n\t\tjQuery.event.special[ name ] = {\r\n\t\t\tsetup: function() {\r\n\t\t\t\tvar elem = this;\r\n\r\n\t\t\t\t// The document needs no shimming; must be !== for oldIE\r\n\t\t\t\tif ( elem !== document ) {\r\n\t\t\t\t\tjQuery.event.add( document, name + \".\" + jQuery.guid, function() {\r\n\t\t\t\t\t\tjQuery.event.trigger( name, null, elem, true );\r\n\t\t\t\t\t});\r\n\t\t\t\t\tjQuery._data( this, name, jQuery.guid++ );\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tteardown: function() {\r\n\t\t\t\tif ( this !== document ) {\r\n\t\t\t\t\tjQuery.event.remove( document, name + \".\" + jQuery._data( this, name ) );\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n);\r\n\r\n\r\n})( jQuery, window );\r\n","/*global define:true, require:true*/ // require.js\n/*jslint indent:2*/\n/*jslint browser:true nomen:true*/\n\n(function (window) {\n  'use strict';\n\n  var BMP = window.BMP,\n    URL = {},\n    generateUUID,\n    blobs = {}; // in-memory storage\n\n  /**\n   * @param {Blob} blob object to store.\n   * @param {Object} [options] optional parameters with 'autoRevoke' attribute.\n   * @returns {String} Blob URI.\n   */\n  URL.createObjectURL = function (blob, options) {\n    var key = generateUUID(),\n      autoRevoke = !!(options && options.autoRevoke) || false;\n\n    blobs[key] = blob;\n    // TODO: handle autoRevoke when specification is finalised\n    return 'blob:' + key;\n  };\n\n  URL.revokeObjectURL = function (uri) {\n    var key = uri.replace('blob:', '');\n    delete blobs[key];\n  };\n\n  /**\n   * non-W3C standard, but used for our implementation\n   */\n  URL.retrieveObject = function (uri) {\n    var key = uri.replace('blob:', '');\n    return blobs[key];\n  };\n\n  /**\n   * non-W3C standard, but used for our implementation\n   */\n  URL.revokeAllObjectURLs = function () {\n    blobs = {};\n  };\n\n  generateUUID = function () {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      /*jslint bitwise:true*/\n      var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n      /*jslint bitwise:false*/\n      return v.toString(16);\n    });\n  };\n\n  window.BMP = window.BMP || {};\n  window.BMP.URL = URL;\n}(this));\n\n(function (window) {\n  'use strict';\n  var BMP,\n    MIME;\n\n  window.BMP = window.BMP || {};\n  BMP = window.BMP;\n\n  BMP.MIME = BMP.MIME || {};\n  MIME = BMP.MIME;\n\n  /**\n   * @const\n   */\n  MIME.TEXT_TYPES = [\n    'application/javascript',\n    'application/json',\n    'application/x-javascript'\n  ];\n\n  /**\n   * @param {String} type e.g. 'image/jpeg'\n   * @returns {Boolean}\n   */\n  MIME.isText = function (type) {\n    // TODO: strip type parameters (semi-colon and onwards) ??\n    if (type.indexOf('text/') === 0) {\n      return true;\n    }\n    if (MIME.TEXT_TYPES.indexOf(type) !== -1) {\n      return true;\n    }\n    return false;\n  };\n\n}(this));\n\n/*jslint indent:2*/\n/*jslint browser:true*/\n/*jslint nomen:true, plusplus:true*/\n\n(function (window) {\n  'use strict';\n  var b, isConstructableBlob = true,\n    Blob,\n    NestedBlob,\n    convertArrayBufferToBase64,\n    convertStringToArrayBuffer,\n    MIME = window.BMP.MIME;\n\n  try {\n    b = new window.Blob();\n    b = null;\n  } catch (err) {\n    isConstructableBlob = false;\n  }\n\n  // http://stackoverflow.com/questions/9267899\n  convertArrayBufferToBase64 = function (buffer) {\n    var binary = '',\n      bytes = new window.Uint8Array(buffer),\n      len = bytes.byteLength,\n      i;\n\n    for (i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n\n  /**\n   * @constructor\n   * @param {Array} [data] contains 1 {String}\n   * @param {Object} [options] properties Object with \"type\" attribute\n   */\n  Blob = function (data, options) {\n    var datum;\n\n    if (data && !Array.isArray(data)) {\n      throw new Error('first argument should be an Array');\n    }\n\n    options = options || {};\n\n    this.size = 0;\n    this.type = '';\n    this.base64 = '';\n    this.text = '';\n\n    if (typeof options === 'object') {\n      this.type = options.type || this.type;\n    }\n\n    if (data && data.length) {\n      datum = data[0];\n      if (typeof datum === 'string') {\n        if (datum.indexOf('data:') === 0 && this.type === 'text/plain') {\n          this.size += datum.length;\n          this.text += datum;\n        } else {\n          this.size += datum.length;\n          this.base64 += datum;\n        }\n      }\n    }\n\n    return this;\n  };\n\n  /**\n   * cross-browser constructor for Blob\n   * @param {Array} data Array of {ArrayBuffer|ArrayBufferView|Blob|String}.\n   * @param {Object} [options] optional Object with \"type\" attribute\n   */\n  Blob.createNative = function (data, options) {\n    var builder;\n    options = options || {};\n    if (isConstructableBlob) {\n      return new window.Blob(data, options);\n    }\n    if (window.BlobBuilder) {\n      builder = new window.BlobBuilder();\n      builder.append(data);\n      return builder.getBlob(options);\n    }\n    return new Blob(data, options);\n  };\n\n  /**\n   * @param {String} url\n   * @param {Function} onSuccess function({BMP.Blob} blob)\n   * @param {Function} onError function({Error} error)\n   */\n  Blob.fromBlobURL = function (url, onSuccess, onError) {\n    var xhr,\n      blob;\n\n    onSuccess = onSuccess || function () {};\n    onError = onError || function () {};\n\n    if (!window.URL || !window.URL.createObjectURL) {\n      this.fromNativeBlob(window.BMP.URL.retrieveObject(url), function (blob) {\n        onSuccess(blob);\n      }, function (err) {\n        onError(err);\n      });\n\n    } else { // native URL.createObjectURL, therefore use XMLHTTPRequest\n      Blob.nativelyFromBlobURL(url, onSuccess, onError);\n    }\n  };\n\n  /**\n   * @param {Blob} blob\n   * @param {Function} onSuccess function({BMP.Blob} blob)\n   * @param {Function} onError function({Error} error)\n   */\n  Blob.fromNativeBlob = function (blob, onSuccess, onError) {\n    var fr = new window.FileReader();\n\n    onSuccess = onSuccess || function () {};\n    onError = onError || function () {};\n\n    fr.onload = function (event) {\n      var result;\n      fr.onload = null;\n      try {\n        result = event.target.result;\n        blob = Blob.fromDataURI(event.target.result);\n        if (!blob) {\n          throw new Error('Blob.fromNativeBlob: fromDataURI gave no blob');\n        }\n      } catch (err) {\n        onError(err);\n        return;\n      }\n      onSuccess(blob);\n    };\n    fr.onerror = function (event) {\n      fr.onerror = null;\n      onError(event.target.error);\n    };\n    try {\n      fr.readAsDataURL(blob);\n    } catch (err) {\n      fr.onload = null;\n      fr.onerror = null;\n      onError(err);\n    }\n  };\n\n  /**\n   * @param {String} dataURI\n   * @returns {BMP.Blob} not native Blob!\n   */\n  Blob.fromDataURI = function (dataURI) {\n    var parts,\n      type,\n      encoding,\n      data,\n      blob = new Blob();\n\n    parts = dataURI.split(','); // 0 => header, 1 => data\n    data = parts[1];\n    parts = parts[0].split(':'); // 0 => 'data', 1 => type;encoding\n    parts = parts[1].split(';'); // 0 => type, 1 => encoding\n    type = parts[0];\n    encoding = parts[1];\n\n    if (encoding === 'base64') {\n      blob.base64 = data;\n    } else {\n      blob.text = data;\n    }\n    blob.type = type;\n    blob.size = data.length;\n\n    try {\n      blob = Blob.fromDataURI(window.atob(blob.base64));\n      blob.makeNested();\n    } catch (err) {\n      // do nothing, let original blob be returned\n    }\n\n    return blob;\n  };\n\n  /**\n   * @param {String} url\n   * @param {Function} onSuccess function({BMP.Blob} blob)\n   * @param {Function} onError function({Error} error)\n   */\n  Blob.nativelyFromBlobURL = function (url, onSuccess, onError) {\n    var xhr,\n      blob;\n\n    onSuccess = onSuccess || function () {};\n    onError = onError || function () {};\n\n    xhr = new window.XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      var mime,\n        base64,\n        serializer;\n\n      if (this.readyState === window.XMLHttpRequest.DONE) {\n        this.onreadystatechange = null;\n        mime = this.getResponseHeader('Content-Type');\n        if (this.status === 200) {\n          if (this.responseType === 'arraybuffer') {\n            base64 = convertArrayBufferToBase64(this.response);\n            blob = new Blob([base64], { type: mime });\n\n          } else if (this.responseType === 'blob') {\n            Blob.fromNativeBlob(this.response, function (blob) {\n              onSuccess(blob);\n            }, function (err) {\n              onError(err);\n            });\n\n          } else if (this.responseType === 'document') {\n            serializer = new window.XMLSerializer();\n            base64 = window.btoa(serializer.serializeToString(this.response));\n            blob = new Blob([base64], { type: mime });\n\n          } else if (this.responseType === 'json') {\n            base64 = window.btoa(JSON.stringify(this.response));\n            blob = new Blob([base64], { type: mime });\n\n          } else { // this.responseType === 'text'\n            blob = new Blob([this.response], { type: mime });\n          }\n          if (blob) {\n            onSuccess(blob);\n          } else {\n            onError(new Error('error retrieving target Blob via Blob URL'));\n          }\n\n        } else { // status === 500\n          onError(new Error(this.url + ' -> ' + this.status));\n        }\n      }\n    };\n    xhr.open('GET', url);\n    xhr.send();\n  };\n\n  /**\n   * @param {BMP.Blob} blob\n   */\n  Blob.isNested = function () {\n\n  };\n\n  /**\n   * @returns {Blob} a Base64-encoded BMP.Blob within a Blob\n   */\n  Blob.prototype.makeNested = function () {\n    var dataURI = 'data:';\n    dataURI += this.type;\n    dataURI += ';base64,';\n    dataURI += this.base64;\n    this.type = 'text/plain';\n    this.text = dataURI;\n    this.base64 = null;\n  };\n\n  Blob.prototype.undoNested = function () {\n    var blob = Blob.fromDataURI(this.text);\n    this.type = blob.type;\n    this.base64 = blob.base64;\n    this.text = null;\n  };\n\n  Blob.prototype.toNative = function () {\n    return window.BMP.Blob.createNative([window.atob(this.base64)], {\n      type: this.type\n    });\n  };\n\n  window.BMP = window.BMP || {};\n  window.BMP.Blob = Blob;\n  window.BMP.NestedBlob = NestedBlob;\n}(this));\n","/*global DOMParser, ActiveXObject*/ // Web Platform and Internet Explorer APIs\n\n/* new tests for Modernizr */\n(function(window) {\n  'use strict';\n  var Modernizr = window.Modernizr,\n      document = window.document,\n      $ = window.jQuery,\n      // vars for additional canvas tests\n      image,\n      canvas,\n      ctx;\n\n  if (!Modernizr) {\n    window.warn('Blink Modernizr tests need Modernizr to be included first.');\n    return;\n  }\n\n  // https://github.com/Modernizr/Modernizr/blob/master/feature-detects/file-api.js\n  Modernizr.addTest('filereader', function() {\n    return !!(window.File && window.FileList && window.FileReader);\n  });\n\n  Modernizr.addTest('positionfixed', function() {\n    var test = document.createElement('div'),\n        fake = false,\n        root = document.body || (function() {\n          fake = true;\n          return document.documentElement.appendChild(document.createElement('body'));\n        }()),\n        oldCssText = root.style.cssText,\n        ret, offset;\n\n    root.style.cssText = 'height: 3000px; margin: 0; padding; 0;';\n    test.style.cssText = 'position: fixed; top: 100px';\n    root.appendChild(test);\n    window.scrollTo(0, 500);\n    offset = $(test).offset();\n    ret = offset.top === 600; // 100 + 500\n    if (!ret && typeof test.getBoundingClientRect !== 'undefined') {\n      ret = test.getBoundingClientRect().top === 100;\n    }\n    root.removeChild(test);\n    root.style.cssText = oldCssText;\n    window.scrollTo(0, 1);\n    if (fake) {\n      document.documentElement.removeChild(root);\n    }\n    return ret;\n  });\n\n  Modernizr.addTest('xpath', function () {\n    // http://developer.samsung.com/forum/board/thread/view.do?boardName=General&messageId=253999\n    var tmp, xml, result;\n    if (!window.XPathResult || !window.DOMParser) {\n      return false; // constructors for Firefox, Safari and Chrome not found\n    }\n    try {\n      tmp = new DOMParser();\n      xml = tmp.parseFromString('<book><page /></book>', 'text/xml');\n    } catch (ignore) {}\n    if (!xml || !xml.documentElement || xml.getElementsByTagName('parsererror').length) {\n      return false; // XML didn't parse correctly\n    }\n    if (!xml.evaluate) {\n      return false; // no support for `evaluate` method\n    }\n    try {\n      result = xml.evaluate('/book', xml, null, 9, null);\n      return !!(result && result.singleNodeValue);\n    } catch (ignore) {}\n    return false;\n  });\n\n  Modernizr.addTest('documentfragment', function() {\n    var outerFragment,\n    innerFragment,\n    p;\n\n    try {\n      p = document.createElement('p');\n\n      outerFragment = document.createDocumentFragment();\n      innerFragment = document.createDocumentFragment();\n\n      innerFragment.appendChild(p);\n      outerFragment.appendChild(innerFragment);\n\n      // intermediate fragments are supposed to be destroyed\n      if (p.parentNode !== outerFragment) {\n        return false;\n      }\n      if (innerFragment.parentNode === outerFragment) {\n        return false;\n      }\n\n      return true;\n\n    } catch (error) {\n      return false;\n    }\n\n  });\n\n  /**\n   * Check to see if input[type=file] even works on this browser.\n   */\n  Modernizr.inputtypes.file = (function() {\n    var userAgent = navigator.userAgent,\n    isAndroid = userAgent.indexOf('Android') !== -1,\n    isEclair = isAndroid && /Android 2\\.(0|1)/.test(userAgent),\n    dummy;\n    // check for Android <= 2.1 and report false\n    if (isAndroid) {\n      if (userAgent.indexOf('Android 1.') !== -1 || isEclair) {\n        return false;\n      }\n    }\n    dummy = document.createElement('input');\n    dummy.setAttribute('type', 'file');\n    return dummy.disabled === false;\n  }());\n\n  /**\n   * Check to see if non-Integer values are valid in input[type=number].\n   * They should be, but some WebKits disagree.\n   */\n  Modernizr.inputtypes.number = (function() {\n    var $number,\n        test;\n    if (!Modernizr.inputtypes.number) {\n      return false;\n    }\n    $number = $('<input type=\"number\" />');\n    $number.val(1.5);\n    test = $number[0].checkValidity();\n    $number.remove();\n    return test;\n  }());\n\n// https://github.com/Modernizr/Modernizr/blob/master/feature-detects/canvas-todataurl-type.js\n  if (Modernizr.canvas) {\n    image = new Image(),\n    canvas = document.createElement('canvas'),\n    ctx = canvas.getContext('2d');\n    image.onload = function() {\n      ctx.drawImage(image, 0, 0);\n      Modernizr.addTest('canvastodataurlpng', function() {\n        return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n      });\n      Modernizr.addTest('canvastodataurljpeg', function() {\n        return canvas.toDataURL('image/jpeg').indexOf('data:image/jpeg') === 0;\n      });\n      Modernizr.addTest('canvastodataurlwebp', function() {\n        return canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n      });\n    };\n    image.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACklEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==';\n  }\n\n}(this));\n\n\n","/* basic collection of utility functions not expected to undergo rapid\n * development requires jQuery\n * if Modernizr is being used, please include this after Modernizr\n */\n\n/*jslint browser:true, indent:2, nomen:true, plusplus:true, todo:true*/\n/*global error, warn*/\n\n(function (window) {\n  'use strict';\n  var $ = window.jQuery,\n    Math = window.Math;\n  /* END: var */\n\n  // detect BlinkGap / PhoneGap / Callback\n  window.isBlinkGapDevice = function () {\n    return window.PhoneGap && $.type(window.device) === 'object' &&\n      window.device instanceof window.Device;\n  };\n\n  window.computeTimeout = function (messageLength) {\n\n    var lowestTransferRateConst = 1000 / (4800 / 8);\n    // maxTransactionTimeout = 180 * 1000;\n    return Math.floor((messageLength * lowestTransferRateConst) + 15000);\n  };\n\n}(this));\n\n/* logging functions\n * initialises log(), error(), warn(), info() in the global context\n */\n(function (window) {\n  'use strict';\n  var $ = window.jQuery,\n    $document = $(window.document),\n    early = { // catch messages from before we are ready\n      history: []\n    },\n    console,\n    fns = ['log', 'error', 'warn', 'info'],\n    /**\n * re-route messages now that we are ready\n */\n    initialise = function () {\n      $document.off('ready deviceready', initialise);\n      setTimeout(function () { // force thread-switch for PhoneGap\n        console = window.console || window.debug || { log: $.noop };\n        /*jslint unparam:true*/\n        $.each(fns, function (index, fn) {\n          var type = $.type(console[fn]);\n          if (type === 'function') {\n            window[fn] = function () {\n              console[fn].apply(console, arguments);\n            };\n          } else if (type === 'object') {\n            window[fn] = function (message) {\n              console[fn](message);\n            };\n          } else if (fn !== 'log') {\n            window[fn] = window.log;\n          } else {\n            window[fn] = $.noop;\n          }\n        });\n        /*jslint unparam:false*/\n        // playback early messages\n        /*jslint unparam:true*/\n        $.each(early.history, function (index, message) {\n          var fn = window[message.fn],\n            type = $.type(fn);\n\n          if (type === 'function') {\n            fn.apply(console, message.args);\n          } else if (type === 'object') {\n            fn(message.args[0]);\n          }\n        });\n        /*jslint unparam:false*/\n        // discard unused objects\n        delete early.history;\n        /*jslint unparam:true*/\n        $.each(fns, function (index, fn) {\n          delete early[fn];\n        });\n        /*jslint unparam:false*/\n      }, 0);\n    },\n    waitForBlinkGap = function () {\n      if (window.PhoneGap && window.PhoneGap.available) {\n        if (early.history) {\n          initialise();\n        }\n      } else {\n        setTimeout(waitForBlinkGap, 197);\n      }\n    };\n\n  // setup routing for early messages\n  console = early;\n  /*jslint unparam:true*/\n  $.each(fns, function (index, fn) {\n    early[fn] = function () {\n      early.history.push({ 'fn': fn, 'args': $.makeArray(arguments) });\n    };\n    window[fn] = console[fn];\n  });\n  /*jslint unparam:false*/\n\n  // wait until we are ready to start real routing\n  if (window.isBlinkGap) {\n    waitForBlinkGap();\n  } else {\n    $document.on('ready', initialise);\n  }\n}(this));\n\n//* convenient additions to the String prototype*/\n(function (window) {\n  'use strict';\n  var String = window.String;\n  String.prototype.hasEntities = function () {\n    var string = this;\n    if (string.indexOf('&') === -1) {\n      return false;\n    }\n  // TODO: use RegExp to properly detect HTML Entities\n  };\n  String.prototype.repeat = function (occurrences) {\n    var string = '',\n      o;\n    for (o = 0; o < occurrences; o++) {\n      string += this;\n    }\n    return string;\n  };\n}(this));\n\n/* minor improvements to Math */\n(function (window) {\n  'use strict';\n  var Math = window.Math,\n    oldRound = Math.round;\n  /* END: var */\n\n  /* duck-punching Math.round() so it accepts a 2nd parameter */\n  Math.round = function (value, decimals) {\n    var order;\n    if (!decimals || decimals === 0) {\n      return oldRound(value);\n    }\n    order = Math.pow(10, decimals);\n    if (typeof decimals === 'number' && decimals > 0) {\n      value = Math.round(value * order) / order;\n    }\n    return value;\n  };\n\n  /*\n  * Math.uuid.js, minimalistic uuid generator. Original script from Robert\n  * Kieffer, http://www.broofa.com Dual licensed under the MIT and GPL licenses.\n  * example: >>> Math.uuid(); // returns RFC4122, version 4 ID\n  * \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\n  */\n  /*jslint bitwise: true*/\n  if (typeof Math.uuid !== 'function') {\n    Math.uuid = function () {\n      var chars = Math.uuid.CHARS,\n        uuid = [],\n        r,\n        i = 36;\n\n      // rfc4122 requires these characters\n      uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n      uuid[14] = '4';\n\n      // Fill in random data. At i==19 set the high bits of clock sequence as\n      // per rfc4122, sec. 4.1.5\n      while (i--) {\n        if (!uuid[i]) {\n          r = Math.random() * 16 | 0;\n          uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\n        }\n      }\n      return uuid.join('');\n    };\n    Math.uuid.CHARS = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A',\n      'B', 'C', 'D', 'E', 'F'];\n  }\n  /*jslint bitwise: false*/\n}(this));\n\n/* minor improvements to jQuery */\n(function (window) {\n  'use strict';\n  var $ = window.jQuery,\n    _oldAttr = $.fn.attr,\n    _show = $.fn.show;\n  /* END: var */\n\n  /**\n   * checks to see if an Object has the listed Properties\n   * didn't feel comfortable exposing this to the world\n   * really handy for duck-typing (does it quack like a duck?)\n   * @param {Object} object object to check.\n   * @param {Object|Array} props array of properties, or map of property->type.\n   * @return {Boolean} all properties present?\n   */\n  function hasProperties(object, props) {\n    var result = true;\n    if (!object || $.type(object) !== 'object') {\n      return false;\n    }\n    if ($.type(props) === 'array') {\n      /*jslint unparam:true*/\n      $.each(props, function (index, name) {\n        if (object[name] === undefined) {\n          result = false;\n          return false; // break loop now\n        }\n        return true; // continue testing\n      });\n      /*jslint unparam:false*/\n      return result;\n    }\n    if ($.type(props) === 'object') {\n      $.each(props, function (name, value) {\n        if ($.type(object[name]) !== value) {\n          result = false;\n          return false; // break loop now\n        }\n        return true; // continue testing\n      });\n      return result;\n    }\n    return false;\n  }\n\n  /**\n   * @param {Object} Does $.type(object) === 'object'?\n   */\n  $.isObject = function (variable) {\n    return $.type(variable) === 'object';\n  };\n\n  /**\n   * @return {Boolean} Is object a jQuery Deferred Promise (read-only)?\n   */\n  $.isPromise = function (object) {\n    var type = 'function',\n      props = {\n        always: type,\n        done: type,\n        fail: type,\n        pipe: type,\n        progress: type,\n        promise: type,\n        state: type,\n        then: type\n      };\n    return hasProperties(object, props);\n  };\n\n  /**\n   * @return {Boolean} Is object a jQuery Deferred Object (read-write)?\n   */\n  $.isDeferred = function (object) {\n    var type = 'function',\n      props = {\n        notify: type,\n        notifyWith: type,\n        reject: type,\n        rejectWith: type,\n        resolve: type,\n        resolveWith: type\n      };\n    if ($.isPromise(object)) {\n      return hasProperties(object, props);\n    }\n    return false;\n  };\n\n  // duck-punching to make attr() return a map\n  $.fn.attr = function () {\n    var attributes, map;\n    if (this[0] && arguments.length === 0) {\n      map = {};\n      attributes = this[0].attributes;\n      /*jslint unparam:true*/\n      $.each(attributes, function (index, attribute) {\n        var name = attribute.name || attribute.nodeName,\n          value = attribute.value || attribute.nodeValue;\n        /* END: var */\n        if (name) {\n          map[name.toLowerCase()] = value;\n        }\n      });\n      /*jslint unparam:false*/\n      return map;\n    }\n    return _oldAttr.apply(this, arguments);\n  };\n\n  // TODO: remove this backwards-compatibility later\n  $.fn.show = function () {\n    this.removeAttr('hidden');\n    this.removeClass('hidden');\n    return _show.apply(this, arguments);\n  };\n\n  $.fn.isHidden = function () {\n    if (this.prop('hidden') || this.hasClass('hidden')) {\n      return true;\n    }\n    return this[0] && this[0].style && this[0].style.display === 'none';\n  };\n\n  // return just the element's HTML tag (no attributes or innerHTML)\n  $.fn.tag = function () {\n    var tag;\n    if (this.length > 0) {\n      tag = this[0].nodeName || this[0].tagName || '';\n      return tag.toLowerCase();\n    }\n    return '';\n  };\n\n  // return a simple HTML tag string not containing the innerHTML\n  $.fn.tagHTML = function () {\n    var $this = $(this),\n      html;\n    if (this[0]) {\n      html = '<' + $this.tag();\n      $.each($this.attr(), function (key, value) {\n        html += ' ' + key + '=\"' + value + '\"';\n      });\n      html += ' />';\n      return html;\n    }\n  };\n\n  /* function to allow passing an array to jQuery.when() */\n  $.whenArray = function (array) {\n    return $.when.apply($, array);\n  };\n  /* automatically wrap Deferred.resolve in a setTimeout\n   * @param {jQueryDeferred} deferred\n   */\n  $.resolveTimeout = function () {\n    var args = $.makeArray(arguments),\n      deferred = args.shift();\n    setTimeout(function () {\n      deferred.resolve.apply(deferred, args);\n    }, 0);\n    return this;\n  };\n\n  /*\n   * @param {String} string (X)HTML or text to append to the selected element\n   * @param {Number} attempts number of times to try\n   * @param {String} [needle] resulting HTML must include this for success\n   * @param {Number} [lastIndex] only used internally\n   * @returns {jQueryPromise}\n   */\n  /*jslint regexp: true*/\n  $.fn.appendWithCheck = function (string, attempts, needle, lastIndex) {\n    var $element = $(this),\n      deferred = new $.Deferred(),\n      MyAnswers = window.MyAnswers;\n    /* END: var */\n    if ($.type(needle) !== 'string') {\n      needle = string.match(/>([^<>\\0\\n\\f\\r\\t\\v]+)</);\n      if (!needle) {\n        needle = string.match(/(\\w+)/);\n      }\n      needle = $.type(needle) === 'array' ? needle[0] : string;\n    }\n    if ($.type(lastIndex) !== 'number') {\n      MyAnswers.dispatch.add(function () {\n        lastIndex = $element.html().lastIndexOf(needle);\n      });\n    }\n    MyAnswers.dispatch.add(function () {\n      $element.append(string);\n    });\n    MyAnswers.dispatch.add(function () {\n      var html = $element.html();\n      if ($.type(html) !== 'string' || !html ||\n          html.lastIndexOf(needle) > lastIndex) {\n        deferred.resolve();\n      } else if (attempts > 0) {\n        $.when($element.appendWithCheck(string, --attempts, needle, lastIndex))\n          .fail(deferred.reject)\n          .then(deferred.resolve);\n      } else {\n        deferred.reject();\n      }\n    });\n    return deferred.promise();\n  };\n  /*jslint regexp: false*/\n\n  $.fn.childrenAsProperties = function () {\n    var properties = {};\n    /*jslint unparam:true*/\n    $(this).children().each(function (index, element) {\n      var $element = $(element),\n        name = $element.tag(),\n        value = $element.text();\n      if (name.length > 0 && value.length > 0) {\n        properties[name] = value;\n      }\n    });\n    /*jslint unparam:false*/\n    return properties;\n  };\n\n  // from http://api.jquery.com/jQuery.getScript/\n  $.getCachedScript = function (url, options) {\n    options = $.extend(options || {}, {\n      dataType: \"script\",\n      cache: true,\n      url: url\n    });\n    return $.ajax(options);\n  };\n  /*jslint nomen: false*/\n}(this));\n\n(function (window) {\n  'use strict';\n  var $ = window.jQuery,\n    _Blink = window._Blink,\n    _SERVER = window._SERVER,\n    defaults = {\n      'PREFIX_GZ': '/_c_/',\n      'SUFFIX_GZ': '',\n      'PREFIX': '/_c_/',\n      'SUFFIX': ''\n    },\n    /** @const */\n    GZ_TYPES = ['css', 'js'],\n    /**\n     * JavaScript mirror of our PHP class: \\Blink\\CDN\\PlatformCDN\n     * @class\n     * @param {String} [encoding] Provide the HTTP_ACCEPT_ENCODING Header.\n     */\n    PlatformCDN = function (encoding) {\n      var cfg, isAppCache, isSecure;\n\n      isAppCache = window.applicationCache && window.applicationCache.status !== 0;\n      isSecure = window.location && window.location.protocol === 'https:';\n\n      cfg = _Blink && _Blink.cfg && _Blink.cfg.CDN_PLATFORM;\n      cfg = $.isObject(cfg) ? cfg : {};\n      cfg = $.extend({}, defaults, cfg);\n      encoding = encoding || (_SERVER && _SERVER.HTTP_ACCEPT_ENCODING);\n      encoding = typeof encoding === 'string' ? encoding : '';\n      if (encoding.indexOf('gzip') === -1) {\n        cfg.PREFIX_GZ = cfg.PREFIX;\n        cfg.SUFFIX_GZ = cfg.SUFFIX;\n      }\n      if (isAppCache && isSecure) {\n        cfg.PREFIX = '/_c_/';\n        cfg.SUFFIX = '';\n        cfg.PREFIX_GZ = cfg.PREFIX;\n        cfg.SUFFIX_GZ = cfg.SUFFIX;\n      }\n\n      /**\n       * add necessary protocol, domain and suffix to a given path\n       * @param  {String} path Provide the path to desired resource.\n       * @return {String} The completed URL.\n       */\n      this.getURL = function (path) {\n        var extension;\n        if (!path || typeof path !== 'string') {\n          return '';\n        }\n        path = $.trim(path);\n        path = path.replace(/^\\/*/, '');\n        extension = path.match(/\\.?(\\w+)$/);\n        extension = $.type(extension) === 'array' ? extension[1] : '';\n        if (!extension || $.inArray(extension, GZ_TYPES) === -1) {\n          return cfg.PREFIX + path + cfg.SUFFIX;\n        }\n        return cfg.PREFIX_GZ + path + cfg.SUFFIX_GZ;\n      };\n      return this;\n    };\n\n  _Blink.AnswerSpaceCDN = function (cdn) {\n    var cfg, basename, answerSpaceDefaults, getCDN;\n    answerSpaceDefaults = {\n      \"ROOT\": 'images/'\n    };\n    cfg = _Blink && _Blink.cfg && _Blink.cfg.CDN_USER;\n    cfg = $.isObject(cfg) ? cfg : {};\n    cfg = $.extend({}, answerSpaceDefaults, cfg);\n    cfg.cdnLocation = cdn;\n    basename = function (path, suffix) {\n      var b, ln;\n      /*jslint regexp:true*/ // this isn't being used for secure purposes\n      b = path.replace(/^.*[\\/\\\\]/g, '');\n      /*jslint regexp:false*/\n      if (suffix === undefined) {\n        suffix = \"\";\n      }\n      ln = b.length - suffix.length;\n      if (b.substr(ln) === suffix) {\n        b = b.substr(0, ln);\n      }\n      return b;\n    };\n    getCDN = function () {\n      var parts;\n      parts = cfg.cdnLocation.split(\":\");\n\n      return parts[1];\n    };\n    /**\n     * add necessary protocol, domain and suffix to a given path\n     * @param  {String} path Provide the path to desired resource.\n     * @return {String} The completed URL.\n     */\n    this.getURL = function (path) {\n      if (!path || typeof path !== 'string') {\n        return '';\n      }\n      path = $.trim(path);\n      path = path.replace(/^\\/*/, '');\n      if (basename(path) === path) {\n        path = cfg.ROOT + getCDN() + \"/\" + path;\n      }\n      return path;\n    };\n    return this;\n  };\n\n  /**\n   * use a hidden <iframe> to load a page,\n   * deleting the iframe when the page's <body> gains the \"s-ready\" class\n   * @param {String} src URL for the HTML content to be loaded.\n   */\n  _Blink.preloadPage = function (src) {\n    var $iframe = $('<iframe></iframe>'),\n      checkCountdown = 30,\n      iframeWindow,\n      onReadyFn = function () {\n        $iframe.remove();\n      },\n      testReadyFn = function () {\n        checkCountdown--;\n        if ($(iframeWindow.document.body).hasClass('s-ready')) {\n          onReadyFn();\n        } else if (checkCountdown < 0) {\n          warn('preloadPage(): timed out waiting for \"s-ready\"');\n          onReadyFn();\n        } else {\n          setTimeout(testReadyFn, 2000);\n        }\n      };\n\n    $iframe.attr({\n      height: 10,\n      width: 10,\n      'src': src\n    });\n    $iframe.css({\n      position: 'absolute',\n      top: '-50px',\n      left: '-50px'\n    });\n    $('body').append($iframe);\n    iframeWindow = $iframe[0].contentWindow;\n    if ($.isWindow(iframeWindow) && iframeWindow.document) {\n      if ($(iframeWindow.document.body).hasClass('s-ready')) {\n        onReadyFn();\n      } else {\n        setTimeout(testReadyFn, 2000);\n      }\n    } else {\n      warn('preloadPage(): unable to find Window or Document in <iframe>');\n    }\n  };\n\n  /**\n   * Convert a DOM HTML or XML Node into an XML String.\n   * @param {Node} node XML or HTML Node to convert.\n   * @return {String} XML String.\n   */\n  _Blink.stringifyDOM = function (node) {\n    var xmlSerializer;\n    if (node.xml) {\n      return node.xml;\n    }\n    if (window.XMLSerializer) {\n      xmlSerializer = new window.XMLSerializer();\n      return xmlSerializer.serializeToString(node);\n    }\n    return null;\n  };\n\n  /**\n   * @param {String} char Single character to be tested.\n   */\n  _Blink.hasFontFor = function (char) {\n    var me = _Blink.hasFontFor,\n      result,\n      $body,\n      $target,\n      $test;\n    try {\n      if (!me.results) {\n        me.results = {};\n      }\n      if (typeof me.results[char] === 'boolean') {\n        result = me.results[char];\n      } else {\n        $body = $(window.document.body);\n        $target = $('<span>' + char + '</span>');\n        $test = $('<span>&#xFFFD;</span>');\n        $target.add($test).appendTo($body);\n        result = $target.innerWidth() !== $test.innerWidth();\n        me.results[char] = result;\n        $target.add($test).remove();\n      }\n    } catch (err) {\n      error(err);\n      result = false;\n    }\n    return result;\n  };\n\n  // export singleton to global namespace\n  window._Blink.cdnp = new PlatformCDN();\n\n}(this));\n\n","/* \n * basic class for queuing execution\n * requires utilities.js\n */\n\n/*jslint white:true*/\n\n(function(window) {\n\t'use strict';\n\tvar $ = window.jQuery,\n\tBlinkDispatch = function(interval) {\n\t\tvar timeout = null,\n\t\tself = this; // to facilitate self-references\n\t\t/* END: var */\n\t\tthis.queue = [];\n\t\tthis.interval = interval || 0;\n\t\tthis.isPaused = false;\n\t\t\n\t\t/**\n\t\t * check to see if we have items in the queue, and process the first one\n\t\t */\n\t\tfunction processQueue() {\n\t\t\tif (self.isPaused || timeout !== null || self.queue.length === 0) {return;}\n\t\t\tvar item = self.queue.shift(),\n\t\t\tresult;\n\t\t\t/* END: var */\n\t\t\tif (typeof item === 'function') {\n\t\t\t\tresult = item();\n\t\t\t}\n\t\t\t// check to see if we have queued a jQuery Deferred Promise\n\t\t\tif (typeof $ === 'function' && $() instanceof $\n\t\t\t\t\t&& result && typeof result === 'object'\n\t\t\t\t\t&& result.promise && typeof result.promise === 'function') {\n\t\t\t\ttimeout = 0; // placeholder value\n\t\t\t\t$.when(result)\n\t\t\t\t.always(function() {\n\t\t\t\t\ttimeout = setTimeout(function() {\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\tprocessQueue();\n\t\t\t\t\t}, self.interval);\n\t\t\t\t});\n\t\t\t} else { // not a Promise\n\t\t\t\ttimeout = setTimeout(function() {\n\t\t\t\t\ttimeout = null;\n\t\t\t\t\tprocessQueue();\n\t\t\t\t}, self.interval);\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * public function to trigger processing of the queue\n\t\t */\n\t\tthis.poke = function() {\n\t\t\tprocessQueue();\n\t\t}\n\t\tthis.pause = function() {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = null;\n\t\t\tthis.isPaused = true;\n\t\t};\n\t\tthis.resume = function() {\n\t\t\tthis.isPaused = false;\n\t\t\tprocessQueue();\n\t\t};\n\t\treturn this;\n\t};\n\t/* END: var */\n\tBlinkDispatch.prototype.add = function(item) {\n\t\tthis.queue.push(item);\n\t\tthis.poke();\n\t};\n\t\n\twindow.BlinkDispatch = BlinkDispatch;\n}(this));\n","// UMD pattern from https://github.com/umdjs/umd/blob/master/amdWebGlobal.js\n\n/*global define:true*/\n\n(function (root, factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], function ($) {\n      // Also create a global in case some scripts\n      // that are loaded still are looking for\n      // a global even when an AMD loader is in use.\n      root.BMP = factory(root, $);\n      return (root.BMP);\n    });\n  } else {\n    // Browser globals\n    root.BMP = factory(root, root.$);\n  }\n}(this, function (global, $) {\n  'use strict';\n\n  var BMP,\n      $doc = $(global.document),\n      $body = $(global.document.body),\n      nav = global.navigator || {},\n      $dialog,\n      putDialog,\n      showDialog = {},\n      hasCordova,\n      hasjQueryUI,\n      hasjQueryMobile,\n      bindQueue;\n\n  BMP = global.BMP = global.BMP || {};\n\n  if (!$ || !$.fn || typeof $.fn.jquery !== 'string') {\n    // can't find valid jQuery, bailing out early\n    return;\n  }\n\n  putDialog = function() {\n    var $div = $('<div id=\"bmp-dialog-async\"></div>');\n    $div.hide();\n    $body.append($div);\n    return $div;\n  };\n\n  showDialog.jQueryUI = function(message, options) {\n    $dialog = $body.find('#bmp-dialog-async');\n    if (!$dialog.length) {\n      $dialog = putDialog();\n    }\n    $dialog.empty();\n    if ($dialog.hasClass('ui-dialog-content')) {\n      $dialog.dialog('destroy');\n    }\n    $dialog.append('<p>' + message + '</p>');\n    options.modal = true;\n    options.closeOnEscape = true;\n    $dialog.dialog(options);\n  };\n\n  hasjQueryUI = function() {\n    return $.fn.dialog;\n  };\n\n  hasjQueryMobile = function() {\n    return $.mobile && $.fn.dialog;\n  };\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/DOM/window.alert\n   * @param {String} message content to be displayed.\n   * @param {Object} [options] { title: \"...\", ok: \"...\" }\n   * @return {Promise} resolved when dismissed by user.\n   */\n  BMP.alertNoQueue = function(message, options) {\n    var dfrd = new $.Deferred(),\n        n10n = nav.notification || {},\n        alert = n10n.alert,\n        dismissedFn;\n\n    options = options || {};\n    options.ok = 'OK';\n\n    dismissedFn = function() {\n      dfrd.resolve();\n    };\n\n    if ($.type(alert) === 'function') {\n      // do cordova thing here\n      options.title = 'Alert';\n      alert(message, dismissedFn, options.title, options.ok);\n\n    /*\n    } else if (hasjQueryMobile()) {\n      // TODO: do jQueryMobile thing here\n      */\n\n    } else if (hasjQueryUI()) {\n      // do jQueryUI thing here\n      options.title = 'Alert';\n      options.buttons = {};\n      options.buttons[options.ok] = function() {\n        $(this).dialog('close');\n      };\n      options.close = dismissedFn;\n\n      showDialog.jQueryUI(message, options);\n\n    } else {\n      // last resort, use browser global :(\n      message = (options.title ? options.title + ' | ' : '') + message;\n      global.alert(message);\n      dfrd.resolve();\n    }\n    return dfrd.promise();\n  };\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/DOM/window.confirm\n   * @param {String} message content to be displayed.\n   * @param {Object} [options] { title: \"...\", ok: \"...\", cancel: \"...\" }\n   * @return {Promise} resolved when dismissed by user, passed Boolean result.\n   */\n  BMP.confirmNoQueue = function(message, options) {\n    var dfrd = new $.Deferred(),\n        n10n = nav.notification || {},\n        alert = n10n.alert;\n\n    options = options || {};\n    options.ok = options.ok || 'OK';\n    options.cancel = options.cancel || 'Cancel';\n\n    if ($.type(alert) === 'function') {\n      // do cordova thing here\n      options.title = options.title || 'Confirm';\n      alert(message, function(result) {\n        if (result === 1) {\n          // OK button pressed\n          dfrd.resolve(true);\n        } else {\n          // Cancel button or dialog dismissed\n          dfrd.resolve(false);\n        }\n      }, options.title, options.ok + ',' + options.cancel);\n\n      /*\n       } else if (hasjQueryMobile()) {\n       // TODO: do jQueryMobile thing here\n       */\n\n    } else if (hasjQueryUI()) {\n      // do jQueryUI thing here\n      options.title = options.title || 'Confirm';\n      options.buttons = {};\n      options.buttons[options.cancel] = function() {\n        $(this).dialog('close');\n      };\n      options.buttons[options.ok] = function() {\n        dfrd.resolve(true);\n        $(this).dialog('close');\n      };\n      options.close = function() {\n        if (!dfrd.isRejected() || !dfrd.isResolved()) {\n          dfrd.resolve(false);\n        }\n      };\n\n      showDialog.jQueryUI(message, options);\n\n    } else {\n      // last resort, use browser global :(\n      message = (options.title ? options.title + ' | ' : '') + message;\n      dfrd.resolve(global.confirm(message));\n    }\n    return dfrd.promise();\n  };\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/DOM/window.prompt\n   * @param {String} message content to be displayed.\n   * @param {String} [value] optional default value to be displayed.\n   * @param {Object} [options] { title: \"...\", ok: \"...\", cancel: \"...\" }\n   * @return {Promise} resolved when dismissed by user, passed input String.\n   */\n  BMP.promptNoQueue = function(message, value, options) {\n    var dfrd = new $.Deferred();\n\n    if (typeof value !== 'string') {\n      options = value;\n      value = '';\n    }\n\n    options = options || {};\n    options.ok = options.ok || 'OK';\n    options.cancel = options.cancel || 'Cancel';\n\n    // as of Cordova 2.5, there is no native functionality for this\n\n      /*\n       if (hasjQueryMobile()) {\n       // TODO: do jQueryMobile thing here\n\n    } else*/ if (hasjQueryUI()) {\n      // do jQueryUI thing here\n      message += '</p><p><input type=\"text\" value=\"' + value + '\" />';\n      options.title = options.title || 'Prompt';\n      options.buttons = {};\n      options.buttons[options.cancel] = function() {\n        $(this).dialog('close');\n      };\n      options.buttons[options.ok] = function() {\n        var $this = $(this);\n        dfrd.resolve($this.find('input').val());\n        $this.dialog('close');\n      };\n      options.close = function() {\n        if (!dfrd.isRejected() || !dfrd.isResolved()) {\n          dfrd.resolve(null);\n        }\n      };\n\n      showDialog.jQueryUI(message, options);\n\n    } else {\n      // last resort, use browser global :(\n      message = (options.title ? options.title + ' | ' : '') + message;\n      dfrd.resolve(global.prompt(message));\n    }\n    return dfrd.promise();\n  };\n\n  // put alert|confirm|prompt in a queue to prevent lost messages / promises\n\n  /**\n   * @param {Object} context the context to use during execution.\n   * @param {Function|String} method either the name or the method itself.\n   * @param {String} queue the name of the queue to use.\n   * @return {Function} a method that returns Promises and queues itself.\n   */\n  bindQueue = function(context, method, queue) {\n    if (typeof method === 'string') {\n      method = context[method];\n    }\n\n    return function() {\n      var args = $.makeArray(arguments),\n          dfrd = new $.Deferred();\n\n      $doc.queue(queue, function(next) {\n        var result,\n            array = $._data($doc[0], queue + 'queue');\n\n        array.unshift('inprogress');\n        result = method.apply(context, args);\n        result.then(function() {\n          dfrd.resolve.apply(dfrd, $.makeArray(arguments));\n          array.shift(); // clear 'inprogress'\n          next();\n        }, function() {\n          dfrd.reject.apply(dfrd, $.makeArray(arguments));\n          array.shift(); // clear 'inprogress'\n          next();\n        });\n        return result;\n      });\n\n      if ($doc.queue(queue).length && $doc.queue(queue)[0] !== 'inprogress') {\n        $doc.dequeue(queue);\n      }\n\n      return dfrd.promise();\n    };\n  };\n\n  BMP.alert = bindQueue(this, BMP.alertNoQueue, 'bmp-alerts');\n  BMP.confirm = bindQueue(this, BMP.confirmNoQueue, 'bmp-alerts');\n  BMP.prompt = bindQueue(this, BMP.promptNoQueue, 'bmp-alerts');\n\n  return BMP;\n}));","// UMD pattern from https://github.com/umdjs/umd/blob/master/amdWebGlobal.js\n\n/*global define:true*/\n/*jslint nomen:true*/ // for Underscore.JS\n\n(function(root, factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['../../../../.'], function(_) {\n      // Also create a global in case some scripts\n      // that are loaded still are looking for\n      // a global even when an AMD loader is in use.\n      root.BMP = factory(root, _);\n      return (root.BMP);\n    });\n  } else {\n    // Browser globals\n    root.BMP = factory(root, root._);\n  }\n}(this, function(global, _) {\n  'use strict';\n\n  var BMP,\n      BIC,\n      Config;\n\n  BMP = global.BMP = global.BMP || {};\n  BIC = BMP.BIC = BMP.BIC || {};\n\n  /**\n   * convenience prototype to collect configuration-specific functionality\n   * @constructor\n   * @param {Object} cfg plain object { setting: 'value', ... }.\n   */\n  Config = function(cfg) {\n    this.cfg = cfg;\n  };\n\n  /**\n   * @return {Object} plain object usable as Cordova CameraOptions.\n   */\n  Config.prototype.toCameraOptions = function() {\n    var options = {},\n        cameraOpts;\n\n    if (_.isNumber(this.cfg.imageCaptureQuality)) {\n      options.quality = this.cfg.imageCaptureQuality;\n    }\n    if (_.isNumber(this.cfg.imageCaptureScale)) {\n      options.imageScale = this.cfg.imageCaptureScale;\n    }\n    if (_.isString(this.cfg.cameraOptions)) {\n      try {\n        cameraOpts = JSON.parse(this.cfg.cameraOptions);\n        if (!_.isObject(cameraOpts) || _.isArray(cameraOpts)) {\n          cameraOpts = {};\n        }\n      } finally {\n        cameraOpts = cameraOpts || {};\n      }\n      _.extend(options, cameraOpts);\n    }\n    return options;\n  };\n\n  BIC.Config = Config;\n  return BMP;\n}));\n","/*\r\n * custom library to abstract access to available local storage mechanisms\r\n * requires: jQuery 1.5+, utilities.js (optional)\r\n *\r\n * valid storage types are: localstorage, sessionstorage, websqldatabase, indexeddb\r\n *\r\n * This has been designed with seemless operation of asynchronous storage methods,\r\n * via the jQuery Deferred Promises mechanism in jQuery 1.5.\r\n *\r\n * The SQL-specific terms \"database\" and \"table\" have been replaced with\r\n * the more neutral \"partition\" and \"section\", respectively.\r\n */\r\n\r\n/*jslint plusplus:true, white:true*/\r\n\r\n(function (window) {\r\n    'use strict';\r\n    var available,\r\n        $ = window.jQuery,\r\n        alert = window.alert,\r\n    // for websqldatabase\r\n        estimatedSizeMbs,\r\n        estimatedSize,\r\n        webSqlDbs = {}, // store open handles to databases (websqldatabase)\r\n        errorHandler,\r\n        openSection,\r\n        openWebSQL,\r\n    // logging functions\r\n        logger = {},\r\n        log, error, warn, info,\r\n        /**\r\n         * @inner\r\n         * @construct\r\n         */\r\n            BlinkStorage = function (type, partition, section) {\r\n            var self = this,\r\n                readyDeferred = new $.Deferred(),\r\n                sql, // for webslqdatabase and blinkgapsql\r\n                db,// for websqldatabase, localstorage or sessionstorage\r\n                memory; // for memory\r\n            if (typeof partition !== 'string' || partition.length < 1) {\r\n                partition = 'default';\r\n            }\r\n            if (typeof section !== 'string' || section.length < 1) {\r\n                section = 'main';\r\n            }\r\n\r\n            if (typeof type !== 'string') {\r\n                type = available[0];\r\n            } else if (type === 'sessionstorage' && $.inArray('sessionstorage', available) === -1) {\r\n                type = 'memory';\r\n            } else if ($.inArray(type, available) === -1) {\r\n                type = available[0];\r\n            }\r\n\r\n            self.type = type;\r\n            self.partition = partition;\r\n            self.section = section;\r\n\r\n            readyDeferred.done(function () {\r\n                log('BlinkStorage(): ' + type + ' -> ' + partition + ' : ' + section + ' ready');\r\n            });\r\n            self.ready = function () {\r\n                return readyDeferred.promise();\r\n            };\r\n\r\n            if (type === 'localstorage' || type === 'sessionstorage') {\r\n\r\n                db = (type === 'localstorage') ? window.localStorage : window.sessionStorage;\r\n\r\n                self.get = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    dfrd.resolve(db.getItem(partition + ':' + section + ':' + key));\r\n                    // dfrd.reject(); not sure if this is needed\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.set = function (key, value) {\r\n                    var dfrd = new $.Deferred();\r\n                    db.setItem(partition + ':' + section + ':' + key, value);\r\n                    dfrd.resolve();\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.remove = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    db.removeItem(partition + ':' + section + ':' + key);\r\n                    dfrd.resolve();\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.keys = function () {\r\n                    var dfrd = new $.Deferred(),\r\n                        found = [],\r\n                        length = db.length,\r\n                        index, parts,\r\n                        current,\r\n                        prefix = partition + ':' + section + ':';\r\n                    /* END: var */\r\n                    for (index = 0; index < length; index++) {\r\n                        current = db.key(index);\r\n                        if (current.indexOf(prefix) === 0) {\r\n                            found.push(current.replace(prefix, ''));\r\n                        }\r\n                    }\r\n                    dfrd.resolve(found);\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.count = function () {\r\n                    var dfrd = new $.Deferred();\r\n                    $.when(self.keys()).done(function (keys) {\r\n                        dfrd.resolve(keys.length);\r\n                    });\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                readyDeferred.resolve();\r\n\r\n            } else if (type === 'websqldatabase') {\r\n                //set the estimated size - use 5mb if we are using the old plugin, 100mb if we are on the new blinkgap and not much at all if we are not\r\n                if (window.device) {\r\n                  //we are on device\r\n                  if (window.sqlitePlugin) {\r\n                    //new version\r\n                    estimatedSizeMbs = 100\r\n                  } else {\r\n                    //old version\r\n                    estimatedSizeMbs = 5\r\n                  }\r\n                } else {\r\n                  estimatedSizeMbs = 0.75\r\n                }\r\n                estimatedSize = estimatedSizeMbs * 1024 * 1024;\r\n                /* @inner */\r\n                errorHandler = function (arg1, arg2) {\r\n                    var sqlError = arg2 && arg1.executeSql ? arg2 : arg1;\r\n                    error('BlinkStorage error1: ' + sqlError.code + ' ' + sqlError.message);\r\n                    if (sqlError.code === 3 || sqlError.code === 4 || sqlError.code === 7) {\r\n                        alert('storage-error: ' + sqlError.code + '\\n' + sqlError.message);\r\n                    }\r\n                    return false;\r\n                };\r\n                /* @inner */\r\n                openSection = function (db, readyDeferred) {\r\n\r\n                    db.transaction(function (tx) {\r\n                        tx.executeSql(\r\n                            'CREATE TABLE IF NOT EXISTS `' + section + '` (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)',\r\n                            [],\r\n                          $.noop,\r\n                          errorHandler\r\n                        );\r\n                    }, function (err) {\r\n                        //transaction error\r\n                        readyDeferred.reject();\r\n                        errorHandler();\r\n                    }, function () {\r\n                        //transaction success\r\n                        readyDeferred.resolve();\r\n                    });\r\n                };\r\n\r\n                /* @inner */\r\n                openWebSQL = function (partition, readyDeferred, onSuccess) {\r\n                    try {\r\n                        //db = window.openDatabase(partition, '1.0', partition, estimatedSize);\r\n                      if (window.sqlitePlugin) {\r\n                        log(\"sqliteplugin found. opening database.\");\r\n                        db = window.sqlitePlugin.openDatabase(partition, \"1.0\", partition, estimatedSize, function () {\r\n                          log(\"opendb success callback\");\r\n                        }, function () {\r\n                          log(\"failed to open \" + partition);\r\n                          readyDeferred.reject();\r\n                          throw 'BlinkStorage: sqliteplugin unable to open database';\r\n                        });\r\n                      } else {\r\n                         db = window.openDatabase(partition, \"1.0\", partition, estimatedSize);\r\n                      }\r\n                      //assign our references to DB and the nulls\r\n                      if (db && (db.readTransaction || db.transaction)) {\r\n                        webSqlDbs[partition] = db;\r\n                        db.readTransaction = db.readTransaction || db.transaction;\r\n                        onSuccess(db, readyDeferred);\r\n                      } else {\r\n                        throw \"neither sqliteplugin nor window.openDatabase worked. failing.\"\r\n                      }\r\n                    } catch (error) {\r\n                        readyDeferred.reject();\r\n                        throw 'BlinkStorage: ' + error;\r\n                    }\r\n                };\r\n\r\n                // cache SQL so each string only occupies memory once per DB\r\n                sql = {\r\n                    get: 'SELECT v FROM `' + section + '` WHERE k = ?',\r\n                    set: 'INSERT OR REPLACE INTO `' + section + '` (k, v) VALUES (?, ?)',\r\n                    remove: 'DELETE FROM `' + section + '` WHERE k = ?',\r\n                    keys: 'SELECT k FROM `' + section + '`',\r\n                    count: 'SELECT count(k) AS `count` FROM ' + section\r\n                };\r\n\r\n                if (webSqlDbs[partition]) {\r\n                    db = webSqlDbs[partition];\r\n                    openSection(db, readyDeferred);\r\n                } else {\r\n                    openWebSQL(partition, readyDeferred, openSection);\r\n                }\r\n\r\n                self.get = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    db.readTransaction(function (tx) {\r\n                        tx.executeSql(sql.get, [key],\r\n                            function (tx, result) { // SQL success handler\r\n                                if (result.rows.length === 1) {\r\n                                    dfrd.resolve(result.rows.item(0).v);\r\n                                } else {\r\n                                    dfrd.resolve(null);\r\n                                    if (result.rows.length > 1) {\r\n                                        error('BlinkStorage: SELECT returned multiple rows');\r\n                                    }\r\n                                }\r\n                            },\r\n                            errorHandler // SQL error handler\r\n                        );\r\n                    }, errorHandler, $.noop); // transaction handlers\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.set = function (key, value, attempts) {\r\n                    var deferred = new $.Deferred(),\r\n                        dfrdSQL = new $.Deferred(),\r\n                        retryFn = function () {\r\n                            setTimeout(function () { // retry after 2 seconds\r\n                                $.when(self.set(key, value, attempts))\r\n                                    .fail(deferred.reject)\r\n                                    .then(deferred.resolve);\r\n                            }, 2 * 1000);\r\n                        };\r\n                    /* END: var */\r\n                    attempts = typeof attempts !== 'number' ? 2 : attempts;\r\n                    if (attempts-- <= 0) {\r\n                        deferred.reject();\r\n                        return deferred.promise();\r\n                    }\r\n                    // perform transaction\r\n                    setTimeout(function () {\r\n                        db.transaction(function (tx) {\r\n                                // execute INSERT OR REPLACE statement\r\n                                tx.executeSql(sql.set, [key, value],\r\n                                    function (tx, result) { // SQL success handler\r\n                                        if (result.rowsAffected !== 1) {\r\n                                            error('BlinkStorage: INSERT did not affect 1 row');\r\n                                            retryFn();\r\n                                        } else {\r\n                                            dfrdSQL.resolve();\r\n                                        }\r\n                                    },\r\n                                    function (tx, sqlError) { // SQL error handler\r\n                                        errorHandler(sqlError);\r\n                                        retryFn();\r\n                                    }\r\n                                );\r\n                            },\r\n                            function (tx, sqlError) { // transaction error handler\r\n                                errorHandler(tx, sqlError);\r\n                                retryFn();\r\n                            },\r\n                            function () { // transaction success handler\r\n                                if (dfrdSQL.state() === 'pending') {\r\n                                    // if TX finishes before SQL then we have a problem\r\n                                    retryFn();\r\n                                } else {\r\n                                    deferred.resolve();\r\n                                }\r\n                            });\r\n                    }, 0);\r\n                    return deferred.promise();\r\n                };\r\n\r\n                self.remove = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    db.transaction(function (tx) {\r\n                        tx.executeSql(sql.remove, [key], function (tx, result) {\r\n                            dfrd.resolve();\r\n                        });\r\n                    }, errorHandler, $.noop);\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.keys = function () {\r\n                    var dfrd = new $.Deferred();\r\n                    db.readTransaction(function (tx) {\r\n                        tx.executeSql(sql.keys, [], function (tx, result) {\r\n                            var index, row,\r\n                                length = result.rows.length,\r\n                                found = [];\r\n                            for (index = 0; index < length; index++) {\r\n                                row = result.rows.item(index);\r\n                                found.push(row.k);\r\n                            }\r\n                            dfrd.resolve(found);\r\n                        });\r\n                    }, errorHandler, $.noop);\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.count = function () {\r\n                    var dfrd = new $.Deferred();\r\n                    db.readTransaction(function (tx) {\r\n                        tx.executeSql(sql.count, [], function (tx, result) {\r\n                                var count = result.rows.item(0).count;\r\n                                if ($.isNumeric(count)) {\r\n                                    dfrd.resolve(parseInt(count, 10));\r\n                                } else {\r\n                                    error('BlinkStorage: SELECT count(k) non-numeric');\r\n                                    dfrd.reject();\r\n                                }\r\n                            }\r\n                        );\r\n                    }, errorHandler, $.noop);\r\n                    return dfrd.promise();\r\n                };\r\n\r\n            } else if (type === 'memory') {\r\n\r\n                memory = {};\r\n\r\n                self.get = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    dfrd.resolve(memory[partition + ':' + section + ':' + key]);\r\n                    // dfrd.reject(); not sure if this is needed\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.set = function (key, value) {\r\n                    var dfrd = new $.Deferred();\r\n                    memory[partition + ':' + section + ':' + key] = value;\r\n                    dfrd.resolve();\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.remove = function (key) {\r\n                    var dfrd = new $.Deferred();\r\n                    delete memory[partition + ':' + section + ':' + key];\r\n                    dfrd.resolve();\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.keys = function () {\r\n                    var dfrd = new $.Deferred(),\r\n                        found = [],\r\n                        prefix = partition + ':' + section + ':',\r\n                        key;\r\n                    /* END: var */\r\n                    for (key in memory) {\r\n                        if (memory.hasOwnProperty(key)) {\r\n                            if (key.indexOf(prefix) === 0) {\r\n                                found.push(key.replace(prefix, ''));\r\n                            }\r\n                        }\r\n                    }\r\n                    dfrd.resolve(found);\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                self.count = function () {\r\n                    var dfrd = new $.Deferred();\r\n                    $.when(self.keys()).done(function (keys) {\r\n                        dfrd.resolve(keys.length);\r\n                    });\r\n                    return dfrd.promise();\r\n                };\r\n\r\n                readyDeferred.resolve();\r\n            }\r\n            return this;\r\n        };\r\n    /* END: var */\r\n\r\n    if (!$) {\r\n        alert('error: BlinkStorage.JS requires jQuery to be loaded first');\r\n        return;\r\n    }\r\n\r\n    // setup loggers\r\n    $.each(['log', 'error', 'warn', 'info'], function (index, fn) {\r\n        logger[fn] = function () {\r\n            if (window[fn]) {\r\n                window[fn].apply(window, arguments);\r\n            }\r\n        };\r\n    });\r\n    log = logger.log;\r\n    error = logger.error;\r\n    warn = logger.warn;\r\n    info = logger.info;\r\n\r\n    BlinkStorage.prototype.removeKeysRegExp = function (regexp) {\r\n        var store = this,\r\n            deferred = new $.Deferred(function (dfrd) {\r\n                $.when(store.keys()).done(function (keys) {\r\n                    var k, kLength = keys.length,\r\n                        removeDefers = [];\r\n                    for (k = 0; k < kLength; k++) {\r\n                        if (keys[k].search(regexp) !== -1) {\r\n                            removeDefers.push(store.remove(keys[k]));\r\n                        }\r\n                    }\r\n                    $.when(removeDefers).done(dfrd.resolve());\r\n                });\r\n            });\r\n        return deferred.promise();\r\n    };\r\n\r\n    // perform engine detection\r\n    BlinkStorage.prototype.available = [];\r\n    available = BlinkStorage.prototype.available;\r\n    // TODO: add detection for indexedDB\r\n    if (typeof window.openDatabase !== 'undefined') {\r\n        available.push('websqldatabase');\r\n    }\r\n    if (typeof window.localStorage !== 'undefined') {\r\n        available.push('localstorage');\r\n    }\r\n    if (typeof window.sessionStorage !== 'undefined') {\r\n        available.push('sessionstorage');\r\n    }\r\n    available.push('memory');\r\n    if (typeof window.log === 'function') {\r\n        info('BlinkStorage(): available=[' + available.join(',') + ']');\r\n    }\r\n\r\n    window.BlinkStorage = BlinkStorage;\r\n}(this));\r\n"]}